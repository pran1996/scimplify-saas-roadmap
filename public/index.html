<!DOCTYPE html>
<html lang="en" x-data="app()" x-init="init()">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scimplify ‚Äî Digital Product Roadmap</title>
<script src="https://cdn.tailwindcss.com"></script>
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<script>
tailwind.config = {
  theme: {
    extend: {
      fontFamily: { sans: ['Inter', 'sans-serif'] },
      colors: {
        navy: '#0f0d2e',
        indigo: '#6366f1',
        teal: '#14b8a6',
        amber: '#fbbf24',
      }
    }
  }
}
</script>
<style>
[x-cloak]{display:none!important}
body{background:#0f0d2e;font-family:'Inter',sans-serif;color:#e2e8f0}
.glass{background:rgba(255,255,255,0.03);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,0.08)}
.glass-hover:hover{background:rgba(255,255,255,0.06);border-color:rgba(255,255,255,0.15)}
.glow{box-shadow:0 0 30px rgba(99,102,241,0.15)}
.glow-teal{box-shadow:0 0 30px rgba(20,184,166,0.15)}
::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:#0f0d2e}::-webkit-scrollbar-thumb{background:#6366f1;border-radius:3px}
.fade-in{animation:fadeIn .4s ease}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.pulse-dot{animation:pulse 2s infinite}@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
.node-line{stroke:rgba(255,255,255,0.1);stroke-width:1}
.node-line.highlighted{stroke:#6366f1;stroke-width:2;opacity:1}
.node-circle{transition:all .3s}.node-circle.dimmed{opacity:.2}.node-circle.highlighted{filter:drop-shadow(0 0 8px currentColor)}
.gantt-bar{border-radius:4px;height:24px;transition:all .3s}
.tier-must{background:linear-gradient(135deg,#6366f1,#818cf8)}.tier-next{background:linear-gradient(135deg,#14b8a6,#2dd4bf)}.tier-traction{background:linear-gradient(135deg,#f59e0b,#fbbf24)}
.score-bar{height:6px;border-radius:3px;transition:width .8s ease}
.matching-anim{animation:matchPulse 1.5s ease infinite}@keyframes matchPulse{0%{box-shadow:0 0 0 0 rgba(99,102,241,.4)}70%{box-shadow:0 0 0 20px rgba(99,102,241,0)}100%{box-shadow:0 0 0 0 rgba(99,102,241,0)}}

/* ===== MOBILE RESPONSIVE ===== */
@media(max-width:767px){
  /* Nav compact */
  nav .max-w-7xl{padding-left:0.75rem;padding-right:0.75rem}
  nav .gap-6{gap:0.5rem}
  nav .text-lg{font-size:0.875rem}
  nav .text-sm.text-gray-400{font-size:0.7rem}
  /* Hero tighter */
  section h1.text-4xl{font-size:1.75rem;line-height:2rem}
  /* Reduce section padding */
  .pb-16{padding-bottom:2.5rem}
  .py-20{padding-top:3rem;padding-bottom:3rem}
  /* Product cards: full width stacking */
  .glass.rounded-xl p{overflow-wrap:break-word}
  /* Step flow items */
  .w-7{width:1.5rem;height:1.5rem;min-width:1.5rem}
  /* Gantt / revenue interactive - ensure scroll hint */
  .overflow-x-auto{-webkit-overflow-scrolling:touch}
  /* Fix compare bar on mobile */
  .fixed.bottom-4{bottom:4.5rem;max-width:90vw;font-size:0.75rem}
  /* Products mode: more room above bottom bar */
  main.pb-20{padding-bottom:5rem}
}
@media(max-width:480px){
  section h1.text-4xl{font-size:1.5rem;line-height:1.75rem}
  .text-2xl{font-size:1.125rem}
  .grid.gap-6{gap:1rem}
  .grid.gap-4{gap:0.75rem}
  .grid.gap-5{gap:0.75rem}
  .glass.rounded-xl{border-radius:0.75rem}
  /* Stat cards smaller */
  .text-2xl.font-bold.text-indigo{font-size:1.25rem}
}
</style>
</head>
<body class="min-h-screen" x-data="{toast:'',toastTimer:null}" @show-toast.window="toast=$event.detail;clearTimeout(toastTimer);toastTimer=setTimeout(()=>toast='',2500)">
<!-- Toast -->
<div x-show="toast" x-cloak x-transition class="fixed top-20 left-1/2 -translate-x-1/2 z-[60] bg-indigo/90 text-white text-sm px-4 py-2 rounded-lg shadow-xl backdrop-blur" x-text="toast"></div>

<!-- NAV -->
<nav class="fixed top-0 w-full z-50 glass border-b border-white/10" style="background:rgba(15,13,46,0.9)">
<div class="max-w-7xl mx-auto flex items-center justify-between px-4 h-14">
  <div class="flex items-center gap-6">
    <span class="text-lg font-bold bg-gradient-to-r from-indigo to-teal bg-clip-text text-transparent">‚öóÔ∏è Scimplify</span>
    <div class="flex gap-1 bg-white/5 rounded-lg p-0.5">
      <button @click="mode='roadmap'" :class="mode==='roadmap'?'bg-indigo text-white':'text-gray-400 hover:text-white'" class="px-3 py-1 rounded-md text-sm font-medium transition">Roadmap</button>
      <button @click="mode='products'" :class="mode==='products'?'bg-indigo text-white':'text-gray-400 hover:text-white'" class="px-3 py-1 rounded-md text-sm font-medium transition">Products</button>
    </div>
  </div>
  <span class="text-sm text-gray-400 hidden sm:inline">Pranshu Jain</span>
</div>
</nav>

<div class="pt-14">

<!-- ==================== ROADMAP MODE ==================== -->
<div x-show="mode==='roadmap'" x-cloak class="fade-in">

<!-- Hero -->
<section class="max-w-6xl mx-auto px-4 py-20 text-center">
  <div class="inline-block px-3 py-1 rounded-full text-xs font-medium bg-indigo/20 text-indigo border border-indigo/30 mb-6">Strategic Roadmap 2025-2026</div>
  <h1 class="text-4xl md:text-5xl font-bold mb-4 leading-tight">Digital Product &amp; SaaS<br><span class="bg-gradient-to-r from-indigo to-teal bg-clip-text text-transparent">Revenue Roadmap</span></h1>
  <p class="text-gray-400 text-lg max-w-2xl mx-auto">Transforming Scimplify from a services company into a platform-powered chemical intelligence business</p>
</section>

<!-- Stats -->
<section class="max-w-5xl mx-auto px-4 pb-16">
<div class="grid grid-cols-2 md:grid-cols-4 gap-4">
  <template x-for="s in [{n:'465',l:'Manufacturers'},{n:'5,000+',l:'Customers'},{n:'350+',l:'Enquiries/Week'},{n:'11',l:'Industries'}]">
    <div class="glass rounded-xl p-5 text-center">
      <div class="text-2xl font-bold text-indigo" x-text="s.n"></div>
      <div class="text-xs text-gray-400 mt-1" x-text="s.l"></div>
    </div>
  </template>
</div>
</section>

<!-- Two Revenue Engines section removed -->

<!-- Platform Architecture -->
<section class="max-w-5xl mx-auto px-4 pb-16">
<h2 class="text-2xl font-bold mb-2 text-center">How the Products Connect</h2>
<p class="text-xs text-gray-500 text-center mb-6">Each product generates data that makes the next one smarter. Here's a concrete example.</p>

<!-- Story Flow -->
<div class="glass rounded-xl p-6 mb-4">
  <div class="text-xs font-medium text-indigo mb-3">Follow a real scenario through the platform:</div>
  <div class="space-y-3">
    <!-- Step 1 -->
    <div class="glass rounded-lg p-4 border-l-4 border-indigo">
      <div class="flex items-start gap-3">
        <div class="w-7 h-7 shrink-0 rounded-full bg-indigo/20 flex items-center justify-center text-xs font-bold text-indigo">1</div>
        <div>
          <div class="font-semibold text-sm">üìã IONS Project Hub</div>
          <div class="text-xs text-gray-400 mt-1">An EU pharma company wants to switch from their China supplier for Pymetrozine. A project is created in IONS with milestones: route design ‚Üí lab scale ‚Üí pilot ‚Üí tech transfer.</div>
          <div class="text-[10px] text-teal mt-1">üìä Data captured: which factory was matched, what route was used, sample purity at each iteration, final cost/kg, timeline to completion.</div>
        </div>
      </div>
    </div>
    <div class="text-center text-gray-500">‚Üì</div>
    <!-- Step 2 -->
    <div class="glass rounded-lg p-4 border-l-4 border-purple-400">
      <div class="flex items-start gap-3">
        <div class="w-7 h-7 shrink-0 rounded-full bg-purple-500/20 flex items-center justify-center text-xs font-bold text-purple-400">2</div>
        <div>
          <div class="font-semibold text-sm">üï∏Ô∏è ChemGraph</div>
          <div class="text-xs text-gray-400 mt-1">That project data feeds the knowledge graph. Now ChemGraph knows: "Anand Chemtex can produce Pymetrozine at 98.2% purity, $42/kg, 5 steps, via Route B." Next time someone asks, the answer is instant ‚Äî no scientist needed.</div>
          <div class="text-[10px] text-teal mt-1">üìä Intelligence unlocked: cross-sell ("this buyer probably also needs Fexofenadine"), supply risk ("Anand Chemtex is sole source ‚Äî flag backup"), cost benchmark ("$42/kg is 12% below network average").</div>
        </div>
      </div>
    </div>
    <div class="text-center text-gray-500">‚Üì</div>
    <!-- Step 3 -->
    <div class="grid md:grid-cols-2 gap-3">
      <div class="glass rounded-lg p-4 border-l-4 border-teal">
        <div class="flex items-start gap-3">
          <div class="w-7 h-7 shrink-0 rounded-full bg-teal/20 flex items-center justify-center text-xs font-bold text-teal">3a</div>
          <div>
            <div class="font-semibold text-sm">üõ°Ô∏è ComplianceOS</div>
            <div class="text-xs text-gray-400 mt-1">Anand Chemtex's FDA cert is tracked. 90 days before expiry ‚Üí auto-alert. Their gap analysis shows they need REACH to serve more EU buyers. Remediation guided.</div>
            <div class="text-[10px] text-teal mt-1">üìä More certs = qualified for more orders = more revenue through ATOMS.</div>
          </div>
        </div>
      </div>
      <div class="glass rounded-lg p-4 border-l-4 border-green-400">
        <div class="flex items-start gap-3">
          <div class="w-7 h-7 shrink-0 rounded-full bg-green-500/20 flex items-center justify-center text-xs font-bold text-green-400">3b</div>
          <div>
            <div class="font-semibold text-sm">üå± GreenScore</div>
            <div class="text-xs text-gray-400 mt-1">The Pymetrozine route's carbon footprint: 2.1 kg CO‚ÇÇ/kg (vs 5.8 from China). This score appears on the ATOMS product listing. EU buyer saves ‚Ç¨27K in CBAM fees per 100-ton order.</div>
            <div class="text-[10px] text-teal mt-1">üìä Carbon data makes the listing more competitive. More EU orders follow.</div>
          </div>
        </div>
      </div>
    </div>
    <div class="text-center text-gray-500">‚Üì</div>
    <!-- Step 4 -->
    <div class="glass rounded-lg p-4 border-l-4 border-amber">
      <div class="flex items-start gap-3">
        <div class="w-7 h-7 shrink-0 rounded-full bg-amber/20 flex items-center justify-center text-xs font-bold text-amber">4</div>
        <div>
          <div class="font-semibold text-sm">üõí ATOMS Commerce</div>
          <div class="text-xs text-gray-400 mt-1">Pymetrozine now listed on ATOMS: ‚Çπ3,200/kg, 98% purity, FDA certified, GreenScore A+, delivery in 4 weeks. The buyer's next order? One click. No email. No sales call.</div>
          <div class="text-[10px] text-teal mt-1">üìä Transaction generates more data ‚Üí feeds back into ChemGraph ‚Üí the loop continues.</div>
        </div>
      </div>
    </div>
  </div>
  <div class="mt-4 pt-4 border-t border-white/10 text-center">
    <p class="text-xs text-white font-medium">One project ‚Üí structured data ‚Üí smarter matching ‚Üí more orders ‚Üí more projects ‚Üí more data.</p>
    <p class="text-xs text-gray-500 mt-1">This is the flywheel. Competitors can copy the UI ‚Äî they can't copy 5 years of accumulated project data across 465 factories.</p>
  </div>
</div>
</section>

<!-- Data Moat Slide -->
<section class="max-w-5xl mx-auto px-4 pb-16">
<h2 class="text-2xl font-bold mb-2 text-center">Why Data, Not AI, Is Our Moat</h2>
<p class="text-xs text-gray-500 text-center mb-6">Benchling's 2026 Biotech AI Report found 55% of AI pilots fail on data quality. Scimplify doesn't have a data problem ‚Äî it has a data <span class="text-white">capture</span> problem. Every product solves it.</p>

<div class="grid md:grid-cols-2 gap-6 mb-6">
  <!-- Left: The Problem -->
  <div class="glass rounded-xl p-5">
    <h3 class="font-semibold text-sm text-red-400 mb-3">‚ùå Where Most Companies Fail</h3>
    <div class="space-y-3 text-xs text-gray-400">
      <div class="flex gap-2"><span class="text-red-400 shrink-0">55%</span> AI pilots fail due to poor data quality & availability</div>
      <div class="flex gap-2"><span class="text-red-400 shrink-0">50%</span> fail on IP, security & compliance friction</div>
      <div class="flex gap-2"><span class="text-red-400 shrink-0">39%</span> still use AI for single tasks only, not end-to-end</div>
      <div class="mt-3 pt-3 border-t border-white/10 text-gray-500 italic">"The race isn't to the best model ‚Äî it's to the best data-to-decision loop."<br>‚Äî Benchling 2026 AI Report</div>
    </div>
  </div>
  <!-- Right: Scimplify's Advantage -->
  <div class="glass rounded-xl p-5 border border-teal/20">
    <h3 class="font-semibold text-sm text-teal mb-3">‚úì What Scimplify Already Has</h3>
    <div class="space-y-3 text-xs text-gray-400">
      <div class="flex gap-2"><span class="text-teal shrink-0">üè≠</span><span><span class="text-white">465+ factory audits</span> ‚Äî capabilities, equipment, capacity, certifications. First-party, verified.</span></div>
      <div class="flex gap-2"><span class="text-teal shrink-0">üß™</span><span><span class="text-white">Synthesis route data</span> ‚Äî reactions, reagents, temperatures, yields, costs. From actual project execution.</span></div>
      <div class="flex gap-2"><span class="text-teal shrink-0">üì¶</span><span><span class="text-white">Transaction history</span> ‚Äî who bought what from whom, at what price, what quality.</span></div>
      <div class="flex gap-2"><span class="text-teal shrink-0">üîó</span><span><span class="text-white">Network graph</span> ‚Äî manufacturer‚Üîproduct‚Üîcustomer relationships no one else can see.</span></div>
    </div>
  </div>
</div>

<!-- Every Product = Data Capture -->
<div class="glass rounded-xl p-6">
  <h3 class="font-semibold text-sm text-center mb-4">Every Product Is a Data Capture Mechanism First, a User Tool Second</h3>
  <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-3">
    <div class="glass rounded-lg p-3 text-center">
      <div class="text-lg mb-1">üìã</div>
      <div class="text-xs font-medium">IONS Project Hub</div>
      <div class="text-[10px] text-gray-500 mt-1">Every project managed = structured route, yield, timeline, and quality data captured</div>
    </div>
    <div class="glass rounded-lg p-3 text-center">
      <div class="text-lg mb-1">üõ°Ô∏è</div>
      <div class="text-xs font-medium">ComplianceOS</div>
      <div class="text-[10px] text-gray-500 mt-1">Every cert tracked = factory qualification status digitized and queryable</div>
    </div>
    <div class="glass rounded-lg p-3 text-center">
      <div class="text-lg mb-1">üõí</div>
      <div class="text-xs font-medium">ATOMS Commerce</div>
      <div class="text-[10px] text-gray-500 mt-1">Every transaction = pricing, demand, and preference signals added to the graph</div>
    </div>
    <div class="glass rounded-lg p-3 text-center">
      <div class="text-lg mb-1">üå±</div>
      <div class="text-xs font-medium">GreenScore</div>
      <div class="text-[10px] text-gray-500 mt-1">Every carbon calculation = proprietary emission data for Indian specialty chemicals</div>
    </div>
  </div>
  <div class="mt-4 pt-4 border-t border-white/10 text-center">
    <p class="text-xs text-gray-400">After 500 products across 200 factories:</p>
    <p class="text-sm font-bold text-teal mt-1">Scimplify owns a proprietary chemical intelligence database that doesn't exist anywhere else.</p>
    <p class="text-xs text-gray-500 mt-1">Competitors can copy the UI. They can't copy 5 years of accumulated project data.</p>
  </div>
</div>

</section>

<!-- Industry Analogies -->
<section class="max-w-5xl mx-auto px-4 pb-16">
<h2 class="text-2xl font-bold mb-6 text-center">Standing on Giant Shoulders</h2>
<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
  <div class="glass rounded-xl p-5">
    <div class="text-2xl mb-2">üî¨</div>
    <div class="font-semibold text-sm mb-1">Benchling</div>
    <div class="text-xs text-gray-500 mb-2">$100M+ ARR ‚Ä¢ R&D OS for biotech</div>
    <div class="text-xs text-gray-400 mb-2">ELN + LIMS + workflow templates + compliance + data platform for internal biotech R&D teams.</div>
    <div class="text-xs text-indigo">
      <span class="font-medium">What we take:</span> Workflow templates, sample traceability, milestone tracking. <span class="font-medium">Skip:</span> Full ELN/LIMS, molecular design.
    </div>
    <div class="mt-2 text-[10px] text-gray-500">‚Üí IONS Project Hub</div>
  </div>
  <div class="glass rounded-xl p-5">
    <div class="text-2xl mb-2">üõ°Ô∏è</div>
    <div class="font-semibold text-sm mb-1">Resilinc</div>
    <div class="text-xs text-gray-500 mb-2">Gartner Leader ‚Ä¢ Supply chain risk for Fortune 500</div>
    <div class="text-xs text-gray-400 mb-2">Multi-tier supplier mapping, disruption monitoring, what-if scenarios, compliance management.</div>
    <div class="text-xs text-indigo">
      <span class="font-medium">What we take:</span> Supply risk queries, alternative sourcing, compliance tracking. <span class="font-medium">Skip:</span> Global news monitoring, agentic AI.
    </div>
    <div class="mt-2 text-[10px] text-gray-500">‚Üí ChemGraph + ComplianceOS</div>
  </div>
  <div class="glass rounded-xl p-5">
    <div class="text-2xl mb-2">üå±</div>
    <div class="font-semibold text-sm mb-1">Sphera</div>
    <div class="text-xs text-gray-500 mb-2">Carbon mgmt leader ‚Ä¢ Enterprise sustainability & EHS</div>
    <div class="text-xs text-gray-400 mb-2">LCA Automation for Chemical Manufacturing, SDS Management, Product Stewardship, Supply Chain Risk. Sells to Dow, BASF at $100K+/yr.</div>
    <div class="text-xs text-indigo">
      <span class="font-medium">What we take:</span> Product-level carbon scoring (simplified LCA), SDS automation. <span class="font-medium">Skip:</span> Full enterprise EHS, process safety. <span class="font-medium">Key diff:</span> Sphera is SAP. We're Shopify ‚Äî same capabilities, embedded in a marketplace for mid-market.
    </div>
    <div class="mt-2 text-[10px] text-gray-500">‚Üí GreenScore + ComplianceOS</div>
  </div>
  <div class="glass rounded-xl p-5">
    <div class="text-2xl mb-2">üè≠</div>
    <div class="font-semibold text-sm mb-1">Cognilix <span class="text-[9px] text-gray-500">(by Moglix)</span></div>
    <div class="text-xs text-gray-500 mb-2">$40Bn+ network ‚Ä¢ B2B commerce SaaS spun from marketplace</div>
    <div class="text-xs text-gray-400 mb-2">Source-to-Pay, Vendor Management, B2B eCommerce (Cognimart), RFQ/Spend Analytics. Born from Moglix's operational backbone ‚Äî exact same playbook we're proposing.</div>
    <div class="text-xs text-indigo">
      <span class="font-medium">What we take:</span> Vendor onboarding (self-serve), B2B eCommerce model, RFQ price benchmarking. <span class="font-medium">Key diff:</span> Cognilix is horizontal (all MRO). We're vertical ‚Äî chemistry-deep matching no horizontal platform can do.
    </div>
    <div class="mt-2 text-[10px] text-gray-500">‚Üí ATOMS Commerce + ComplianceOS</div>
  </div>
  <div class="glass rounded-xl p-5">
    <div class="text-2xl mb-2">üìä</div>
    <div class="font-semibold text-sm mb-1">Veeva Systems</div>
    <div class="text-xs text-gray-500 mb-2">$2B+ ARR ‚Ä¢ Industry cloud for life sciences</div>
    <div class="text-xs text-gray-400 mb-2">Started as CRM for pharma, became the OS ‚Äî every life sciences company runs on Veeva. Vertical SaaS dominance.</div>
    <div class="text-xs text-indigo">
      <span class="font-medium">The playbook:</span> Own the vertical. Start with one workflow, expand to the entire value chain. Specialty chemicals has no Veeva. Yet.
    </div>
    <div class="mt-2 text-[10px] text-gray-500">‚Üí The endgame</div>
  </div>
</div>
</section>

<!-- 6 Product Cards -->
<section class="max-w-6xl mx-auto px-4 pb-16">
<h2 class="text-2xl font-bold mb-6 text-center">The Six Products</h2>
<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-5">

  <!-- Product 2: IONS Project Hub -->
  <div x-data="{open:false}" class="glass rounded-xl p-6 cursor-pointer transition" @click="open=!open">
    <div class="flex justify-between items-start mb-2">
      <span class="text-2xl">üî¨</span>
      <span class="text-[10px] font-semibold px-2 py-0.5 rounded-full text-white tier-must">Must Build</span>
    </div>
    <h3 class="font-semibold mb-1">IONS Project Hub</h3>
    <p class="text-xs text-gray-400 mb-2">"Every molecule has a journey. Now you can track it."</p>
    <p x-show="!open" class="text-[10px] text-gray-500 italic mt-1">Click to expand ‚Üì</p>
    <div x-show="open" x-collapse class="mt-3 space-y-3 text-xs text-gray-400">
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">What It Does</p>
        <ul class="list-disc list-inside space-y-1">
          <li>Project management platform for R&D engagements ‚Äî NOT a scientist marketplace</li>
          <li>Three workflow templates: Route Optimization, Custom Molecule Development, China+1 Switch</li>
          <li>Milestone-based tracking with quality gates (Discovery ‚Üí Feasibility ‚Üí Lab Scale ‚Üí Pilot ‚Üí Tech Transfer ‚Üí Qualification ‚Üí Production)</li>
          <li>Sample tracking with iteration history ("V1: Purity 95% ‚Äî rejected. V2: 97.5%. V3: 98.2% ‚úì")</li>
          <li>Customer-facing portal for project status, feedback submission, milestone approvals</li>
        </ul>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">ICP</p>
        <p>R&D heads and procurement managers with active Scimplify projects. Internally: Scimplify scientists managing 20+ concurrent projects.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Value Created</p>
        <p>Scientists become 3-5x more productive (structured workflows vs spreadsheet chaos). Customer transparency ‚Äî no more "where's my sample?" emails. Project cycle time reduced 30-40%.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Value Captured</p>
        <p>Managed tier: $2,000-5,000/mo per active project. Primary value: more projects per scientist = more revenue. Self-serve tier (future): $500/mo.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Industry Analogy</p>
        <p class="italic">"Benchling for contract chemistry R&D ‚Äî but where Benchling serves internal biotech teams, IONS serves outsourced R&D with a customer-facing collaboration layer Benchling doesn't have."</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">What We Take from Benchling</p>
        <p>Workflow templates per project type. Sample traceability with iteration history. Milestone-based tracking. Compliance checkpoints embedded in workflows.</p>
        <p class="mt-1"><span class="text-white">What we skip:</span> Full ELN/LIMS, molecular design tools, GxP validation environments ‚Äî wrong domain, wrong scale.</p>
      </div>
      </div>
<button @click.stop="mode='products';activeProduct='ions'" class="mt-3 w-full px-4 py-2.5 bg-gradient-to-r from-indigo to-teal hover:opacity-90 text-white rounded-lg text-sm font-semibold transition shadow-lg shadow-indigo/20">‚ñ∂ Try Interactive Demo</button>
  </div>

  <!-- Product 3: ChemGraph -->
  <div x-data="{open:false}" class="glass rounded-xl p-6 cursor-pointer transition" @click="open=!open">
    <div class="flex justify-between items-start mb-2">
      <span class="text-2xl">üï∏Ô∏è</span>
      <span class="text-[10px] font-semibold px-2 py-0.5 rounded-full text-white tier-next">Build Next</span>
    </div>
    <h3 class="font-semibold mb-1">ChemGraph</h3>
    <p class="text-xs text-gray-400 mb-2">"The chemical industry's knowledge graph. See what others can't."</p>
    <p x-show="!open" class="text-[10px] text-gray-500 italic mt-1">Click to expand ‚Üì</p>
    <div x-show="open" x-collapse class="mt-3 space-y-3 text-xs text-gray-400">
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">The Vision</p>
        <p class="text-white font-medium">The Bloomberg Terminal for specialty chemicals.</p>
        <p class="mt-1">A proprietary knowledge graph connecting 465+ manufacturers, 5,000+ customers, 20,000+ products, and every relationship between them. No competitor can replicate this ‚Äî it's built on real manufacturer audits, real transaction data, and real chemistry.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Phase 1: Internal Intelligence Engine (Now)</p>
        <ul class="list-disc list-inside space-y-1">
          <li><span class="text-white">BD lead gen:</span> "47 products have >70% China dependency ‚Äî India can make all of them" ‚Üí proactive outreach</li>
          <li><span class="text-white">Cross-sell:</span> "Customer X buys Molecule A. They likely need B ‚Äî Factory Y can make it"</li>
          <li><span class="text-white">Supply risk:</span> "Factory Z is our only source for 3 products. Here are backups."</li>
          <li><span class="text-white">Capacity matching:</span> "Factory W has idle hydrogenation + 3 orders need it" ‚Üí instant match</li>
          <li><span class="text-white">Pricing intelligence:</span> Network-wide cost benchmarking for negotiation</li>
        </ul>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Phase 2: Powers Other Products</p>
        <p>ChemGraph becomes the brain underneath everything ‚Äî "similar products" in ATOMS Commerce, "alternative suppliers" in ComplianceOS, risk scoring in China+1 reports. Every product gets smarter because the graph exists.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Phase 3: External Product (2,000+ manufacturers)</p>
        <p>Enterprise procurement subscriptions: $500-5,000/mo. Supply chain intelligence reports: $5-20K. Only viable at scale ‚Äî when the network is dense enough that buyers treat it as the source of truth for Indian specialty chemicals.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">The Moat</p>
        <p>Every transaction, every project, every audit makes the graph smarter. At 500 products, Scimplify owns a <span class="text-white">proprietary emission + capability + pricing database</span> for Indian specialty chemicals that doesn't exist anywhere else. The data compounds. Competitors start from zero.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">The Endgame</p>
        <p class="italic">"Specialty chemicals is a $600B+ market with zero dominant intelligence platform. Veeva built a $2B+ business being the OS for life sciences. ChemGraph is Scimplify's path to being that for chemicals."</p>
      </div>
      </div>
<button @click.stop="mode='products';activeProduct=3" class="mt-3 w-full px-4 py-2.5 bg-gradient-to-r from-indigo to-teal hover:opacity-90 text-white rounded-lg text-sm font-semibold transition shadow-lg shadow-indigo/20">‚ñ∂ Try Interactive Demo</button>
  </div>

  <!-- Product 4: ComplianceOS -->
  <div x-data="{open:false}" class="glass rounded-xl p-6 cursor-pointer transition" @click="open=!open">
    <div class="flex justify-between items-start mb-2">
      <span class="text-2xl">üõ°Ô∏è</span>
      <span class="text-[10px] font-semibold px-2 py-0.5 rounded-full text-white tier-next">Build Next</span>
    </div>
    <h3 class="font-semibold mb-1">ComplianceOS</h3>
    <p class="text-xs text-gray-400 mb-2">"Every certificate tracked. Every deadline met. Zero audit surprises."</p>
    <p x-show="!open" class="text-[10px] text-gray-500 italic mt-1">Click to expand ‚Üì</p>
    <div x-show="open" x-collapse class="mt-3 space-y-3 text-xs text-gray-400">
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">What It Does</p>
        <ul class="list-disc list-inside space-y-1">
          <li>Certificate vault + expiry tracking across all facilities</li>
          <li>SDS (Safety Data Sheet) generation from formulation data</li>
          <li>Regulatory change alerts (REACH, TSCA, FDA updates)</li>
          <li>Gap analysis during factory onboarding ‚Äî FREE gap analysis onboards supply, remediation management is PAID</li>
        </ul>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">ICP</p>
        <p>Chemical manufacturers needing compliance management. Buyers requiring supplier compliance documentation. Factories being onboarded to Scimplify network.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Value Created</p>
        <p>Zero missed certificate renewals (each missed cert = potential $50K+ shipment hold). Audit prep time reduced 80%. SDS generation in minutes vs hours. High supply-side stickiness.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Value Captured</p>
        <p>$300-800/mo per facility (cert management + alerts). $1,500-2,000/mo full suite (SDS + regulatory tracking). Gap analysis reports: $2-5K one-time during onboarding.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Industry Analogies</p>
        <p class="italic">"Resilinc's compliance tracking + Sphera's SDS/Product Stewardship + Cognilix Cortex's vendor management ‚Äî but purpose-built for Indian specialty chemical manufacturers, not Fortune 500s."</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">What We Take</p>
        <p><span class="text-white">From Resilinc:</span> Compliance tracking, gap analysis. <span class="text-white">From Sphera:</span> SDS automation, product stewardship. <span class="text-white">From Cognilix Cortex:</span> Self-serve supplier onboarding, performance analytics. <span class="text-white">What we skip:</span> Enterprise EHS, process safety, global news monitoring ‚Äî stay chemistry-specific, stay mid-market.</p>
      </div>
      </div>
<button @click.stop="mode='products';activeProduct='compliance'" class="mt-3 w-full px-4 py-2.5 bg-gradient-to-r from-indigo to-teal hover:opacity-90 text-white rounded-lg text-sm font-semibold transition shadow-lg shadow-indigo/20">‚ñ∂ Try Interactive Demo</button>
  </div>

  <!-- Product 5: ATOMS Commerce -->
  <div x-data="{open:false}" class="glass rounded-xl p-6 cursor-pointer transition" @click="open=!open">
    <div class="flex justify-between items-start mb-2">
      <span class="text-2xl">üõí</span>
      <span class="text-[10px] font-semibold px-2 py-0.5 rounded-full text-white tier-traction">Build on Traction</span>
    </div>
    <h3 class="font-semibold mb-1">ATOMS Commerce</h3>
    <p class="text-xs text-gray-400 mb-2">"Buy specialty chemicals like you buy everything else ‚Äî online."</p>
    <p x-show="!open" class="text-[10px] text-gray-500 italic mt-1">Click to expand ‚Üì</p>
    <div x-show="open" x-collapse class="mt-3 space-y-3 text-xs text-gray-400">
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">What It Does</p>
        <ul class="list-disc list-inside space-y-1">
          <li>E-commerce layer on ATOMS for catalog/near-commodity chemicals</li>
          <li>Real pricing displayed (actual ‚Çπ/kg, not "request a quote")</li>
          <li>Filters: CAS number, purity, certs, pack size, delivery location</li>
          <li>Instant quoting for standard products (zero humans involved)</li>
          <li>Order placement + payment (Razorpay India, Stripe international)</li>
          <li><span class="text-white font-medium">One-click bulk reordering</span> ‚Äî existing customers reorder their regular chemicals without email/calls</li>
          <li>"Similar products" / "Also bought" recommendations from ChemGraph</li>
        </ul>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">The Wedge: Bulk Reordering</p>
        <p>ATOMS today is purely discovery + RFQ. No transaction capability. The fastest path to commerce isn't new buyer acquisition ‚Äî it's <span class="text-white">converting existing repeat orders into self-serve reorders.</span> Customers already buying monthly don't need a sales call every time. One-click reorder frees the sales team for high-value custom projects.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">ICP</p>
        <p>Small-to-mid buyers (cosmetics brands, small pharma, food companies) buying 1-20 tons of catalog chemicals. <span class="text-white">Especially existing customers with recurring orders.</span></p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Value Created</p>
        <p>Pricing transparency and instant procurement (vs 3-5 day email-based quoting). Manufacturer gets new sales channel with zero listing fees. Order cycle compressed from days to minutes.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Value Captured</p>
        <p>Take-rate: 2-5% on GMV. No manufacturer subscription fees ‚Äî they pay only when they sell. Aligns incentives perfectly.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Key Caveat</p>
        <p>Revenue potential depends heavily on what % of current orders are catalog/repeat vs custom. If most volume is custom chemistry, ATOMS Commerce addresses a smaller slice. <span class="text-white">Needs validation: what share of the 5,000+ customer base has recurring standard orders?</span></p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Industry Analogy</p>
        <p class="italic">"Cognilix's Cognimart (Moglix's B2B eCommerce SaaS) + Knowde's catalog ‚Äî but vertical. Cognilix can tell you who sells sulfuric acid. ATOMS can tell you who has a glass-lined reactor with CGMP and Grignard experience at -20¬∞C."</p>
      </div>
      </div>
<button @click.stop="mode='products';activeProduct='atomscommerce'" class="mt-3 w-full px-4 py-2.5 bg-gradient-to-r from-indigo to-teal hover:opacity-90 text-white rounded-lg text-sm font-semibold transition shadow-lg shadow-indigo/20">‚ñ∂ Try Interactive Demo</button>
  </div>

  <!-- Product 6: GreenScore -->
  <div x-data="{open:false}" class="glass rounded-xl p-6 cursor-pointer transition" @click="open=!open">
    <div class="flex justify-between items-start mb-2">
      <span class="text-2xl">üå±</span>
      <span class="text-[10px] font-semibold px-2 py-0.5 rounded-full text-white tier-traction">Build on Traction</span>
    </div>
    <h3 class="font-semibold mb-1">GreenScore</h3>
    <p class="text-xs text-gray-400 mb-2">"Carbon footprint per molecule. The EU demands it, we deliver it."</p>
    <p x-show="!open" class="text-[10px] text-gray-500 italic mt-1">Click to expand ‚Üì</p>
    <div x-show="open" x-collapse class="mt-3 space-y-3 text-xs text-gray-400">
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">What It Does</p>
        <ul class="list-disc list-inside space-y-1">
          <li>Carbon footprint calculation per product per route</li>
          <li>Comparative analysis: "Route A: 45 kg CO‚ÇÇe/kg. Route B: 28 kg CO‚ÇÇe/kg."</li>
          <li>Exportable carbon certificate per order</li>
          <li>CBAM-compatible data format for EU imports</li>
          <li>Route comparison shows not just cost savings but environmental impact</li>
        </ul>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">ICP</p>
        <p>EU importers facing CBAM compliance (mandatory from 2026+). ESG-conscious buyers. Companies with sustainability reporting requirements.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Value Created</p>
        <p>CBAM compliance documentation automated (otherwise $10-50K in consultant fees per product). Carbon optimization as competitive differentiator. EU market access preserved.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Value Captured</p>
        <p>Bundled free with China+1 Switch projects (part of CBAM value prop). Standalone subscription: $200-500/mo after CBAM enforcement (2027+). Lightest build ‚Äî highest regulatory tailwind.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Industry Analogy</p>
        <p class="italic">"Sphera's LCA Automation for Chemical Manufacturing ‚Äî simplified. Sphera sells full enterprise LCA at $100K+/yr to BASF. GreenScore embeds product-level carbon scoring directly into ATOMS listings for mid-market buyers. Same science, radically different delivery."</p>
      </div>
      </div>
<button @click.stop="mode='products';activeProduct='green'" class="mt-3 w-full px-4 py-2.5 bg-gradient-to-r from-indigo to-teal hover:opacity-90 text-white rounded-lg text-sm font-semibold transition shadow-lg shadow-indigo/20">‚ñ∂ Try Interactive Demo</button>
  </div>

  <!-- Product 1: RFQ Intelligence (Build on Traction) -->
  <div x-data="{open:false}" class="glass rounded-xl p-6 cursor-pointer transition" @click="open=!open">
    <div class="flex justify-between items-start mb-2">
      <span class="text-2xl">üéØ</span>
      <span class="text-[10px] font-semibold px-2 py-0.5 rounded-full text-white tier-traction">Build on Traction</span>
    </div>
    <h3 class="font-semibold mb-1">RFQ Intelligence + China+1 Assessment</h3>
    <p class="text-xs text-gray-400 mb-2">"From RFQ to qualified manufacturer in 48 hours, not 4 weeks"</p>
    <p x-show="!open" class="text-[10px] text-gray-500 italic mt-1">Click to expand ‚Üì</p>
    <div x-show="open" x-collapse class="mt-3 space-y-3 text-xs text-gray-400">
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">What It Does</p>
        <ul class="list-disc list-inside space-y-1">
          <li>Customer submits RFQ or "switch from China" request</li>
          <li>Auto-matches against 3C framework (Chemistry fit, Capacity match, Compliance alignment) using ATOMS data from 465+ manufacturers</li>
          <li>Generates feasibility report: matched manufacturers, estimated cost, timeline, risk flags</li>
          <li>For China+1: adds comparison vs current China source (cost, lead time, CBAM impact, tariff savings)</li>
          <li>Routes qualified leads into IONS for project execution</li>
        </ul>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">ICP</p>
        <p>Global procurement managers sourcing from India. EU buyers facing CBAM. Companies doing China+1 diversification.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Value Created</p>
        <p>Time-to-qualified-source drops from 4-6 weeks to 48 hours. Data-driven manufacturer matching vs relationship-based guesswork. CBAM impact quantified before commitment.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Value Captured</p>
        <p>Primarily an internal ops accelerator ‚Äî makes Scimplify's sales team faster. China+1 Assessment Reports: $2-5K standalone (productized consulting). Subscription model viable only at 2,000+ manufacturers with real-time data. Near-term value: feeds $50-100K China+1 service projects.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Why Build on Traction</p>
        <p>ATOMS already handles RFQ intake manually. This automates it ‚Äî high internal value but limited external willingness-to-pay until network density justifies a subscription model. Build after ATOMS Commerce proves transaction volume.</p>
      </div>
      <div>
        <p class="text-indigo-400 font-semibold text-sm mb-1">Industry Analogy</p>
        <p class="italic">"Like Resilinc's supply chain intelligence meets Alibaba's supplier matching ‚Äî but for specialty chemicals with chemistry-level matching, not just keyword search"</p>
      </div>
      </div>
<button @click.stop="mode='products';activeProduct=1" class="mt-3 w-full px-4 py-2.5 bg-gradient-to-r from-indigo to-teal hover:opacity-90 text-white rounded-lg text-sm font-semibold transition shadow-lg shadow-indigo/20">‚ñ∂ Try Interactive Demo</button>
  </div>

</div>
</section>

<!-- Interactive Revenue & Roadmap -->
<section class="max-w-6xl mx-auto px-4 pb-16" x-data="revenueModel()" x-init="recalc()">
<h2 class="text-2xl font-bold mb-2 text-center">Interactive Revenue & Roadmap</h2>
<p class="text-xs text-gray-500 text-center mb-6">Adjust assumptions per product. Drag timeline. Watch revenue update in real-time.</p>

<!-- Product Assumptions Table -->
<div class="glass rounded-xl p-5 mb-6 overflow-x-auto">
  <div class="min-w-[700px]">
    <div class="grid grid-cols-12 gap-2 text-[10px] text-gray-500 font-medium mb-3 px-1">
      <div class="col-span-2">Product</div>
      <div class="col-span-2 text-center">Start Month</div>
      <div class="col-span-2 text-center">Build Duration</div>
      <div class="col-span-2 text-center">Key Assumption</div>
      <div class="col-span-2 text-center">Monthly Rev (M12)</div>
      <div class="col-span-2 text-center">Monthly Rev (M24)</div>
    </div>
    <template x-for="p in products" :key="p.id">
      <div class="grid grid-cols-12 gap-2 items-center mb-3 glass rounded-lg p-2" :class="p.enabled?'':'opacity-40'">
        <!-- Name + Toggle -->
        <div class="col-span-2 flex items-center gap-2">
          <input type="checkbox" x-model="p.enabled" @change="recalc()" class="accent-indigo w-3.5 h-3.5 shrink-0">
          <div>
            <div class="text-xs font-medium" x-text="p.icon+' '+p.shortName"></div>
            <div class="text-[9px] text-gray-500" x-text="p.tier"></div>
          </div>
        </div>
        <!-- Start Month -->
        <div class="col-span-2 text-center">
          <div class="flex items-center justify-center gap-1">
            <button @click="p.startMonth=Math.max(1,p.startMonth-1);recalc()" class="w-5 h-5 rounded bg-white/5 hover:bg-white/10 text-gray-400 text-xs transition">‚àí</button>
            <span class="text-sm font-medium w-8 text-center" x-text="'M'+p.startMonth"></span>
            <button @click="p.startMonth=Math.min(18,p.startMonth+1);recalc()" class="w-5 h-5 rounded bg-white/5 hover:bg-white/10 text-gray-400 text-xs transition">+</button>
          </div>
        </div>
        <!-- Duration -->
        <div class="col-span-2 text-center">
          <div class="flex items-center justify-center gap-1">
            <button @click="p.duration=Math.max(2,p.duration-1);recalc()" class="w-5 h-5 rounded bg-white/5 hover:bg-white/10 text-gray-400 text-xs transition">‚àí</button>
            <span class="text-sm font-medium w-10 text-center" x-text="p.duration+' mo'"></span>
            <button @click="p.duration=Math.min(12,p.duration+1);recalc()" class="w-5 h-5 rounded bg-white/5 hover:bg-white/10 text-gray-400 text-xs transition">+</button>
          </div>
        </div>
        <!-- Key Assumption (slider) -->
        <div class="col-span-2 px-1">
          <input type="range" :min="p.assumptionMin" :max="p.assumptionMax" :step="p.assumptionStep" x-model.number="p.assumption" @input="recalc()" class="w-full h-1 accent-indigo">
          <div class="text-[10px] text-gray-400 text-center mt-0.5" x-text="p.assumptionLabel+': '+p.assumption+p.assumptionUnit"></div>
        </div>
        <!-- M12 Revenue -->
        <div class="col-span-2 text-center">
          <div class="text-sm font-semibold" :class="p.rev12>0?'text-indigo':'text-gray-600'" x-text="p.rev12>0?'‚Çπ'+formatLakhs(p.rev12):'‚Äî'"></div>
        </div>
        <!-- M24 Revenue -->
        <div class="col-span-2 text-center">
          <div class="text-sm font-semibold" :class="p.rev24>0?'text-teal':'text-gray-600'" x-text="p.rev24>0?'‚Çπ'+formatLakhs(p.rev24):'‚Äî'"></div>
        </div>
      </div>
    </template>
  </div>
</div>

<!-- Interactive Gantt -->
<div class="glass rounded-xl p-5 mb-6">
  <h3 class="text-sm font-semibold mb-4">Timeline <span class="text-[10px] text-gray-500 font-normal ml-2">Use +/- buttons above to adjust start & duration</span></h3>
  <div class="overflow-x-auto">
    <div class="min-w-[600px]">
      <div class="flex text-[10px] text-gray-500 mb-3">
        <div class="w-32 shrink-0"></div>
        <div class="flex-1 grid grid-cols-6 text-center">
          <span>M1-3</span><span>M4-6</span><span>M7-9</span><span>M10-12</span><span>M13-15</span><span>M16-18</span>
        </div>
      </div>
      <template x-for="p in products.filter(p=>p.enabled)" :key="p.id">
        <div class="flex items-center mb-2">
          <div class="w-32 shrink-0 text-[11px] font-medium truncate" x-text="p.icon+' '+p.shortName"></div>
          <div class="flex-1 relative h-7">
            <!-- Background grid -->
            <div class="absolute inset-0 grid grid-cols-6">
              <template x-for="i in 6"><div class="border-r border-white/5"></div></template>
            </div>
            <!-- Bar -->
            <div class="gantt-bar absolute top-1 flex items-center px-2" :class="p.color" :style="'left:'+((p.startMonth-1)/18*100)+'%;width:'+(p.duration/18*100)+'%'">
              <span class="text-[9px] text-white/80 truncate" x-text="'M'+p.startMonth+'-M'+(p.startMonth+p.duration-1)"></span>
            </div>
            <!-- Revenue start marker -->
            <div x-show="p.enabled && (p.startMonth+p.duration-1)<=18" class="absolute top-0 w-0.5 h-7 bg-teal/50" :style="'left:'+((p.startMonth+p.duration-1)/18*100)+'%'"></div>
          </div>
        </div>
      </template>
      <!-- Legend -->
      <div class="flex gap-4 mt-3 text-[10px] text-gray-500">
        <span class="flex items-center gap-1"><span class="w-3 h-3 rounded tier-must inline-block"></span> Must Build</span>
        <span class="flex items-center gap-1"><span class="w-3 h-3 rounded tier-next inline-block"></span> Build Next</span>
        <span class="flex items-center gap-1"><span class="w-3 h-3 rounded tier-traction inline-block"></span> Build on Traction</span>
        <span class="flex items-center gap-1"><span class="w-1 h-3 bg-teal/50 inline-block"></span> Revenue starts</span>
      </div>
    </div>
  </div>
</div>

<!-- Revenue Summary Cards -->
<div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
  <div class="glass rounded-xl p-4 text-center">
    <div class="text-xs text-gray-400 mb-1">Month 6 ARR</div>
    <div class="text-xl font-bold text-indigo" x-text="'‚Çπ'+formatLakhs(totalRev6*12)"></div>
    <div class="text-[10px] text-gray-500" x-text="'‚Çπ'+formatLakhs(totalRev6)+'/mo'"></div>
  </div>
  <div class="glass rounded-xl p-4 text-center">
    <div class="text-xs text-gray-400 mb-1">Month 12 ARR</div>
    <div class="text-xl font-bold text-indigo" x-text="'‚Çπ'+formatLakhs(totalRev12*12)"></div>
    <div class="text-[10px] text-gray-500" x-text="'‚Çπ'+formatLakhs(totalRev12)+'/mo'"></div>
  </div>
  <div class="glass rounded-xl p-4 text-center">
    <div class="text-xs text-gray-400 mb-1">Month 24 ARR</div>
    <div class="text-2xl font-bold bg-gradient-to-r from-indigo to-teal bg-clip-text text-transparent" x-text="'‚Çπ'+formatLakhs(totalRev24*12)"></div>
    <div class="text-[10px] text-gray-500" x-text="'‚Çπ'+formatLakhs(totalRev24)+'/mo'"></div>
  </div>
  <div class="glass rounded-xl p-4 text-center">
    <div class="text-xs text-gray-400 mb-1">Total Investment</div>
    <div class="text-xl font-bold bg-gradient-to-r from-indigo to-teal bg-clip-text text-transparent" x-text="'‚Çπ'+formatLakhs(totalInvestment)"></div>
    <div class="text-[10px] text-gray-500" x-text="enabledCount+' products'"></div>
  </div>
</div>

<!-- Per-Product Revenue Breakdown -->
<div class="glass rounded-xl p-5 mb-6">
  <h3 class="text-sm font-semibold mb-3">Revenue Breakdown by Product</h3>
  <div class="space-y-2">
    <template x-for="p in products.filter(p=>p.enabled)" :key="p.id">
      <div class="flex items-center gap-3">
        <div class="w-28 shrink-0 text-[11px] font-medium truncate" x-text="p.icon+' '+p.shortName"></div>
        <div class="flex-1 relative h-5 bg-white/5 rounded-full overflow-hidden">
          <div class="h-full rounded-full transition-all duration-500" :class="p.color" :style="'width:'+Math.min(100,(p.rev24/Math.max(1,maxRev24))*100)+'%'"></div>
        </div>
        <div class="w-20 text-right text-xs font-medium" x-text="p.rev24>0?'‚Çπ'+formatLakhs(p.rev24)+'/mo':'‚Äî'"></div>
      </div>
    </template>
  </div>
</div>

<!-- Revenue Model Explanation -->
<div class="glass rounded-xl p-5">
  <h3 class="text-sm font-semibold mb-3">Assumption Details</h3>
  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-3">
    <template x-for="p in products" :key="p.id">
      <div class="glass rounded-lg p-3 text-[11px]" :class="p.enabled?'':'opacity-30'">
        <div class="font-medium text-xs mb-1" x-text="p.icon+' '+p.shortName"></div>
        <div class="text-gray-400" x-text="p.revenueLogic"></div>
      </div>
    </template>
  </div>
</div>

</section>

<!-- Closing -->
<section class="max-w-4xl mx-auto px-4 pb-20 text-center">
<blockquote class="text-2xl md:text-3xl font-bold italic leading-relaxed">
  "The chemicals make money <span class="text-teal">today</span>.<br>The software makes money <span class="text-indigo">forever</span>."
</blockquote>
</section>

</div><!-- end roadmap -->

<!-- ==================== PRODUCTS MODE ==================== -->
<div x-show="mode==='products'" x-cloak class="flex min-h-[calc(100vh-56px)]">

<!-- Sidebar -->
<aside class="w-56 shrink-0 border-r border-white/8 bg-white/[0.02] hidden md:block">
  <div class="p-3">
    <template x-for="p in products" :key="p.id">
      <button @click="activeProduct=p.id" :class="activeProduct===p.id?'bg-indigo/20 text-indigo border-indigo/30':'text-gray-400 hover:text-white hover:bg-white/5 border-transparent'" class="w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium mb-1 border transition text-left">
        <span x-text="p.icon"></span>
        <span class="truncate" x-text="p.shortName||p.name"></span>
      </button>
    </template>
  </div>
</aside>

<!-- Mobile product selector -->
<div class="md:hidden fixed bottom-0 left-0 right-0 z-40 glass border-t border-white/10 flex overflow-x-auto px-2 py-2 gap-1" style="background:rgba(15,13,46,0.95)">
  <template x-for="p in products" :key="p.id">
    <button @click="activeProduct=p.id" :class="activeProduct===p.id?'bg-indigo text-white':'text-gray-400'" class="shrink-0 px-3 py-1.5 rounded-lg text-xs font-medium transition" x-text="p.icon+' '+p.shortName"></button>
  </template>
</div>

<!-- Main Content Area -->
<main class="flex-1 overflow-y-auto p-4 md:p-6 pb-20 md:pb-6">

<!-- ====== PRODUCT 1: RFQ Intelligence ====== -->
<div x-show="activeProduct===1" x-cloak class="fade-in max-w-4xl" x-data="rfqApp()">
<h2 class="text-xl font-bold mb-4">üîç RFQ Intelligence + China+1</h2>

<!-- Form -->
<div x-show="!showResults && !showReport">
<div class="glass rounded-xl p-6">
  <div class="flex justify-between items-center mb-4">
    <h3 class="font-semibold">Submit RFQ</h3>
    <button @click="fillDemo()" class="px-4 py-1.5 rounded-lg text-xs font-medium bg-teal/20 text-teal border border-teal/30 hover:bg-teal/30 transition">‚ö° Try Demo</button>
  </div>
  <div class="grid md:grid-cols-2 gap-4">
    <div><label class="text-xs text-gray-400 block mb-1">Compound Name</label><input x-model="form.compound" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm focus:border-indigo outline-none" placeholder="e.g. Pymetrozine"></div>
    <div><label class="text-xs text-gray-400 block mb-1">CAS Number</label><input x-model="form.cas" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm focus:border-indigo outline-none" placeholder="e.g. 123456-78-9"></div>
    <div><label class="text-xs text-gray-400 block mb-1">Quantity (kg)</label><input x-model="form.qty" type="number" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm focus:border-indigo outline-none" placeholder="500"></div>
    <div><label class="text-xs text-gray-400 block mb-1">Required Purity %</label><input x-model="form.purity" type="number" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm focus:border-indigo outline-none" placeholder="99"></div>
    <div class="md:col-span-2">
      <label class="text-xs text-gray-400 block mb-1">Compliance Needs</label>
      <div class="flex flex-wrap gap-2">
        <template x-for="c in ['FDA','GMP','CGMP','ISO','REACH','HALAL']">
          <button @click="toggleCert(c)" :class="form.certs.includes(c)?'bg-indigo text-white':'bg-white/5 text-gray-400'" class="px-3 py-1 rounded-lg text-xs font-medium border border-white/10 transition" x-text="c"></button>
        </template>
      </div>
    </div>
    <div><label class="text-xs text-gray-400 block mb-1">Delivery Timeline</label>
      <select x-model="form.timeline" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm focus:border-indigo outline-none">
        <option value="1">1 Month</option><option value="3">3 Months</option><option value="6">6 Months</option>
      </select>
    </div>
    <div class="flex items-end">
      <label class="flex items-center gap-2 cursor-pointer">
        <input type="checkbox" x-model="form.china1" class="accent-indigo w-4 h-4">
        <span class="text-sm">China+1 Switch?</span>
      </label>
    </div>
  </div>
  <div x-show="form.china1" class="grid md:grid-cols-3 gap-4 mt-4 pt-4 border-t border-white/10">
    <div><label class="text-xs text-gray-400 block mb-1">Current China Supplier</label><input x-model="form.chinaSupplier" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm focus:border-indigo outline-none" placeholder="Supplier name"></div>
    <div><label class="text-xs text-gray-400 block mb-1">Current Price/kg ($)</label><input x-model="form.chinaPrice" type="number" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm focus:border-indigo outline-none" placeholder="45"></div>
    <div><label class="text-xs text-gray-400 block mb-1">Current Lead Time (weeks)</label><input x-model="form.chinaLead" type="number" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm focus:border-indigo outline-none" placeholder="8"></div>
  </div>
  <button @click="submitRFQ()" class="mt-6 bg-indigo hover:bg-indigo/80 text-white px-6 py-2 rounded-lg text-sm font-medium transition">Submit RFQ ‚Üí</button>
</div>
</div>

<!-- Matching Animation -->
<div x-show="matching" x-cloak class="flex flex-col items-center justify-center py-20">
  <div class="w-16 h-16 rounded-full bg-indigo/20 matching-anim flex items-center justify-center mb-4"><span class="text-2xl">üîç</span></div>
  <div class="text-lg font-semibold">Matching manufacturers...</div>
  <div class="text-sm text-gray-400 mt-1">Analyzing 465 facilities across 11 industries</div>
  <div class="mt-3 text-xs text-gray-500" x-text="matchingStep"></div>
</div>

<!-- Results -->
<div x-show="showResults && !matching && !showReport" x-cloak class="fade-in space-y-4">
  <div class="flex justify-between items-center">
    <h3 class="font-semibold">Feasibility Report</h3>
    <button @click="showResults=false;matching=false;showReport=false" class="text-xs text-gray-400 hover:text-white">‚Üê New RFQ</button>
  </div>

  <!-- Manufacturer Cards (expandable) -->
  <div class="grid gap-3">
    <template x-for="(m,i) in matchResults" :key="i">
      <div class="glass rounded-xl p-4 cursor-pointer transition" :class="m.expanded?'border border-indigo/30':''" @click="m.expanded=!m.expanded">
        <div class="flex justify-between items-start mb-3">
          <div>
            <div class="font-semibold text-sm flex items-center gap-2">
              <span x-text="m.name"></span>
              <span x-show="i===0" class="text-[9px] px-1.5 py-0.5 rounded-full bg-teal/20 text-teal font-medium">Top Match</span>
            </div>
            <div class="text-xs text-gray-400" x-text="m.location"></div>
          </div>
          <div class="text-right">
            <div class="text-lg font-bold" :class="m.overall>85?'text-teal':m.overall>70?'text-indigo':'text-amber'" x-text="m.overall+'%'"></div>
            <div class="text-[10px] text-gray-500">Overall Match</div>
          </div>
        </div>
        <div class="grid grid-cols-3 gap-3 mb-3">
          <div><div class="text-[10px] text-gray-500 mb-1">Capacity</div><div class="w-full bg-white/5 rounded-full h-1.5"><div class="score-bar bg-indigo rounded-full" :style="'width:'+m.capacity+'%'"></div></div><div class="text-[10px] text-gray-400 mt-0.5" x-text="m.capacity+'%'"></div></div>
          <div><div class="text-[10px] text-gray-500 mb-1">Chemistry</div><div class="w-full bg-white/5 rounded-full h-1.5"><div class="score-bar bg-teal rounded-full" :style="'width:'+m.chemistry+'%'"></div></div><div class="text-[10px] text-gray-400 mt-0.5" x-text="m.chemistry+'%'"></div></div>
          <div><div class="text-[10px] text-gray-500 mb-1">Compliance</div><div class="w-full bg-white/5 rounded-full h-1.5"><div class="score-bar bg-amber rounded-full" :style="'width:'+m.compliance+'%'"></div></div><div class="text-[10px] text-gray-400 mt-0.5" x-text="m.compliance+'%'"></div></div>
        </div>
        <div class="flex flex-wrap gap-1">
          <template x-for="c in m.certs"><span class="text-[10px] px-1.5 py-0.5 rounded" :class="form.certs.includes(c)?'bg-teal/20 text-teal':'bg-white/5 text-gray-400'" x-text="c"></span></template>
        </div>
        <!-- Expanded Detail -->
        <div x-show="m.expanded" x-cloak @click.stop class="mt-4 pt-4 border-t border-white/10 space-y-3 fade-in">
          <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-xs">
            <div class="glass rounded-lg p-2 text-center"><div class="text-gray-500 text-[10px]">Reactor Types</div><div class="font-medium mt-0.5" x-text="m.detail.reactors"></div></div>
            <div class="glass rounded-lg p-2 text-center"><div class="text-gray-500 text-[10px]">Capacity</div><div class="font-medium mt-0.5" x-text="m.detail.capacityMT+' MT/yr'"></div></div>
            <div class="glass rounded-lg p-2 text-center"><div class="text-gray-500 text-[10px]">Key Capabilities</div><div class="font-medium mt-0.5" x-text="m.detail.capabilities"></div></div>
            <div class="glass rounded-lg p-2 text-center"><div class="text-gray-500 text-[10px]">Est. Price</div><div class="font-medium mt-0.5 text-teal" x-text="'$'+m.detail.priceKg+'/kg'"></div></div>
          </div>
          <div class="glass rounded-lg p-3 text-xs">
            <div class="text-[10px] text-gray-500 mb-1">Recent Track Record</div>
            <div class="text-gray-300" x-text="m.detail.trackRecord"></div>
          </div>
          <div class="flex gap-2">
            <button @click.stop="$dispatch('show-toast','Demo ‚Äî would open quote request flow')" class="px-4 py-2 bg-indigo hover:bg-indigo/80 text-white rounded-lg text-xs font-medium transition">üì© Request Quote</button>
            <button @click.stop="$dispatch('show-toast','Demo ‚Äî would open full manufacturer profile')" class="px-4 py-2 bg-white/5 hover:bg-white/10 text-gray-300 rounded-lg text-xs font-medium transition border border-white/10">üìã View Full Profile</button>
          </div>
        </div>
        <div x-show="!m.expanded" class="text-[10px] text-gray-500 mt-2 text-center">Click to expand details ‚Üì</div>
      </div>
    </template>
  </div>

  <!-- Cost & Timeline Summary -->
  <div class="glass rounded-xl p-4">
    <div class="text-sm font-medium mb-2">Estimated Cost & Timeline</div>
    <div class="grid grid-cols-3 gap-4 text-center text-sm">
      <div><div class="text-gray-400 text-xs">Cost Range</div><div class="font-semibold" x-text="'$'+costRange[0]+' ‚Äî $'+costRange[1]+'/kg'"></div></div>
      <div><div class="text-gray-400 text-xs">Delivery</div><div class="font-semibold" x-text="form.timeline+' month(s)'"></div></div>
      <div><div class="text-gray-400 text-xs">Risk Level</div><div class="font-semibold text-teal">Low</div></div>
    </div>
  </div>

  <!-- Timeline Visualization -->
  <div class="glass rounded-xl p-4">
    <div class="text-sm font-medium mb-3">üìÖ Project Timeline</div>
    <div class="relative overflow-x-auto">
      <div class="flex items-center gap-0 min-w-[400px]">
        <template x-for="(step,si) in timelineSteps" :key="si">
          <div class="flex-1 flex flex-col items-center relative">
            <div class="w-8 h-8 rounded-full flex items-center justify-center text-sm z-10" :class="si===0?'bg-indigo/30 text-indigo':si===timelineSteps.length-1?'bg-teal/30 text-teal':'bg-white/10 text-gray-400'" x-text="step.icon"></div>
            <div class="text-[10px] font-medium mt-1 text-center" x-text="step.name"></div>
            <div class="text-[9px] text-gray-500" x-text="step.duration"></div>
            <div class="text-[9px] text-teal" x-text="step.date"></div>
            <div x-show="si<timelineSteps.length-1" class="absolute top-4 left-[calc(50%+16px)] h-0.5 bg-white/10 right-[-50%]"></div>
          </div>
        </template>
      </div>
    </div>
  </div>

  <!-- China+1 comparison with CBAM calculator -->
  <div x-show="form.china1" class="glass rounded-xl p-4">
    <div class="text-sm font-medium mb-3">üá®üá≥ ‚Üí üáÆüá≥ China+1 Comparison</div>
    <table class="w-full text-sm">
      <thead><tr class="text-xs text-gray-500"><th class="text-left pb-2">Factor</th><th class="text-center pb-2">China</th><th class="text-center pb-2">India</th><th class="text-center pb-2">Savings</th></tr></thead>
      <tbody>
        <tr class="border-t border-white/5"><td class="py-2 text-gray-400">Price/kg</td><td class="text-center" x-text="'$'+(form.chinaPrice||45)"></td><td class="text-center text-teal" x-text="'$'+costRange[0]+'-'+costRange[1]"></td><td class="text-center text-teal" x-text="'~'+Math.round(((form.chinaPrice||45)-costRange[0])/(form.chinaPrice||45)*100)+'%'"></td></tr>
        <tr class="border-t border-white/5"><td class="py-2 text-gray-400">Lead Time</td><td class="text-center" x-text="(form.chinaLead||8)+' weeks'"></td><td class="text-center text-teal">4-5 weeks</td><td class="text-center text-teal">~40%</td></tr>
        <tr class="border-t border-white/5"><td class="py-2 text-gray-400">CBAM Impact</td><td class="text-center text-red-400">5.8 kg CO‚ÇÇ/kg</td><td class="text-center text-teal">2.1 kg CO‚ÇÇ/kg</td><td class="text-center text-teal">64% lower</td></tr>
        <tr class="border-t border-white/5"><td class="py-2 text-gray-400">Tariff Risk</td><td class="text-center text-amber">High</td><td class="text-center text-teal">Low</td><td class="text-center text-teal">‚úì</td></tr>
      </tbody>
    </table>
    <!-- CBAM Calculator -->
    <div class="mt-4 pt-4 border-t border-white/10">
      <div class="text-xs font-medium text-gray-400 mb-2">üí∞ CBAM Cost Impact Calculator</div>
      <div class="grid grid-cols-2 gap-3 mb-3">
        <div>
          <label class="text-[10px] text-gray-500 block mb-1">Import Volume (tons/year)</label>
          <input x-model.number="cbamTons" type="number" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-sm outline-none focus:border-indigo" placeholder="100">
        </div>
        <div>
          <label class="text-[10px] text-gray-500 block mb-1">EU Carbon Price (‚Ç¨/ton CO‚ÇÇ)</label>
          <input x-model.number="cbamPrice" type="number" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-sm outline-none focus:border-indigo" placeholder="75">
        </div>
      </div>
      <div x-show="cbamTons>0" class="grid grid-cols-3 gap-3 text-center">
        <div class="glass rounded-lg p-3"><div class="text-[10px] text-gray-500">China CBAM Cost</div><div class="text-lg font-bold text-red-400" x-text="'‚Ç¨'+Math.round(cbamTons*5.8*cbamPrice).toLocaleString()"></div></div>
        <div class="glass rounded-lg p-3"><div class="text-[10px] text-gray-500">India CBAM Cost</div><div class="text-lg font-bold text-teal" x-text="'‚Ç¨'+Math.round(cbamTons*2.1*cbamPrice).toLocaleString()"></div></div>
        <div class="glass rounded-lg p-3 border border-teal/30"><div class="text-[10px] text-gray-500">You Save</div><div class="text-lg font-bold text-teal" x-text="'‚Ç¨'+Math.round(cbamTons*(5.8-2.1)*cbamPrice).toLocaleString()"></div></div>
      </div>
    </div>
  </div>

  <!-- Generate Report Button -->
  <button @click="showReport=true" class="w-full glass rounded-xl p-4 text-center hover:bg-white/5 transition border border-indigo/20 group">
    <div class="text-sm font-medium text-indigo group-hover:text-white transition">üìä Generate Full Assessment Report</div>
    <div class="text-[10px] text-gray-500 mt-1">Executive summary, risk analysis, cost breakdown & recommendations ‚Äî the kind of report that costs $2-5K from a consulting firm</div>
  </button>
</div>

<!-- Assessment Report View -->
<div x-show="showReport && !matching" x-cloak class="fade-in space-y-4">
  <div class="flex justify-between items-center">
    <h3 class="font-semibold">üìä Manufacturer Assessment Report</h3>
    <div class="flex gap-2">
      <button @click="showReport=false" class="text-xs text-gray-400 hover:text-white">‚Üê Back to Results</button>
      <button @click="showResults=false;showReport=false;matching=false" class="text-xs text-gray-400 hover:text-white">‚Üê New RFQ</button>
    </div>
  </div>

  <!-- Report Header -->
  <div class="glass rounded-xl p-6 border-l-4 border-indigo">
    <div class="flex justify-between items-start">
      <div>
        <div class="text-[10px] text-indigo font-medium uppercase tracking-wider">Confidential Assessment</div>
        <h2 class="text-lg font-bold mt-1" x-text="'Manufacturer Assessment: '+(form.compound||'Compound')"></h2>
        <div class="text-xs text-gray-400 mt-1" x-text="'CAS '+form.cas+' ‚Ä¢ '+form.qty+'kg ‚Ä¢ '+form.purity+'% purity'"></div>
      </div>
      <div class="text-right">
        <div class="text-xs text-gray-500">Report #SCM-<span x-text="reportId"></span></div>
        <div class="text-xs text-gray-500" x-text="new Date().toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'})"></div>
        <div class="text-[10px] text-gray-600 mt-1">Prepared by Scimplify Intelligence</div>
      </div>
    </div>
  </div>

  <!-- Executive Summary -->
  <div class="glass rounded-xl p-5">
    <h3 class="text-sm font-semibold text-indigo mb-3">1. Executive Summary</h3>
    <p class="text-xs text-gray-300 leading-relaxed" x-text="'Based on analysis of 465 verified manufacturers across our network, we identified '+matchResults.length+' qualified facilities for '+(form.compound||'this compound')+' production at '+form.qty+'kg scale with '+form.purity+'% purity requirements. '+(form.china1?'The China+1 transition analysis indicates a potential cost saving of '+Math.round(((form.chinaPrice||45)-costRange[0])/(form.chinaPrice||45)*100)+'% with significantly reduced CBAM exposure and supply chain risk.':'All recommended manufacturers meet the specified compliance requirements.')"></p>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-4">
      <div class="glass rounded-lg p-3 text-center"><div class="text-lg font-bold text-indigo" x-text="matchResults.length"></div><div class="text-[10px] text-gray-500">Qualified Mfrs</div></div>
      <div class="glass rounded-lg p-3 text-center"><div class="text-lg font-bold text-teal" x-text="matchResults[0]?.overall+'%'"></div><div class="text-[10px] text-gray-500">Best Match</div></div>
      <div class="glass rounded-lg p-3 text-center"><div class="text-lg font-bold text-white" x-text="'$'+costRange[0]+'-'+costRange[1]"></div><div class="text-[10px] text-gray-500">Cost/kg Range</div></div>
      <div class="glass rounded-lg p-3 text-center"><div class="text-lg font-bold text-teal">Low</div><div class="text-[10px] text-gray-500">Risk Rating</div></div>
    </div>
  </div>

  <!-- Manufacturer Shortlist -->
  <div class="glass rounded-xl p-5">
    <h3 class="text-sm font-semibold text-indigo mb-3">2. Manufacturer Shortlist (Ranked)</h3>
    <div class="space-y-3">
      <template x-for="(m,i) in matchResults.slice(0,3)" :key="i">
        <div class="glass rounded-lg p-4">
          <div class="flex justify-between items-start mb-2">
            <div>
              <span class="text-xs text-indigo font-medium" x-text="'#'+(i+1)+' '"></span>
              <span class="font-semibold text-sm" x-text="m.name"></span>
              <span class="text-xs text-gray-500 ml-2" x-text="m.location"></span>
            </div>
            <span class="text-sm font-bold" :class="m.overall>85?'text-teal':'text-indigo'" x-text="m.overall+'% match'"></span>
          </div>
          <div class="grid grid-cols-3 gap-4 text-xs mb-2">
            <div><span class="text-gray-500">Capacity:</span> <span x-text="m.detail.capacityMT+' MT/yr'"></span></div>
            <div><span class="text-gray-500">Est. Price:</span> <span class="text-teal" x-text="'$'+m.detail.priceKg+'/kg'"></span></div>
            <div><span class="text-gray-500">Reactors:</span> <span x-text="m.detail.reactors"></span></div>
          </div>
          <div class="text-[11px] text-gray-400" x-text="m.detail.trackRecord"></div>
        </div>
      </template>
    </div>
  </div>

  <!-- Risk Assessment -->
  <div class="glass rounded-xl p-5">
    <h3 class="text-sm font-semibold text-indigo mb-3">3. Risk Assessment</h3>
    <div class="space-y-2">
      <div class="flex items-center justify-between py-2 border-b border-white/5 text-xs">
        <span class="text-gray-400">Supply Concentration Risk</span>
        <span class="px-2 py-0.5 rounded bg-teal/20 text-teal">Low ‚Äî 3+ qualified alternatives</span>
      </div>
      <div class="flex items-center justify-between py-2 border-b border-white/5 text-xs">
        <span class="text-gray-400">Quality Risk</span>
        <span class="px-2 py-0.5 rounded bg-teal/20 text-teal">Low ‚Äî All facilities audited</span>
      </div>
      <div class="flex items-center justify-between py-2 border-b border-white/5 text-xs">
        <span class="text-gray-400">Compliance Risk</span>
        <span class="px-2 py-0.5 rounded" :class="form.certs.length>3?'bg-amber/20 text-amber':'bg-teal/20 text-teal'" x-text="form.certs.length>3?'Medium ‚Äî Some gaps in cert coverage':'Low ‚Äî Certs aligned'"></span>
      </div>
      <div class="flex items-center justify-between py-2 border-b border-white/5 text-xs">
        <span class="text-gray-400">Geopolitical Risk</span>
        <span class="px-2 py-0.5 rounded bg-teal/20 text-teal" x-text="form.china1?'Reduced ‚Äî India diversification':'Low ‚Äî India-based supply'"></span>
      </div>
      <div class="flex items-center justify-between py-2 text-xs">
        <span class="text-gray-400">Regulatory/CBAM Risk</span>
        <span class="px-2 py-0.5 rounded bg-teal/20 text-teal">Low ‚Äî 64% lower CO‚ÇÇ vs China</span>
      </div>
    </div>
  </div>

  <!-- Cost Analysis -->
  <div class="glass rounded-xl p-5">
    <h3 class="text-sm font-semibold text-indigo mb-3">4. Cost Analysis</h3>
    <div class="grid md:grid-cols-2 gap-4 text-xs">
      <div>
        <div class="text-gray-400 mb-2">Unit Economics</div>
        <div class="space-y-1">
          <div class="flex justify-between py-1 border-b border-white/5"><span>Raw material cost</span><span x-text="'$'+(costRange[0]*0.55).toFixed(0)+'-'+(costRange[1]*0.55).toFixed(0)+'/kg'"></span></div>
          <div class="flex justify-between py-1 border-b border-white/5"><span>Processing & labor</span><span x-text="'$'+(costRange[0]*0.25).toFixed(0)+'-'+(costRange[1]*0.25).toFixed(0)+'/kg'"></span></div>
          <div class="flex justify-between py-1 border-b border-white/5"><span>QC & compliance</span><span x-text="'$'+(costRange[0]*0.10).toFixed(0)+'-'+(costRange[1]*0.10).toFixed(0)+'/kg'"></span></div>
          <div class="flex justify-between py-1 border-b border-white/5"><span>Logistics (CIF)</span><span x-text="'$'+(costRange[0]*0.10).toFixed(0)+'-'+(costRange[1]*0.10).toFixed(0)+'/kg'"></span></div>
          <div class="flex justify-between py-1 font-medium"><span>Total landed cost</span><span class="text-teal" x-text="'$'+costRange[0]+'-'+costRange[1]+'/kg'"></span></div>
        </div>
      </div>
      <div x-show="form.china1">
        <div class="text-gray-400 mb-2">China+1 Savings (Annual, <span x-text="form.qty+'kg'"></span>)</div>
        <div class="space-y-1">
          <div class="flex justify-between py-1 border-b border-white/5"><span>Price differential</span><span class="text-teal" x-text="'$'+Math.round(((form.chinaPrice||45)-costRange[0])*(form.qty||500)).toLocaleString()"></span></div>
          <div class="flex justify-between py-1 border-b border-white/5"><span>CBAM avoidance</span><span class="text-teal" x-text="'‚Ç¨'+Math.round((form.qty||500)/1000*(5.8-2.1)*75).toLocaleString()"></span></div>
          <div class="flex justify-between py-1 border-b border-white/5"><span>Tariff risk reduction</span><span class="text-teal">Significant</span></div>
          <div class="flex justify-between py-1 font-medium"><span>Total annual savings</span><span class="text-teal" x-text="'~$'+Math.round(((form.chinaPrice||45)-costRange[0])*(form.qty||500)*1.15).toLocaleString()"></span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Recommended Next Steps -->
  <div class="glass rounded-xl p-5">
    <h3 class="text-sm font-semibold text-indigo mb-3">5. Recommended Next Steps</h3>
    <div class="space-y-3">
      <div class="flex gap-3 items-start text-xs">
        <div class="w-6 h-6 shrink-0 rounded-full bg-indigo/20 flex items-center justify-center text-[10px] font-bold text-indigo">1</div>
        <div><span class="font-medium text-white">Qualification Samples (Week 1-3):</span> <span class="text-gray-400">Request 1-5kg qualification samples from top 2 manufacturers for purity & impurity profile testing.</span></div>
      </div>
      <div class="flex gap-3 items-start text-xs">
        <div class="w-6 h-6 shrink-0 rounded-full bg-indigo/20 flex items-center justify-center text-[10px] font-bold text-indigo">2</div>
        <div><span class="font-medium text-white">Pilot Batch (Week 4-8):</span> <span class="text-gray-400">Run 50-100kg pilot batch with selected manufacturer. Validate process reproducibility and scale-up feasibility.</span></div>
      </div>
      <div class="flex gap-3 items-start text-xs">
        <div class="w-6 h-6 shrink-0 rounded-full bg-indigo/20 flex items-center justify-center text-[10px] font-bold text-indigo">3</div>
        <div><span class="font-medium text-white">Scale-Up & Validation (Week 8-14):</span> <span class="text-gray-400" x-text="'Full-scale '+form.qty+'kg production run. Quality validation against specifications. Stability studies if required.'"></span></div>
      </div>
      <div class="flex gap-3 items-start text-xs">
        <div class="w-6 h-6 shrink-0 rounded-full bg-teal/20 flex items-center justify-center text-[10px] font-bold text-teal">4</div>
        <div><span class="font-medium text-white">Production & Supply Agreement:</span> <span class="text-gray-400">Negotiate long-term supply terms. Establish quality agreement and delivery schedule.</span></div>
      </div>
    </div>
  </div>

  <div class="text-center text-[10px] text-gray-600 py-2">
    This report was generated by Scimplify RFQ Intelligence. For questions, contact your Scimplify account manager.<br>
    ¬© <span x-text="new Date().getFullYear()"></span> Scimplify ‚Ä¢ Confidential
  </div>
</div>
</div>

<!-- ====== PRODUCT 2: IONS Project Hub ====== -->
<div x-show="activeProduct===2" x-cloak class="fade-in max-w-4xl" x-data="ionsApp()">
<h2 class="text-xl font-bold mb-4">üìã IONS Project Hub</h2>

<!-- ‚îÄ‚îÄ Projects List View ‚îÄ‚îÄ -->
<div x-show="!selectedProject && !showNewProject && !showCreateForm">

  <!-- Analytics Dashboard -->
  <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4">
    <div class="glass rounded-xl p-4 text-center"><div class="text-2xl font-bold text-indigo" x-text="ionsProjects.length"></div><div class="text-[10px] text-gray-400">Active Projects</div></div>
    <div class="glass rounded-xl p-4 text-center"><div class="text-2xl font-bold text-teal" x-text="avgCompletion+'%'"></div><div class="text-[10px] text-gray-400">Avg Completion</div></div>
    <div class="glass rounded-xl p-4 text-center"><div class="text-2xl font-bold text-amber" x-text="pendingSamples"></div><div class="text-[10px] text-gray-400">Samples Pending</div></div>
    <div class="glass rounded-xl p-4 text-center"><div class="text-lg font-bold"><span class="text-teal" x-text="onTrack"></span><span class="text-gray-500">/</span><span class="text-red-400" x-text="delayed"></span></div><div class="text-[10px] text-gray-400">On-Track / Delayed</div></div>
  </div>

  <!-- Scientist Workload -->
  <div class="glass rounded-xl p-3 mb-4 flex flex-wrap gap-4 items-center">
    <div class="text-[10px] text-gray-500 font-medium uppercase tracking-wider">Scientist Workload</div>
    <template x-for="sc in scientists" :key="sc.name">
      <div class="flex items-center gap-2 text-xs">
        <div class="w-6 h-6 rounded-full bg-indigo/20 text-indigo flex items-center justify-center text-[10px] font-bold" x-text="sc.name.split(' ')[0].charAt(0)+sc.name.split(' ')[1].charAt(0)"></div>
        <span x-text="sc.name"></span>
        <span class="text-gray-500" x-text="sc.count+' projects'"></span>
        <div class="w-16 bg-white/5 rounded-full h-1.5"><div class="h-1.5 rounded-full bg-indigo" :style="'width:'+Math.min(sc.count*10,100)+'%'"></div></div>
      </div>
    </template>
  </div>

  <div class="flex justify-between items-center mb-4">
    <span class="text-sm text-gray-400"><span x-text="ionsProjects.length"></span> Active Projects</span>
    <button @click="showNewProject=true" class="bg-indigo hover:bg-indigo/80 text-white px-4 py-1.5 rounded-lg text-xs font-medium transition">+ New Project</button>
  </div>
  <div class="grid md:grid-cols-2 gap-4">
    <template x-for="p in ionsProjects" :key="p.id">
      <div @click="selectedProject=p;detailTab='milestones'" class="glass rounded-xl p-5 cursor-pointer glass-hover transition">
        <div class="flex justify-between items-start mb-3">
          <h3 class="font-semibold text-sm" x-text="p.name"></h3>
          <span class="text-[10px] px-2 py-0.5 rounded-full font-medium" :class="p.complete===100?'bg-teal/20 text-teal':'bg-indigo/20 text-indigo'" x-text="p.stage"></span>
        </div>
        <div class="w-full bg-white/5 rounded-full h-2 mb-2"><div class="h-2 rounded-full transition-all" :class="p.complete===100?'bg-teal':'bg-indigo'" :style="'width:'+p.complete+'%'"></div></div>
        <div class="flex justify-between text-xs text-gray-400">
          <span x-text="p.complete+'% complete'"></span>
          <span x-text="p.scientist"></span>
        </div>
      </div>
    </template>
  </div>
</div>

<!-- ‚îÄ‚îÄ New Project: Template Selector ‚îÄ‚îÄ -->
<div x-show="showNewProject" x-cloak class="fade-in">
  <button @click="showNewProject=false" class="text-xs text-gray-400 hover:text-white mb-4">‚Üê Back</button>
  <h3 class="font-semibold mb-4">Select Project Template</h3>
  <div class="grid md:grid-cols-3 gap-4">
    <template x-for="t in templates" :key="t.name">
      <div @click="selectTemplate(t)" class="glass rounded-xl p-5 cursor-pointer glass-hover transition text-center">
        <div class="text-2xl mb-2" x-text="t.icon"></div>
        <div class="text-sm font-medium" x-text="t.name"></div>
        <div class="text-[10px] text-gray-500 mt-1" x-text="t.desc"></div>
      </div>
    </template>
  </div>
</div>

<!-- ‚îÄ‚îÄ New Project: Creation Form ‚îÄ‚îÄ -->
<div x-show="showCreateForm" x-cloak class="fade-in">
  <button @click="showCreateForm=false;showNewProject=true" class="text-xs text-gray-400 hover:text-white mb-4">‚Üê Back to Templates</button>
  <div class="glass rounded-xl p-6">
    <h3 class="font-semibold text-sm mb-1">New Project: <span x-text="newProject.template" class="text-indigo"></span></h3>
    <div class="text-[10px] text-gray-500 mb-4" x-text="newProject.templateIcon+' '+newProject.templateDesc"></div>
    <div class="grid md:grid-cols-2 gap-4">
      <div><label class="text-xs text-gray-400 block mb-1">Molecule Name</label><input x-model="newProject.molecule" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo" placeholder="e.g. Ibuprofen"></div>
      <div><label class="text-xs text-gray-400 block mb-1">Target Purity (%)</label><input x-model="newProject.purity" type="number" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo" placeholder="99.5"></div>
      <div><label class="text-xs text-gray-400 block mb-1">Volume (MT)</label><input x-model="newProject.volume" type="number" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo" placeholder="50"></div>
      <div><label class="text-xs text-gray-400 block mb-1">Timeline (months)</label><input x-model="newProject.timeline" type="number" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo" placeholder="6"></div>
    </div>
    <button @click="createProject()" class="mt-4 bg-indigo hover:bg-indigo/80 text-white px-6 py-2 rounded-lg text-sm font-medium transition" :disabled="!newProject.molecule" :class="!newProject.molecule?'opacity-40':''">Create Project ‚Üí</button>
  </div>
</div>

<!-- ‚îÄ‚îÄ Project Detail ‚îÄ‚îÄ -->
<div x-show="selectedProject" x-cloak class="fade-in">
  <button @click="selectedProject=null" class="text-xs text-gray-400 hover:text-white mb-4">‚Üê Back to Projects</button>
  <template x-if="selectedProject">
  <div>
    <div class="flex justify-between items-start mb-1">
      <h3 class="font-semibold" x-text="selectedProject.name"></h3>
      <span class="text-[10px] text-gray-500" x-text="'Lead: '+selectedProject.scientist"></span>
    </div>
    <div class="text-xs text-gray-400 mb-4" x-text="selectedProject.stage+' ‚Äî '+selectedProject.complete+'%'"></div>

    <!-- Detail Tabs -->
    <div class="flex gap-1 bg-white/5 rounded-lg p-0.5 mb-4 w-fit flex-wrap">
      <template x-for="tab in ['milestones','samples','activity','documents','iterations']" :key="tab">
        <button @click="detailTab=tab" :class="detailTab===tab?'bg-indigo text-white':'text-gray-400'" class="px-3 py-1 rounded-md text-xs font-medium transition capitalize" x-text="tab"></button>
      </template>
    </div>

    <!-- Milestones Tab -->
    <div x-show="detailTab==='milestones'" class="glass rounded-xl p-5 mb-4 overflow-x-auto">
      <div class="text-xs font-medium text-gray-400 mb-3">Milestones</div>
      <div class="flex gap-0 min-w-[500px]">
        <template x-for="(ms,i) in selectedProject.milestones" :key="i">
          <div class="flex-1 flex flex-col items-center relative">
            <div class="w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold z-10" :class="ms.status==='done'?'bg-teal text-white':ms.status==='active'?'bg-indigo text-white matching-anim':'bg-white/10 text-gray-500'" x-text="ms.status==='done'?'‚úì':(i+1)"></div>
            <div class="text-[10px] mt-1 text-center" :class="ms.status==='done'?'text-teal':ms.status==='active'?'text-indigo':'text-gray-500'" x-text="ms.name"></div>
            <div class="text-[9px] text-gray-600" x-text="ms.date"></div>
            <div x-show="i<selectedProject.milestones.length-1" class="absolute top-3.5 left-[calc(50%+14px)] h-0.5 right-[-50%]" :class="ms.status==='done'?'bg-teal':'bg-white/10'"></div>
          </div>
        </template>
      </div>
    </div>

    <!-- Samples Tab -->
    <div x-show="detailTab==='samples'" class="glass rounded-xl p-5 mb-4">
      <div class="text-xs font-medium text-gray-400 mb-3">Sample Tracking</div>
      <table class="w-full text-xs">
        <thead><tr class="text-gray-500"><th class="text-left pb-2">Sample</th><th class="text-left pb-2">Sent</th><th class="text-left pb-2">Status</th><th class="text-right pb-2">Actions</th></tr></thead>
        <tbody>
          <template x-for="s in selectedProject.samples" :key="s.id">
            <tr class="border-t border-white/5 transition-all" :class="s.flash||''">
              <td class="py-2" x-text="s.id"></td>
              <td class="text-gray-400" x-text="s.sent"></td>
              <td><span class="px-1.5 py-0.5 rounded text-[10px] transition-all" :class="s.status==='Approved'?'bg-teal/20 text-teal':s.status==='Pending'?'bg-amber/20 text-amber':s.status==='Revision Requested'?'bg-indigo/20 text-indigo':'bg-red-500/20 text-red-400'" x-text="s.status"></span></td>
              <td class="text-right">
                <template x-if="s.status==='Pending'">
                  <div class="flex gap-1 justify-end">
                    <button @click="sampleAction(s,'Approved')" class="px-2 py-0.5 rounded text-[10px] bg-teal/20 text-teal hover:bg-teal/40 transition">‚úì Approve</button>
                    <button @click="sampleAction(s,'Rejected')" class="px-2 py-0.5 rounded text-[10px] bg-red-500/20 text-red-400 hover:bg-red-500/40 transition">‚úó Reject</button>
                    <button @click="sampleAction(s,'Revision Requested')" class="px-2 py-0.5 rounded text-[10px] bg-indigo/20 text-indigo hover:bg-indigo/40 transition">‚Ü∫ Revise</button>
                  </div>
                </template>
              </td>
            </tr>
          </template>
        </tbody>
      </table>
    </div>

    <!-- Activity Timeline Tab -->
    <div x-show="detailTab==='activity'" class="glass rounded-xl p-5 mb-4">
      <div class="text-xs font-medium text-gray-400 mb-3">Activity Timeline</div>
      <div class="relative pl-4 border-l border-white/10 space-y-3">
        <template x-for="(ev,i) in selectedProject.activity" :key="i">
          <div class="relative">
            <div class="absolute -left-[21px] top-1 w-2.5 h-2.5 rounded-full" :class="ev.type==='shipped'?'bg-indigo':ev.type==='received'?'bg-teal':ev.type==='rejected'?'bg-red-400':ev.type==='approved'?'bg-teal':'bg-amber'"></div>
            <div class="text-[10px] text-gray-500" x-text="ev.date"></div>
            <div class="text-xs" x-text="ev.text"></div>
          </div>
        </template>
      </div>
    </div>

    <!-- Documents Tab -->
    <div x-show="detailTab==='documents'" class="glass rounded-xl p-5 mb-4">
      <div class="text-xs font-medium text-gray-400 mb-3">Project Documents</div>
      <div class="space-y-2">
        <template x-for="doc in selectedProject.documents" :key="doc.name">
          <div class="flex items-center gap-3 p-2 rounded-lg bg-white/[0.02] hover:bg-white/[0.05] transition">
            <div class="text-lg" x-text="doc.icon"></div>
            <div class="flex-1">
              <div class="text-xs font-medium" x-text="doc.name"></div>
              <div class="text-[10px] text-gray-500" x-text="doc.size+' ‚Ä¢ '+doc.date"></div>
            </div>
            <span class="text-[10px] px-2 py-0.5 rounded bg-white/5 text-gray-400" x-text="doc.type"></span>
          </div>
        </template>
      </div>
      <button @click="$dispatch('show-toast','Demo ‚Äî document upload simulated')" class="mt-3 text-xs text-indigo hover:text-indigo/80 transition">+ Upload Document</button>
    </div>

    <!-- Iterations Tab -->
    <div x-show="detailTab==='iterations'" class="glass rounded-xl p-5">
      <div class="text-xs font-medium text-gray-400 mb-3">Iteration History</div>
      <template x-for="it in selectedProject.iterations" :key="it">
        <div class="text-xs py-1 border-b border-white/5 last:border-0" x-text="it"></div>
      </template>
    </div>
  </div>
  </template>
</div>
</div>

<!-- ====== PRODUCT 3: ChemGraph ====== -->
<style>
@keyframes cg-draw-line{from{stroke-dashoffset:300}to{stroke-dashoffset:0}}
.cg-line-anim{stroke-dasharray:300;animation:cg-draw-line .6s ease forwards}
.cg-tooltip{position:absolute;background:rgba(15,15,30,0.95);border:1px solid rgba(99,102,241,0.3);border-radius:8px;padding:6px 10px;font-size:10px;color:#e5e7eb;pointer-events:none;white-space:nowrap;z-index:50;transform:translate(-50%,-110%)}
</style>
<div x-show="activeProduct===3" x-cloak class="fade-in max-w-5xl" x-data="chemGraphApp()">
<h2 class="text-xl font-bold mb-4">üï∏Ô∏è ChemGraph</h2>
<div class="text-xs text-gray-400 mb-2 flex gap-4 flex-wrap">
  <span>üîµ 465 Manufacturers</span><span>üü¢ 5,000+ Customers</span><span>üü† 847 Products</span><span>üîó 12,400 Connections</span>
</div>

<!-- Search Bar -->
<div class="mb-3">
  <input type="text" x-model="searchTerm" @input="applySearch()" placeholder="üîç Search manufacturer, product, or customer..." class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo placeholder-gray-500">
</div>

<!-- Network Stats -->
<div class="text-[10px] text-gray-500 mb-2" x-text="'Showing ' + visibleNodeCount + ' nodes, ' + visibleLineCount + ' connections'"></div>

<!-- SVG Network -->
<div class="glass rounded-xl p-4 mb-4 relative overflow-hidden" style="height:380px" @click="if($event.target===($event.currentTarget.querySelector('svg')||$event.currentTarget)){closeDetail()}">
<svg width="100%" height="100%" class="absolute inset-0">
  <template x-for="l in graphLines" :key="l.id">
    <line :x1="l.x1" :y1="l.y1" :x2="l.x2" :y2="l.y2" class="node-line" :class="(l.highlighted?'highlighted':'') + (l.dimmed?' opacity-5':'') + (l.animated?' cg-line-anim':'')"/>
  </template>
</svg>
<template x-for="n in graphNodes" :key="n.id">
  <div class="absolute node-circle flex flex-col items-center cursor-pointer" :class="(n.dimmed?'dimmed':'') + (n.highlighted?' highlighted':'')" :style="'left:'+n.x+'%;top:'+n.y+'%'" @mouseenter="hoverNode(n.id)" @mouseleave="unhoverNode()" @click.stop="clickNode(n.id)">
    <div class="w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold transition-all" :style="'background:'+n.color+'33;color:'+n.color+';'+(selectedNode===n.id?'box-shadow:0 0 12px '+n.color:'')" x-text="n.label.substring(0,2)"></div>
    <div class="text-[9px] text-gray-500 mt-0.5 whitespace-nowrap" x-text="n.label"></div>
  </div>
</template>
<!-- Tooltip -->
<div x-show="tooltipVisible" x-cloak class="cg-tooltip" :style="'left:'+tooltipX+'%;top:'+tooltipY+'%'" x-html="tooltipContent"></div>
</div>

<!-- Detail Panel -->
<div x-show="detailPanel" x-cloak class="glass rounded-xl p-4 mb-4 fade-in border border-indigo/20">
  <div class="flex justify-between items-start mb-2">
    <div class="text-sm font-semibold" x-text="detailTitle"></div>
    <button @click="closeDetail()" class="text-gray-500 hover:text-white text-xs">‚úï</button>
  </div>
  <div x-html="detailContent" class="text-xs space-y-1"></div>
</div>

<!-- Query Buttons -->
<div class="flex justify-between items-center mb-2">
  <div class="text-xs text-gray-500">Intelligence Queries</div>
  <button x-show="activeQuery||searchTerm" @click="activeQuery='';searchTerm='';queryResult='';_resetGraph();closeDetail()" class="text-[10px] text-gray-400 hover:text-white px-2 py-0.5 rounded bg-white/5 hover:bg-white/10 transition">‚úï Reset View</button>
</div>
<div class="grid grid-cols-2 md:grid-cols-3 gap-2 mb-4">
  <button @click="runQuery('risk')" :class="activeQuery==='risk'?'border-indigo bg-indigo/10':''" class="glass rounded-lg px-3 py-2 text-xs text-left glass-hover transition border border-transparent">‚ö†Ô∏è Supply Risk:<br><span class="text-gray-400">Anand Chemtex offline</span></button>
  <button @click="runQuery('cost')" :class="activeQuery==='cost'?'border-indigo bg-indigo/10':''" class="glass rounded-lg px-3 py-2 text-xs text-left glass-hover transition border border-transparent">üí∞ Cost Benchmark:<br><span class="text-gray-400">Pymetrozine</span></button>
  <button @click="runQuery('capacity')" :class="activeQuery==='capacity'?'border-indigo bg-indigo/10':''" class="glass rounded-lg px-3 py-2 text-xs text-left glass-hover transition border border-transparent">üè≠ Capacity Match:<br><span class="text-gray-400">Idle Hydrogenation</span></button>
  <button @click="runQuery('china')" :class="activeQuery==='china'?'border-indigo bg-indigo/10':''" class="glass rounded-lg px-3 py-2 text-xs text-left glass-hover transition border border-transparent">üîÑ China+1:<br><span class="text-gray-400">>70% dependency</span></button>
  <button @click="runQuery('crosssell')" :class="activeQuery==='crosssell'?'border-indigo bg-indigo/10':''" class="glass rounded-lg px-3 py-2 text-xs text-left glass-hover transition border border-transparent">üîÑ Cross-Sell:<br><span class="text-gray-400">Customer X also needs...</span></button>
  <button @click="runQuery('anomaly')" :class="activeQuery==='anomaly'?'border-indigo bg-indigo/10':''" class="glass rounded-lg px-3 py-2 text-xs text-left glass-hover transition border border-transparent">üìä Price Anomaly:<br><span class="text-gray-400">Above-market pricing</span></button>
</div>

<!-- Results -->
<div x-show="queryResult" x-cloak class="glass rounded-xl p-4 fade-in">
  <div class="text-sm font-medium mb-3" x-text="queryTitle"></div>
  <div x-html="queryResult"></div>
</div>
</div>

<!-- ====== PRODUCT 4: ComplianceOS ====== -->
<div x-show="activeProduct===4" x-cloak class="fade-in max-w-4xl" x-data="complianceApp()">
<h2 class="text-xl font-bold mb-4">üõ°Ô∏è ComplianceOS</h2>

<!-- Tabs -->
<div class="flex gap-1 bg-white/5 rounded-lg p-0.5 mb-4 w-fit flex-wrap">
  <button @click="cTab='certs'" :class="cTab==='certs'?'bg-indigo text-white':'text-gray-400'" class="px-3 py-1 rounded-md text-xs font-medium transition">Certificates</button>
  <button @click="cTab='sds'" :class="cTab==='sds'?'bg-indigo text-white':'text-gray-400'" class="px-3 py-1 rounded-md text-xs font-medium transition">Generate SDS</button>
  <button @click="cTab='gap'" :class="cTab==='gap'?'bg-indigo text-white':'text-gray-400'" class="px-3 py-1 rounded-md text-xs font-medium transition">Gap Analysis</button>
  <button @click="cTab='onboard'" :class="cTab==='onboard'?'bg-indigo text-white':'text-gray-400'" class="px-3 py-1 rounded-md text-xs font-medium transition">Onboard Factory</button>
</div>

<!-- Renewal Modal -->
<div x-show="renewCert" x-cloak class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4" @click.self="renewCert=null;renewStep=1">
  <div class="glass rounded-xl p-6 max-w-md w-full border border-white/10" @click.stop>
    <h3 class="font-bold text-sm mb-4">üîÑ Renew Certificate ‚Äî <span x-text="renewCert?.type"></span> (<span x-text="renewCert?.facility"></span>)</h3>
    <!-- Step 1: Schedule -->
    <div x-show="renewStep===1">
      <p class="text-xs text-gray-400 mb-3">Step 1: Schedule Audit</p>
      <input type="date" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo mb-3" x-model="renewDate">
      <button @click="renewStep=2" class="w-full bg-indigo hover:bg-indigo/80 text-white py-2 rounded-lg text-xs font-medium transition">Schedule Audit ‚Üí</button>
    </div>
    <!-- Step 2: Upload -->
    <div x-show="renewStep===2" class="fade-in">
      <p class="text-xs text-gray-400 mb-1">Step 2: Upload New Certificate</p>
      <p class="text-[10px] text-teal mb-3">‚úì Audit scheduled for <span x-text="renewDate"></span></p>
      <div class="border-2 border-dashed border-white/10 rounded-lg p-6 text-center mb-3 cursor-pointer hover:border-indigo/50 transition" @click="renewStep=3">
        <div class="text-2xl mb-1">üìÑ</div>
        <div class="text-xs text-gray-400">Click to upload certificate (simulated)</div>
      </div>
    </div>
    <!-- Step 3: Done -->
    <div x-show="renewStep===3" class="fade-in text-center">
      <div class="text-4xl mb-2">‚úÖ</div>
      <p class="text-sm font-semibold text-teal mb-1">Certificate Renewed!</p>
      <p class="text-xs text-gray-400 mb-4">Status updated to Valid. Next audit: <span x-text="renewDate"></span></p>
      <button @click="completeRenewal()" class="bg-teal/20 text-teal px-6 py-2 rounded-lg text-xs font-medium transition hover:bg-teal/30">Done</button>
    </div>
  </div>
</div>

<!-- Alert Impact Modal -->
<div x-show="alertImpact" x-cloak class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4" @click.self="alertImpact=null">
  <div class="glass rounded-xl p-6 max-w-md w-full border border-white/10" @click.stop>
    <h3 class="font-bold text-sm mb-3">üìä Impact Assessment</h3>
    <p class="text-xs text-gray-400 mb-3" x-text="alertImpact?.title"></p>
    <div class="space-y-2 mb-4">
      <template x-for="item in alertImpact?.impacts||[]" :key="item">
        <div class="flex items-center gap-2 text-xs glass rounded-lg px-3 py-2">
          <span class="text-amber">‚ö†</span><span x-text="item"></span>
        </div>
      </template>
    </div>
    <button @click="alertImpact=null" class="w-full bg-white/5 hover:bg-white/10 py-2 rounded-lg text-xs font-medium transition">Close</button>
  </div>
</div>

<!-- Certs Dashboard -->
<div x-show="cTab==='certs'">
  <!-- Dashboard Stats -->
  <div class="grid grid-cols-2 md:grid-cols-5 gap-3 mb-4">
    <div class="glass rounded-xl p-3 text-center"><div class="text-2xl font-bold text-teal" x-text="certData.length"></div><div class="text-[10px] text-gray-400">Total Certs</div></div>
    <div class="glass rounded-xl p-3 text-center"><div class="text-2xl font-bold text-green-400">‚Üë2</div><div class="text-[10px] text-gray-400">New This Quarter</div></div>
    <div class="glass rounded-xl p-3 text-center"><div class="text-2xl font-bold text-amber" x-text="certData.filter(c=>c.status==='Expiring').length"></div><div class="text-[10px] text-gray-400">Expiring Soon</div></div>
    <div class="glass rounded-xl p-3 text-center"><div class="text-2xl font-bold text-red-400" x-text="certData.filter(c=>c.status==='Expired').length"></div><div class="text-[10px] text-gray-400 flex items-center justify-center gap-1">‚Üì1 Expired</div></div>
    <div class="glass rounded-xl p-3 text-center"><div class="text-2xl font-bold text-indigo">3</div><div class="text-[10px] text-gray-400">Renewals &lt;90d</div></div>
  </div>
  <div class="glass rounded-xl overflow-hidden">
    <table class="w-full text-xs">
      <thead><tr class="text-gray-500 bg-white/[0.02]"><th class="text-left p-3">Facility</th><th class="text-left p-3">Cert Type</th><th class="text-left p-3">Issued</th><th class="text-left p-3">Expires</th><th class="text-left p-3">Status</th><th class="text-left p-3">Action</th></tr></thead>
      <tbody>
        <template x-for="c in certData" :key="c.id">
          <tr class="border-t border-white/5" :class="c._renewed?'bg-teal/5':''">
            <td class="p-3" x-text="c.facility"></td><td class="p-3" x-text="c.type"></td><td class="p-3 text-gray-400" x-text="c.issued"></td><td class="p-3 text-gray-400" x-text="c.expires"></td>
            <td class="p-3"><span class="px-2 py-0.5 rounded text-[10px] font-medium transition-all duration-500" :class="c.status==='Valid'?'bg-teal/20 text-teal':c.status==='Expiring'?'bg-amber/20 text-amber':'bg-red-500/20 text-red-400'" x-text="c.status"></span></td>
            <td class="p-3">
              <button x-show="c.status==='Expiring'||c.status==='Expired'" @click="startRenewal(c)" class="px-2 py-0.5 rounded text-[10px] font-medium bg-indigo/20 text-indigo hover:bg-indigo/40 transition">Renew</button>
              <span x-show="c._renewed" class="text-[10px] text-teal">‚úì Renewed</span>
            </td>
          </tr>
        </template>
      </tbody>
    </table>
  </div>
  <!-- Alerts -->
  <div class="mt-4 space-y-2">
    <div class="text-xs font-medium text-gray-400 mb-2">‚ö†Ô∏è Regulatory Alerts</div>
    <template x-for="(alert,ai) in alerts" :key="ai">
      <div x-show="!alert.dismissed" class="glass rounded-lg p-3 border-l-2 text-xs" :class="alert.color">
        <div class="mb-2" x-text="alert.text"></div>
        <div class="flex gap-2">
          <button @click="showAlertImpact(alert)" class="px-2 py-0.5 rounded bg-white/5 hover:bg-white/10 text-[10px] transition">üìä Review Impact</button>
          <button @click="alert.assigned=true" class="px-2 py-0.5 rounded bg-white/5 hover:bg-white/10 text-[10px] transition" :class="alert.assigned?'text-teal':''" x-text="alert.assigned?'‚úì Assigned to Compliance Team':'üë• Assign to Team'"></button>
          <button @click="alert.dismissed=true" class="px-2 py-0.5 rounded bg-white/5 hover:bg-white/10 text-[10px] text-gray-500 transition">Dismiss</button>
        </div>
      </div>
    </template>
  </div>
</div>

<!-- SDS Generator -->
<div x-show="cTab==='sds'" x-cloak>
  <div x-show="!sdsPreview" class="glass rounded-xl p-6">
    <h3 class="font-semibold text-sm mb-4">Generate Safety Data Sheet</h3>
    <div class="grid md:grid-cols-2 gap-4">
      <div><label class="text-xs text-gray-400 block mb-1">Product Name</label><input x-model="sdsForm.name" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo" placeholder="Pymetrozine"></div>
      <div><label class="text-xs text-gray-400 block mb-1">CAS Number</label><input x-model="sdsForm.cas" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo" placeholder="123456-78-9"></div>
      <div class="md:col-span-2"><label class="text-xs text-gray-400 block mb-1">Composition</label><textarea x-model="sdsForm.comp" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo h-20" placeholder="Active ingredient 98%, excipients 2%"></textarea></div>
      <div><label class="text-xs text-gray-400 block mb-1">Hazard Classification</label>
        <select x-model="sdsForm.hazard" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo">
          <option value="Irritant">Irritant</option><option value="Toxic">Toxic</option><option value="Flammable">Flammable</option><option value="Corrosive">Corrosive</option><option value="Environmental Hazard">Environmental Hazard</option>
        </select>
      </div>
    </div>
    <button @click="sdsPreview=true" class="mt-4 bg-indigo hover:bg-indigo/80 text-white px-6 py-2 rounded-lg text-sm font-medium transition">Generate SDS ‚Üí</button>
  </div>
  <div x-show="sdsPreview" x-cloak class="fade-in">
    <button @click="sdsPreview=false" class="text-xs text-gray-400 hover:text-white mb-4">‚Üê Back</button>
    <div class="glass rounded-xl p-6 border-l-4 border-indigo">
      <div class="flex justify-between items-start mb-4">
        <div><h3 class="font-bold text-lg">Safety Data Sheet</h3><div class="text-xs text-gray-400">GHS Compliant ‚Äî Rev 1.0 ‚Äî 16 Sections</div></div>
        <div class="text-3xl" x-text="sdsForm.hazard==='Toxic'?'‚ò†Ô∏è':sdsForm.hazard==='Flammable'?'üî•':sdsForm.hazard==='Corrosive'?'‚öóÔ∏è':sdsForm.hazard==='Environmental Hazard'?'üåç':'‚ö†Ô∏è'"></div>
      </div>
      <!-- Full 16-section SDS -->
      <div class="space-y-3 max-h-[60vh] overflow-y-auto pr-2">
        <template x-for="(sec,si) in sdsSections()" :key="si">
          <div class="border border-white/5 rounded-lg p-3">
            <div class="text-xs font-semibold text-indigo mb-1" x-text="'Section '+(si+1)+': '+sec.title"></div>
            <div class="text-[11px] text-gray-300 leading-relaxed whitespace-pre-line" x-text="sec.content"></div>
          </div>
        </template>
      </div>
      <div class="mt-4 pt-4 border-t border-white/10 flex flex-wrap gap-2 items-center">
        <button @click="sdsDownloaded='pdf';$dispatch('show-toast','PDF generated (demo)')" class="bg-indigo/20 text-indigo px-4 py-1.5 rounded-lg text-xs font-medium hover:bg-indigo/30 transition">
          <span x-text="sdsDownloaded==='pdf'?'‚úì Downloaded':'üì• Download PDF'"></span>
        </button>
        <button @click="sdsDownloaded='eu';$dispatch('show-toast','EU format exported (demo)')" class="bg-amber/20 text-amber px-4 py-1.5 rounded-lg text-xs font-medium hover:bg-amber/30 transition">
          <span x-text="sdsDownloaded==='eu'?'‚úì Exported':'üá™üá∫ Export EU Format'"></span>
        </button>
        <span class="text-[10px] text-gray-500 ml-auto">Generated by ComplianceOS ‚Ä¢ Scimplify ‚Ä¢ <span x-text="new Date().toLocaleDateString()"></span></span>
      </div>
    </div>
  </div>
</div>

<!-- Gap Analysis -->
<div x-show="cTab==='gap'" x-cloak>
  <div class="glass rounded-xl p-5">
    <label class="text-xs text-gray-400 block mb-2">Select Facility</label>
    <select x-model="gapFacility" @change="remediationStarted=false;remediationPlan=[]" class="bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo mb-4">
      <option value="anand">Anand Chemtex ‚Äî Vadodara</option>
      <option value="deccan">Deccan Fine Chemicals ‚Äî Pune</option>
      <option value="kaivin">KaiVin Chemical ‚Äî Ankleshwar</option>
    </select>
    <div class="space-y-2">
      <template x-for="g in gapData[gapFacility]||[]" :key="g.cert">
        <div class="flex items-center justify-between py-2 border-b border-white/5">
          <div class="flex items-center gap-2">
            <span :class="g.has?'text-teal':'text-red-400'" x-text="g.has?'‚úì':'‚úó'"></span>
            <span class="text-sm" x-text="g.cert"></span>
          </div>
          <span x-show="!g.has" class="text-[10px] text-amber bg-amber/10 px-2 py-0.5 rounded" x-text="g.fix"></span>
        </div>
      </template>
    </div>
    <!-- Remediation Tracking -->
    <div class="mt-4 pt-4 border-t border-white/10">
      <button x-show="!remediationStarted" @click="startRemediation()" class="bg-indigo hover:bg-indigo/80 text-white px-5 py-2 rounded-lg text-xs font-medium transition">üõ† Start Remediation Plan</button>
      <div x-show="remediationStarted" class="fade-in space-y-2">
        <div class="text-xs font-medium text-gray-400 mb-2">üìã Remediation Plan</div>
        <template x-for="(r,ri) in remediationPlan" :key="ri">
          <div class="flex items-center justify-between glass rounded-lg px-3 py-2">
            <div class="flex items-center gap-2">
              <span class="text-xs" x-text="r.cert"></span>
              <span class="text-[10px] text-gray-500" x-text="r.timeline"></span>
            </div>
            <button @click="advanceRemediation(ri)" class="px-2 py-0.5 rounded text-[10px] font-medium transition"
              :class="r.stage===0?'bg-gray-500/20 text-gray-400':r.stage===1?'bg-amber/20 text-amber':r.stage===2?'bg-indigo/20 text-indigo':'bg-teal/20 text-teal'"
              x-text="['Not Started','In Progress ‚Üí','Audit Scheduled ‚Üí','‚úì Complete'][r.stage]"
              :disabled="r.stage>=3"></button>
          </div>
        </template>
      </div>
    </div>
  </div>
</div>

<!-- Onboard Factory -->
<div x-show="cTab==='onboard'" x-cloak>
  <div class="glass rounded-xl p-6">
    <h3 class="font-semibold text-sm mb-4">üè≠ Self-Serve Factory Onboarding</h3>
    <!-- Progress -->
    <div class="flex gap-1 mb-6">
      <template x-for="s in 4" :key="s">
        <div class="h-1 flex-1 rounded-full transition-all duration-300" :class="onboardStep>=s?'bg-indigo':'bg-white/10'"></div>
      </template>
    </div>

    <!-- Step 1 -->
    <div x-show="onboardStep===1">
      <label class="text-xs text-gray-400 block mb-1">Factory Name</label>
      <input x-model="onboardForm.name" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo mb-3" placeholder="e.g. Sunrise Chemicals">
      <label class="text-xs text-gray-400 block mb-1">Location</label>
      <input x-model="onboardForm.location" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo mb-4" placeholder="e.g. Vadodara, Gujarat">
      <button @click="onboardStep=2" :disabled="!onboardForm.name||!onboardForm.location" class="bg-indigo hover:bg-indigo/80 disabled:opacity-40 text-white px-6 py-2 rounded-lg text-xs font-medium transition">Next ‚Üí</button>
    </div>
    <!-- Step 2 -->
    <div x-show="onboardStep===2" class="fade-in">
      <label class="text-xs text-gray-400 block mb-2">Current Certifications</label>
      <div class="grid grid-cols-2 gap-2 mb-4">
        <template x-for="cert in allCertTypes" :key="cert">
          <label class="flex items-center gap-2 glass rounded-lg px-3 py-2 cursor-pointer hover:bg-white/5 transition">
            <input type="checkbox" :value="cert" x-model="onboardForm.certs" class="accent-indigo">
            <span class="text-xs" x-text="cert"></span>
          </label>
        </template>
      </div>
      <div class="flex gap-2">
        <button @click="onboardStep=1" class="bg-white/5 hover:bg-white/10 px-4 py-2 rounded-lg text-xs transition">‚Üê Back</button>
        <button @click="onboardStep=3" class="bg-indigo hover:bg-indigo/80 text-white px-6 py-2 rounded-lg text-xs font-medium transition">Next ‚Üí</button>
      </div>
    </div>
    <!-- Step 3 -->
    <div x-show="onboardStep===3" class="fade-in">
      <label class="text-xs text-gray-400 block mb-2">Target Buyer Segments <span class="text-amber" x-show="onboardForm.segments.length===0">(select at least one)</span></label>
      <div class="grid grid-cols-2 gap-2 mb-4">
        <template x-for="seg in buyerSegments" :key="seg.name">
          <label class="flex items-center gap-2 glass rounded-lg px-3 py-2 cursor-pointer hover:bg-white/5 transition">
            <input type="checkbox" :value="seg.name" x-model="onboardForm.segments" class="accent-indigo">
            <span class="text-xs" x-text="seg.name"></span>
          </label>
        </template>
      </div>
      <div class="flex gap-2">
        <button @click="onboardStep=2" class="bg-white/5 hover:bg-white/10 px-4 py-2 rounded-lg text-xs transition">‚Üê Back</button>
        <button @click="if(onboardForm.segments.length>0){onboardStep=4;generateOnboardGap()}else{$dispatch('show-toast','Please select at least one buyer segment')}" class="bg-indigo hover:bg-indigo/80 text-white px-6 py-2 rounded-lg text-xs font-medium transition" :class="onboardForm.segments.length===0?'opacity-60':''">Generate Gap Report ‚Üí</button>
      </div>
    </div>
    <!-- Step 4: Report -->
    <div x-show="onboardStep===4" class="fade-in">
      <div class="text-center mb-4">
        <div class="text-2xl mb-1">üìã</div>
        <h4 class="font-semibold text-sm">Gap Report for <span x-text="onboardForm.name"></span></h4>
        <div class="text-[10px] text-gray-400" x-text="onboardForm.location"></div>
      </div>
      <div class="space-y-2 mb-4">
        <template x-for="g in onboardGaps" :key="g.cert">
          <div class="flex items-center justify-between py-2 border-b border-white/5">
            <div class="flex items-center gap-2">
              <span :class="g.has?'text-teal':'text-red-400'" x-text="g.has?'‚úì Have':'‚úó Need'"></span>
              <span class="text-xs" x-text="g.cert"></span>
            </div>
            <span x-show="!g.has" class="text-[10px] text-amber bg-amber/10 px-2 py-0.5 rounded" x-text="g.est"></span>
          </div>
        </template>
      </div>
      <div x-show="onboardGaps.length" class="glass rounded-lg p-3 text-center mb-4">
        <div class="text-xs text-gray-400">Estimated time to full compliance</div>
        <div class="text-lg font-bold text-indigo" x-text="onboardGaps.filter(g=>!g.has).length===0?'Already Qualified! ‚úÖ':onboardGaps.filter(g=>!g.has).length*2+' ‚Äî '+onboardGaps.filter(g=>!g.has).length*3+' months'"></div>
      </div>
      <button @click="onboardStep=1;onboardForm={name:'',location:'',certs:[],segments:[]};onboardGaps=[]" class="w-full bg-white/5 hover:bg-white/10 py-2 rounded-lg text-xs font-medium transition">Start Over</button>
    </div>
  </div>
</div>
</div>

<!-- ====== PRODUCT 5: ATOMS Commerce ====== -->
<div x-show="activeProduct===5" x-cloak class="fade-in max-w-5xl" x-data="atomsApp()">
<h2 class="text-xl font-bold mb-4">üõí ATOMS Commerce</h2>

<!-- Cart indicator -->
<div x-show="cart.length>0" class="fixed top-16 right-4 z-30">
  <button @click="view='cart'" class="bg-indigo text-white px-3 py-1.5 rounded-lg text-xs font-medium shadow-lg">üõí <span x-text="cart.length"></span> items</button>
</div>

<!-- Compare bar -->
<div x-show="compareList.length>0" class="fixed bottom-4 left-1/2 -translate-x-1/2 z-30 glass rounded-xl px-4 py-2 flex items-center gap-3 shadow-xl border border-indigo/30">
  <span class="text-xs text-gray-400">Compare (<span x-text="compareList.length"></span>/3)</span>
  <template x-for="c in compareList" :key="c.id"><span class="text-xs bg-indigo/20 text-indigo px-2 py-0.5 rounded" x-text="c.name.split(' ')[0]"></span></template>
  <button @click="view='compare'" class="bg-indigo text-white px-3 py-1 rounded text-xs" x-show="compareList.length>=2">Compare ‚Üí</button>
  <button @click="compareList=[]" class="text-red-400 text-xs">Clear</button>
</div>

<!-- Navigation Tabs -->
<div class="flex gap-2 mb-4">
  <button @click="view='catalog'" class="px-3 py-1.5 rounded-lg text-xs font-medium transition" :class="view==='catalog'?'bg-indigo text-white':'bg-white/5 text-gray-400 hover:text-white'">üì¶ Catalog</button>
  <button @click="view='orders'" class="px-3 py-1.5 rounded-lg text-xs font-medium transition" :class="view==='orders'?'bg-indigo text-white':'bg-white/5 text-gray-400 hover:text-white'">üìã My Orders <span class="bg-teal/20 text-teal px-1.5 rounded-full text-[10px] ml-1" x-text="orderHistory.length"></span></button>
  <button @click="view='cart'" x-show="cart.length>0" class="px-3 py-1.5 rounded-lg text-xs font-medium transition" :class="view==='cart'?'bg-indigo text-white':'bg-white/5 text-gray-400 hover:text-white'">üõí Cart (<span x-text="cart.length"></span>)</button>
</div>

<!-- ===== CATALOG VIEW ===== -->
<div x-show="view==='catalog'" x-cloak>

<!-- Quick Reorder Section -->
<div x-show="orderHistory.length>0" class="mb-6">
  <h3 class="text-sm font-semibold text-gray-400 mb-2">‚ö° Quick Reorder</h3>
  <div class="grid md:grid-cols-3 gap-3">
    <template x-for="o in orderHistory.slice(0,3)" :key="o.id">
      <div class="glass rounded-lg p-3 flex justify-between items-center">
        <div>
          <div class="text-xs font-medium" x-text="o.items.map(i=>i.name.split(' ')[0]).join(', ')"></div>
          <div class="text-[10px] text-gray-500" x-text="o.date+' ¬∑ ‚Çπ'+o.total.toLocaleString()"></div>
        </div>
        <button @click="reorder(o)" class="bg-teal/20 hover:bg-teal/40 text-teal px-2 py-1 rounded text-[10px] font-medium transition">Reorder</button>
      </div>
    </template>
  </div>
</div>

<!-- Search & Advanced Filters -->
<div class="flex flex-wrap gap-2 mb-4">
  <input x-model="search" class="bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-sm outline-none focus:border-indigo flex-1 min-w-0" placeholder="Search products...">
  <select x-model="filterPurity" class="bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-xs outline-none">
    <option value="">All Purity</option><option value="99">‚â•99%</option><option value="98">‚â•98%</option>
  </select>
  <select x-model="filterIndustry" class="bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-xs outline-none">
    <option value="">All Industries</option><option value="Pharma">Pharma</option><option value="Agro">Agro</option><option value="F&F">F&F</option><option value="Cosmetics">Cosmetics</option>
  </select>
  <select x-model="filterDelivery" class="bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-xs outline-none">
    <option value="">All Delivery</option><option value="express">Express</option><option value="standard">Standard</option>
  </select>
  <select x-model="filterGreen" class="bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-xs outline-none">
    <option value="">All GreenScore</option><option value="A+">A+</option><option value="A">A or better</option><option value="B">B or better</option>
  </select>
</div>

<!-- Product Grid -->
<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
  <template x-for="p in filteredProducts" :key="p.id">
    <div class="glass rounded-xl p-4 glass-hover transition relative">
      <!-- GreenScore Badge -->
      <div x-show="p.greenScore" class="absolute top-3 right-3">
        <span class="text-[10px] px-1.5 py-0.5 rounded-full font-bold" :class="p.greenScore==='A+'?'bg-emerald-500/20 text-emerald-400':p.greenScore==='A'?'bg-teal/20 text-teal':'bg-yellow-500/20 text-yellow-400'" x-text="'üåø '+p.greenScore"></span>
      </div>
      <div @click="view='detail';showDetail=p" class="cursor-pointer">
        <h3 class="font-semibold text-sm mb-1" x-text="p.name"></h3>
        <div class="text-[10px] text-gray-500 mb-2" x-text="'CAS: '+p.cas"></div>
        <div class="flex justify-between items-end mb-2">
          <div><div class="text-xs text-gray-400">Purity</div><div class="font-semibold text-sm" x-text="p.purity+'%'"></div></div>
          <div class="text-right"><div class="text-xs text-gray-400">Price/kg</div><div class="font-semibold text-sm text-teal" x-text="'‚Çπ'+p.price"></div></div>
        </div>
        <!-- Stock & Delivery -->
        <div class="flex justify-between items-center mb-2">
          <span class="text-[10px] px-1.5 py-0.5 rounded-full" :class="p.stock==='In Stock'?'bg-emerald-500/20 text-emerald-400':p.stock==='Limited'?'bg-yellow-500/20 text-yellow-400':'bg-orange-500/20 text-orange-400'" x-text="p.stock"></span>
          <span class="text-[10px] text-gray-500" x-text="'üöö '+p.deliveryEst"></span>
        </div>
        <div class="text-[10px] text-gray-500 mb-2" x-text="'Min order: '+p.minOrder+' kg'"></div>
        <div class="flex flex-wrap gap-1 mb-3">
          <template x-for="c in p.certs"><span class="text-[10px] px-1.5 py-0.5 rounded bg-teal/10 text-teal" x-text="c"></span></template>
        </div>
      </div>
      <div class="flex gap-2">
        <button @click="p.stock==='Made to Order'?$dispatch('show-toast','Demo ‚Äî would open custom quote request'):addToCart(p)" class="flex-1 py-1.5 rounded-lg text-xs font-medium transition" :class="p.stock==='Made to Order'?'bg-amber/20 hover:bg-amber/40 text-amber':'bg-indigo/20 hover:bg-indigo/40 text-indigo'" x-text="p.stock==='Made to Order'?'Request Quote':'Add to Cart'"></button>
        <button @click="toggleCompare(p)" class="px-2 py-1.5 rounded-lg text-xs transition" :class="compareList.find(c=>c.id===p.id)?'bg-indigo text-white':'bg-white/5 text-gray-400 hover:text-white'">‚öñÔ∏è</button>
      </div>
    </div>
  </template>
</div>
</div>

<!-- ===== PRODUCT DETAIL ===== -->
<div x-show="view==='detail'" x-cloak class="fade-in">
  <button @click="view='catalog';showDetail=null" class="text-xs text-gray-400 hover:text-white mb-4">‚Üê Back to Catalog</button>
  <template x-if="showDetail">
  <div class="glass rounded-xl p-6">
    <div class="flex justify-between items-start mb-1">
      <h3 class="text-lg font-bold" x-text="showDetail.name"></h3>
      <div class="flex gap-2 items-center">
        <span x-show="showDetail.greenScore" class="text-xs px-2 py-0.5 rounded-full font-bold" :class="showDetail.greenScore==='A+'?'bg-emerald-500/20 text-emerald-400':showDetail.greenScore==='A'?'bg-teal/20 text-teal':'bg-yellow-500/20 text-yellow-400'" x-text="'üåø '+showDetail.greenScore"></span>
        <span class="text-[10px] px-2 py-0.5 rounded-full" :class="showDetail.stock==='In Stock'?'bg-emerald-500/20 text-emerald-400':showDetail.stock==='Limited'?'bg-yellow-500/20 text-yellow-400':'bg-orange-500/20 text-orange-400'" x-text="showDetail.stock"></span>
      </div>
    </div>
    <div class="text-xs text-gray-400 mb-4" x-text="'CAS: '+showDetail.cas"></div>
    <div class="grid md:grid-cols-2 gap-6">
      <div class="space-y-3 text-sm">
        <div><span class="text-gray-400">Purity:</span> <span x-text="showDetail.purity+'%'"></span></div>
        <div><span class="text-gray-400">Molecular Weight:</span> <span x-text="showDetail.mw||'N/A'"></span></div>
        <div><span class="text-gray-400">Delivery:</span> <span x-text="showDetail.deliveryEst"></span></div>
        <div><span class="text-gray-400">Industry:</span> <span x-text="showDetail.industry.join(', ')"></span></div>
        <div><span class="text-gray-400">Manufacturer:</span> Verified Facility (Anonymized)</div>
        <div class="flex flex-wrap gap-1"><template x-for="c in showDetail.certs"><span class="text-xs px-2 py-0.5 rounded bg-teal/10 text-teal" x-text="c"></span></template></div>
      </div>
      <div>
        <div class="text-xs font-medium text-gray-400 mb-2">Pack Sizes & Volume Pricing</div>
        <div class="space-y-2">
          <div class="flex justify-between text-sm glass rounded-lg px-3 py-2"><span>25 kg</span><span class="text-teal" x-text="'‚Çπ'+(showDetail.price*1.1).toFixed(0)+'/kg'"></span></div>
          <div class="flex justify-between text-sm glass rounded-lg px-3 py-2"><span>100 kg</span><span class="text-teal" x-text="'‚Çπ'+showDetail.price+'/kg'"></span></div>
          <div class="flex justify-between text-sm glass rounded-lg px-3 py-2"><span>500 kg <span class="text-[10px] text-emerald-400 ml-1">-8%</span></span><span class="text-teal" x-text="'‚Çπ'+(showDetail.price*0.92).toFixed(0)+'/kg'"></span></div>
          <div class="flex justify-between text-sm glass rounded-lg px-3 py-2"><span>1000 kg <span class="text-[10px] text-emerald-400 ml-1">-15%</span></span><span class="text-teal" x-text="'‚Çπ'+(showDetail.price*0.85).toFixed(0)+'/kg'"></span></div>
        </div>
        <!-- Quantity Selector -->
        <div class="mt-4 glass rounded-lg p-3">
          <div class="text-xs text-gray-400 mb-2">Quantity (kg)</div>
          <div class="flex items-center gap-3">
            <button @click="if(detailQty>showDetail.minOrder)detailQty-=showDetail.minOrder" class="w-8 h-8 rounded bg-white/10 hover:bg-white/20 text-lg transition">‚àí</button>
            <input type="number" x-model.number="detailQty" class="w-20 bg-white/5 border border-white/10 rounded px-2 py-1 text-sm text-center outline-none">
            <button @click="detailQty+=showDetail.minOrder" class="w-8 h-8 rounded bg-white/10 hover:bg-white/20 text-lg transition">+</button>
            <span class="text-sm text-teal font-semibold ml-auto" x-text="'‚Çπ'+(getVolPrice(showDetail,detailQty)*detailQty).toLocaleString()"></span>
          </div>
          <div class="text-[10px] text-gray-500 mt-1" x-text="'Unit price: ‚Çπ'+getVolPrice(showDetail,detailQty)+'/kg'+(detailQty>=500?' (volume discount!)':'')"></div>
        </div>
        <button @click="addToCartQty(showDetail,detailQty);view='catalog';showDetail=null" class="mt-4 w-full bg-indigo hover:bg-indigo/80 text-white py-2 rounded-lg text-sm font-medium transition">Add to Cart</button>
      </div>
    </div>
  </div>
  </template>
</div>

<!-- ===== CART ===== -->
<div x-show="view==='cart'" x-cloak class="fade-in">
  <button @click="view='catalog'" class="text-xs text-gray-400 hover:text-white mb-4">‚Üê Back</button>
  <div class="glass rounded-xl p-6">
    <h3 class="font-semibold mb-4">Your Cart</h3>
    <template x-for="(item,i) in cart" :key="i">
      <div class="flex justify-between items-center py-3 border-b border-white/5 text-sm">
        <span x-text="item.name" class="flex-1"></span>
        <div class="flex items-center gap-3">
          <div class="flex items-center gap-1">
            <button @click="if(item.qty>item.minOrder){item.qty-=item.minOrder;item.price=getVolPrice(products.find(p=>p.name===item.name),item.qty)}" class="w-6 h-6 rounded bg-white/10 hover:bg-white/20 text-xs transition">‚àí</button>
            <span class="text-gray-400 w-14 text-center text-xs" x-text="item.qty+' kg'"></span>
            <button @click="item.qty+=item.minOrder;item.price=getVolPrice(products.find(p=>p.name===item.name),item.qty)" class="w-6 h-6 rounded bg-white/10 hover:bg-white/20 text-xs transition">+</button>
          </div>
          <span class="text-teal w-24 text-right" x-text="'‚Çπ'+(item.price*item.qty).toLocaleString()"></span>
          <button @click="cart.splice(i,1)" class="text-red-400 text-xs">‚úó</button>
        </div>
      </div>
    </template>
    <div x-show="cart.length===0" class="text-center text-gray-500 text-sm py-8">Cart is empty</div>
    <div x-show="cart.length>0">
      <div class="flex justify-between items-center mt-4 pt-4 border-t border-white/10">
        <span class="font-semibold">Total</span>
        <span class="text-lg font-bold text-teal" x-text="'‚Çπ'+cartTotal().toLocaleString()"></span>
      </div>
      <button @click="view='quote';quoteId='SCM-'+Math.floor(Math.random()*9000+1000)" class="mt-4 w-full bg-indigo hover:bg-indigo/80 text-white py-2 rounded-lg text-sm font-medium transition">Get Instant Quote ‚Üí</button>
    </div>
  </div>
</div>

<!-- ===== QUOTE ===== -->
<div x-show="view==='quote'" x-cloak class="fade-in">
  <button @click="view='cart'" class="text-xs text-gray-400 hover:text-white mb-4">‚Üê Back to Cart</button>
  <div class="glass rounded-xl p-6 border-l-4 border-teal glow-teal">
    <h3 class="font-bold text-lg mb-1">Quote Summary</h3>
    <div class="text-xs text-gray-400 mb-4">Quote #<span x-text="quoteId"></span></div>
    <template x-for="item in cart" :key="item.name">
      <div class="flex justify-between text-sm py-1 border-b border-white/5">
        <span x-text="item.name+' √ó '+item.qty+' kg'"></span>
        <span x-text="'‚Çπ'+(item.price*item.qty).toLocaleString()"></span>
      </div>
    </template>
    <div class="flex justify-between font-bold mt-3 text-lg"><span>Total</span><span class="text-teal" x-text="'‚Çπ'+cartTotal().toLocaleString()"></span></div>
    <div class="mt-4 grid grid-cols-3 gap-4 text-xs text-center">
      <div><span class="text-gray-400 block">Delivery</span><span>5-7 days</span></div>
      <div><span class="text-gray-400 block">Payment</span><span>Net 30</span></div>
      <div><span class="text-gray-400 block">Valid For</span><span>7 days</span></div>
    </div>
    <button @click="placeOrder()" class="mt-4 w-full bg-emerald-600 hover:bg-emerald-700 text-white py-2 rounded-lg text-sm font-medium transition">‚úì Place Order</button>
  </div>
</div>

<!-- ===== ORDER TRACKING ===== -->
<div x-show="view==='tracking'" x-cloak class="fade-in">
  <button @click="view='orders'" class="text-xs text-gray-400 hover:text-white mb-4">‚Üê Back to Orders</button>
  <template x-if="trackingOrder">
  <div class="glass rounded-xl p-6 border-l-4 border-emerald-500">
    <div class="flex justify-between items-start mb-4">
      <div>
        <h3 class="font-bold text-lg">Order Confirmed! üéâ</h3>
        <div class="text-xs text-gray-400" x-text="'Order #'+trackingOrder.id+' ¬∑ '+trackingOrder.date"></div>
      </div>
      <span class="text-xs px-2 py-1 rounded-full" :class="trackingOrder.status==='Delivered'?'bg-emerald-500/20 text-emerald-400':trackingOrder.status==='In Transit'?'bg-blue-500/20 text-blue-400':'bg-yellow-500/20 text-yellow-400'" x-text="trackingOrder.status"></span>
    </div>
    <!-- Tracking Steps -->
    <div class="relative mt-6 mb-6">
      <div class="flex justify-between">
        <template x-for="(step,i) in trackingSteps" :key="i">
          <div class="flex flex-col items-center flex-1">
            <div class="w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold mb-2 transition-all" :class="i<=trackingOrder.trackStep?'bg-emerald-500 text-white shadow-lg shadow-emerald-500/30':'bg-white/10 text-gray-500'" x-text="i<=trackingOrder.trackStep?'‚úì':(i+1)"></div>
            <div class="text-[10px] text-center" :class="i<=trackingOrder.trackStep?'text-emerald-400':'text-gray-500'" x-text="step.label"></div>
            <div class="text-[9px] text-gray-600 mt-0.5" x-text="step.date"></div>
          </div>
        </template>
      </div>
      <div class="absolute top-4 left-[8%] right-[8%] h-0.5 bg-white/10 -z-10">
        <div class="h-full bg-emerald-500 transition-all" :style="'width:'+((trackingOrder.trackStep)/(trackingSteps.length-1)*100)+'%'"></div>
      </div>
    </div>
    <!-- Order Items -->
    <div class="mt-4 border-t border-white/10 pt-4">
      <template x-for="item in trackingOrder.items" :key="item.name">
        <div class="flex justify-between text-sm py-1"><span x-text="item.name+' √ó '+item.qty+' kg'"></span><span class="text-teal" x-text="'‚Çπ'+(item.price*item.qty).toLocaleString()"></span></div>
      </template>
      <div class="flex justify-between font-bold mt-2 pt-2 border-t border-white/10"><span>Total</span><span class="text-teal" x-text="'‚Çπ'+trackingOrder.total.toLocaleString()"></span></div>
    </div>
  </div>
  </template>
</div>

<!-- ===== MY ORDERS ===== -->
<div x-show="view==='orders'" x-cloak class="fade-in">
  <button @click="view='catalog'" class="text-xs text-gray-400 hover:text-white mb-4">‚Üê Back to Catalog</button>
  <h3 class="font-semibold mb-4">My Orders</h3>
  <div x-show="orderHistory.length===0" class="glass rounded-xl p-8 text-center text-gray-500 text-sm">No orders yet. Start shopping!</div>
  <div class="space-y-3">
    <template x-for="order in orderHistory" :key="order.id">
      <div class="glass rounded-xl p-4">
        <div class="flex justify-between items-start mb-2">
          <div>
            <div class="text-sm font-medium" x-text="'Order #'+order.id"></div>
            <div class="text-[10px] text-gray-500" x-text="order.date"></div>
          </div>
          <span class="text-[10px] px-2 py-0.5 rounded-full" :class="order.status==='Delivered'?'bg-emerald-500/20 text-emerald-400':order.status==='In Transit'?'bg-blue-500/20 text-blue-400':'bg-yellow-500/20 text-yellow-400'" x-text="order.status"></span>
        </div>
        <div class="text-xs text-gray-400 mb-2">
          <template x-for="item in order.items" :key="item.name"><span class="mr-2" x-text="item.name+' ('+item.qty+'kg)'"></span></template>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-sm font-semibold text-teal" x-text="'‚Çπ'+order.total.toLocaleString()"></span>
          <div class="flex gap-2">
            <button @click="trackingOrder=order;view='tracking'" class="bg-white/5 hover:bg-white/10 text-gray-300 px-3 py-1 rounded text-[10px] font-medium transition">üìç Track</button>
            <button @click="reorder(order)" class="bg-teal/20 hover:bg-teal/40 text-teal px-3 py-1 rounded text-[10px] font-medium transition">üîÑ Reorder</button>
          </div>
        </div>
      </div>
    </template>
  </div>
</div>

<!-- ===== PRODUCT COMPARISON ===== -->
<div x-show="view==='compare'" x-cloak class="fade-in">
  <button @click="view='catalog'" class="text-xs text-gray-400 hover:text-white mb-4">‚Üê Back to Catalog</button>
  <h3 class="font-semibold mb-4">Product Comparison</h3>
  <div class="glass rounded-xl p-4 overflow-x-auto">
    <table class="w-full text-sm">
      <thead>
        <tr class="border-b border-white/10">
          <th class="text-left py-2 text-xs text-gray-400 font-medium">Attribute</th>
          <template x-for="c in compareList" :key="c.id"><th class="text-center py-2 text-xs font-medium" x-text="c.name"></th></template>
        </tr>
      </thead>
      <tbody class="text-xs">
        <tr class="border-b border-white/5"><td class="py-2 text-gray-400">Purity</td><template x-for="c in compareList" :key="'p'+c.id"><td class="text-center py-2" x-text="c.purity+'%'"></td></template></tr>
        <tr class="border-b border-white/5"><td class="py-2 text-gray-400">Price/kg</td><template x-for="c in compareList" :key="'pr'+c.id"><td class="text-center py-2 text-teal" x-text="'‚Çπ'+c.price"></td></template></tr>
        <tr class="border-b border-white/5"><td class="py-2 text-gray-400">Min Order</td><template x-for="c in compareList" :key="'m'+c.id"><td class="text-center py-2" x-text="c.minOrder+' kg'"></td></template></tr>
        <tr class="border-b border-white/5"><td class="py-2 text-gray-400">Stock</td><template x-for="c in compareList" :key="'s'+c.id"><td class="text-center py-2"><span :class="c.stock==='In Stock'?'text-emerald-400':c.stock==='Limited'?'text-yellow-400':'text-orange-400'" x-text="c.stock"></span></td></template></tr>
        <tr class="border-b border-white/5"><td class="py-2 text-gray-400">Delivery</td><template x-for="c in compareList" :key="'d'+c.id"><td class="text-center py-2" x-text="c.deliveryEst"></td></template></tr>
        <tr class="border-b border-white/5"><td class="py-2 text-gray-400">GreenScore</td><template x-for="c in compareList" :key="'g'+c.id"><td class="text-center py-2"><span :class="c.greenScore==='A+'?'text-emerald-400':c.greenScore==='A'?'text-teal':'text-yellow-400'" x-text="c.greenScore||'N/A'"></span></td></template></tr>
        <tr class="border-b border-white/5"><td class="py-2 text-gray-400">Certifications</td><template x-for="c in compareList" :key="'ce'+c.id"><td class="text-center py-2" x-text="c.certs.join(', ')"></td></template></tr>
        <tr><td class="py-2 text-gray-400">Industry</td><template x-for="c in compareList" :key="'i'+c.id"><td class="text-center py-2" x-text="c.industry.join(', ')"></td></template></tr>
      </tbody>
    </table>
  </div>
  <div class="flex gap-2 mt-4">
    <template x-for="c in compareList" :key="'btn'+c.id">
      <button @click="addToCart(c)" class="flex-1 bg-indigo/20 hover:bg-indigo/40 text-indigo py-2 rounded-lg text-xs font-medium transition" x-text="'Add '+c.name.split(' ')[0]+' to Cart'"></button>
    </template>
  </div>
</div>

</div>

<!-- ====== PRODUCT 6: GreenScore ====== -->
<div x-show="activeProduct===6" x-cloak class="fade-in max-w-4xl" x-data="greenApp()">
<h2 class="text-xl font-bold mb-4">üå± GreenScore</h2>

<div class="flex flex-wrap gap-1 bg-white/5 rounded-lg p-0.5 mb-4 w-fit">
  <button @click="gTab='compare'" :class="gTab==='compare'?'bg-indigo text-white':'text-gray-400'" class="px-3 py-1 rounded-md text-xs font-medium transition">Route Compare</button>
  <button @click="gTab='cert'" :class="gTab==='cert'?'bg-indigo text-white':'text-gray-400'" class="px-3 py-1 rounded-md text-xs font-medium transition">Carbon Certificate</button>
  <button @click="gTab='cbam'" :class="gTab==='cbam'?'bg-indigo text-white':'text-gray-400'" class="px-3 py-1 rounded-md text-xs font-medium transition">CBAM Calculator</button>
  <button @click="gTab='portfolio'" :class="gTab==='portfolio'?'bg-indigo text-white':'text-gray-400'" class="px-3 py-1 rounded-md text-xs font-medium transition">Portfolio</button>
  <button @click="gTab='how'" :class="gTab==='how'?'bg-indigo text-white':'text-gray-400'" class="px-3 py-1 rounded-md text-xs font-medium transition">How It Works</button>
</div>

<!-- Route Comparison -->
<div x-show="gTab==='compare'">
  <!-- Product Selector -->
  <div class="flex items-center gap-3 mb-4">
    <label class="text-xs text-gray-400">Product:</label>
    <select x-model="selectedProduct" @change="updateRoutes()" class="bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-sm outline-none focus:border-indigo">
      <template x-for="p in Object.keys(productData)" :key="p"><option :value="p" x-text="p"></option></template>
    </select>
  </div>
  <div class="text-sm text-gray-400 mb-4" x-text="selectedProduct+': Traditional Route vs Scimplify Optimized Route'"></div>
  <div class="grid md:grid-cols-2 gap-4">
    <template x-for="r in routes" :key="r.name">
      <div class="glass rounded-xl p-5">
        <h3 class="font-semibold text-sm mb-1" x-text="r.name"></h3>
        <div class="text-3xl font-bold mb-3" :class="r.grade==='A+'?'text-teal':r.grade==='A'?'text-teal':r.grade==='B'?'text-amber':'text-red-400'" x-text="r.grade"></div>
        <div class="space-y-3">
          <template x-for="m in ['steps','energy','water','waste','co2']" :key="m">
            <div>
              <div class="flex justify-between text-xs mb-1"><span class="text-gray-400" x-text="metricLabels[m]"></span><span x-text="r[m]+' '+metricUnits[m]"></span></div>
              <div class="w-full bg-white/5 rounded-full h-2"><div class="h-2 rounded-full" :class="r===routes[1]?'bg-teal':'bg-amber'" :style="'width:'+Math.min(100,r[m]/maxMetric(m)*100)+'%'"></div></div>
            </div>
          </template>
        </div>
      </div>
    </template>
  </div>

  <!-- Carbon Reduction Over Time -->
  <div class="glass rounded-xl p-5 mt-4">
    <h3 class="font-semibold text-sm mb-3">üìâ Optimization Journey: <span class="text-teal" x-text="selectedProduct"></span></h3>
    <div class="flex items-end gap-2 h-32 mb-2">
      <template x-for="(v,i) in currentIterations" :key="i">
        <div class="flex-1 flex flex-col items-center gap-1">
          <div class="text-xs font-bold" :class="i===currentIterations.length-1?'text-teal':'text-gray-400'" x-text="v.co2+' kg'"></div>
          <div class="w-full rounded-t-md transition-all duration-500" :class="i===currentIterations.length-1?'bg-teal':'bg-amber/60'" :style="'height:'+((v.co2/currentIterations[0].co2)*100)+'%'"></div>
          <div class="text-[10px] text-gray-500" x-text="v.label"></div>
        </div>
      </template>
    </div>
    <div class="text-center text-xs text-gray-500">Each iteration optimizes catalyst, temperature, solvent, and energy source</div>
  </div>

  <!-- Interactive Route Builder -->
  <div class="glass rounded-xl p-5 mt-4">
    <h3 class="font-semibold text-sm mb-3">üîß Build Custom Route</h3>
    <div class="grid md:grid-cols-3 gap-4 mb-4">
      <div>
        <label class="text-xs text-gray-400 block mb-1">Synthesis Steps</label>
        <input type="range" x-model.number="builder.steps" min="3" max="8" class="w-full accent-indigo">
        <div class="text-center text-sm font-medium" x-text="builder.steps+' steps'"></div>
      </div>
      <div>
        <label class="text-xs text-gray-400 block mb-1">Energy Source</label>
        <select x-model="builder.energy" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-sm outline-none focus:border-indigo">
          <option value="grid">Grid (Coal-heavy)</option>
          <option value="mixed">Mixed (Grid + Solar)</option>
          <option value="solar">Solar / Renewable</option>
        </select>
      </div>
      <div>
        <label class="text-xs text-gray-400 block mb-1">Factory Location</label>
        <select x-model="builder.location" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-sm outline-none focus:border-indigo">
          <option value="gujarat">Gujarat</option>
          <option value="tamilnadu">Tamil Nadu</option>
          <option value="maharashtra">Maharashtra</option>
        </select>
      </div>
    </div>
    <div class="glass rounded-lg p-4 text-center">
      <div class="text-xs text-gray-400 mb-1">Estimated Carbon Footprint</div>
      <div class="text-3xl font-bold" :class="builderScore()<3?'text-teal':builderScore()<5?'text-amber':'text-red-400'" x-text="builderScore().toFixed(1)+' kg CO‚ÇÇe/kg'"></div>
      <div class="flex justify-center gap-4 mt-2 text-[11px] text-gray-500">
        <span>Steps: <span class="text-white" x-text="'+'+((builder.steps-3)*0.4).toFixed(1)"></span></span>
        <span>Energy: <span class="text-white" x-text="builder.energy==='grid'?'+1.8':builder.energy==='mixed'?'+0.9':'+0.2'"></span></span>
        <span>Location: <span class="text-white" x-text="builder.location==='gujarat'?'+0.6':builder.location==='tamilnadu'?'+0.3':'+0.5'"></span></span>
      </div>
    </div>
  </div>
</div>

<!-- Carbon Certificate -->
<div x-show="gTab==='cert'" x-cloak>
  <div class="glass rounded-xl p-6 border-l-4 border-teal max-w-lg mx-auto glow-teal">
    <!-- Header -->
    <div class="flex justify-between items-start mb-1">
      <div>
        <div class="text-[10px] tracking-widest text-gray-500 uppercase">Scimplify GreenScore‚Ñ¢</div>
        <div class="text-xs text-teal font-medium mt-1">PRODUCT CARBON FOOTPRINT CERTIFICATE</div>
      </div>
      <div class="w-14 h-14 rounded-lg bg-white/5 border border-white/10 flex items-center justify-center text-[9px] text-gray-500 text-center leading-tight">QR<br>Code</div>
    </div>
    <div class="border-b border-white/10 mb-4 pb-2">
      <div class="text-lg font-bold" x-text="selectedProduct"></div>
      <div class="text-[11px] text-gray-500" x-text="certCAS[selectedProduct]||'CAS N/A'"></div>
    </div>

    <!-- Metrics -->
    <div class="grid grid-cols-2 gap-4 text-sm mb-4">
      <div><span class="text-gray-400 text-xs block">Synthesis Route</span>Scimplify Optimized (<span x-text="productData[selectedProduct]?.opt.steps||5"></span>-step)</div>
      <div><span class="text-gray-400 text-xs block">GreenScore Grade</span><span class="font-bold text-lg" :class="productData[selectedProduct]?.opt.grade==='A+'?'text-teal':'text-teal'" x-text="productData[selectedProduct]?.opt.grade||'A+'"></span></div>
      <div><span class="text-gray-400 text-xs block">Carbon Footprint</span><span class="font-semibold" x-text="(productData[selectedProduct]?.opt.co2||2.1)+' kg CO‚ÇÇe / kg'"></span></div>
      <div><span class="text-gray-400 text-xs block">Scope</span>Cradle-to-gate</div>
      <div><span class="text-gray-400 text-xs block">Issue Date</span><span x-text="new Date().toLocaleDateString()"></span></div>
      <div><span class="text-gray-400 text-xs block">Valid Until</span><span x-text="new Date(Date.now()+365*86400000).toLocaleDateString()"></span></div>
    </div>

    <!-- Methodology -->
    <div class="glass rounded-lg p-3 mb-4">
      <div class="text-[11px] text-gray-400 space-y-1">
        <div class="flex gap-2"><span class="text-teal">Methodology:</span> ISO 14067:2018 ‚Äî Carbon footprint of products</div>
        <div class="flex gap-2"><span class="text-teal">Database:</span> ecoinvent 3.9.1 + Scimplify proprietary factory data</div>
        <div class="flex gap-2"><span class="text-teal">Boundary:</span> Raw material extraction ‚Üí factory gate (excl. logistics)</div>
      </div>
    </div>

    <!-- Verification -->
    <div class="flex items-center gap-2 mb-4 p-2 rounded-lg bg-teal/10 border border-teal/20">
      <div class="w-6 h-6 rounded-full bg-teal flex items-center justify-center text-[11px] text-white font-bold">‚úì</div>
      <div>
        <div class="text-xs font-medium text-teal">Verification Status: Self-Declared (Phase 1)</div>
        <div class="text-[10px] text-gray-500">Third-party audit scheduled Q3 2026 ¬∑ T√úV S√úD</div>
      </div>
    </div>

    <!-- Certificate ID -->
    <div class="text-center text-[10px] text-gray-600 border-t border-white/10 pt-3 mb-3">
      Certificate ID: GS-2026-PYM-00142 ¬∑ Generated by Scimplify GreenScore‚Ñ¢ Engine v2.1
    </div>

    <!-- Action Buttons -->
    <div class="flex gap-2">
      <button @click="$dispatch('show-toast','Certificate PDF exported (demo)')" class="flex-1 bg-teal/20 hover:bg-teal/30 text-teal text-xs font-medium py-2 rounded-lg transition flex items-center justify-center gap-1">üìÑ Export PDF</button>
      <button @click="$dispatch('show-toast','Shareable link copied (demo)')" class="flex-1 bg-indigo/20 hover:bg-indigo/30 text-indigo text-xs font-medium py-2 rounded-lg transition flex items-center justify-center gap-1">üîó Share Link</button>
    </div>
  </div>
</div>

<!-- Portfolio Dashboard -->
<div x-show="gTab==='portfolio'" x-cloak>
  <div class="glass rounded-xl p-5 mb-4">
    <div class="flex flex-wrap items-center justify-between mb-4">
      <h3 class="font-semibold text-sm">Portfolio Carbon Dashboard</h3>
      <div class="flex gap-4 text-xs">
        <div class="text-center"><div class="text-gray-500">Your Avg</div><div class="text-teal font-bold text-lg">3.1</div><div class="text-gray-600">kg CO‚ÇÇ/kg</div></div>
        <div class="text-center"><div class="text-gray-500">Industry Avg</div><div class="text-amber font-bold text-lg">5.4</div><div class="text-gray-600">kg CO‚ÇÇ/kg</div></div>
        <div class="text-center"><div class="text-gray-500">vs Industry</div><div class="text-teal font-bold text-lg">-43%</div><div class="text-gray-600">below avg</div></div>
      </div>
    </div>
    <div class="overflow-x-auto">
      <table class="w-full text-xs">
        <thead><tr class="text-gray-500 border-b border-white/10"><th class="text-left py-2">Product</th><th class="text-center py-2">Grade</th><th class="text-right py-2">CO‚ÇÇ/kg</th><th class="text-center py-2">Trend</th><th class="text-right py-2">Annual tons</th><th class="text-right py-2">Total CO‚ÇÇ</th></tr></thead>
        <tbody>
          <template x-for="p in portfolio" :key="p.name">
            <tr class="border-b border-white/5">
              <td class="py-2 font-medium" x-text="p.name"></td>
              <td class="text-center"><span class="px-1.5 py-0.5 rounded text-[10px] font-bold" :class="p.grade==='A+'?'bg-teal/20 text-teal':p.grade==='A'?'bg-teal/20 text-teal':p.grade==='B+'?'bg-amber/20 text-amber':'bg-red-400/20 text-red-400'" x-text="p.grade"></span></td>
              <td class="text-right" x-text="p.co2"></td>
              <td class="text-center" x-text="p.trend==='up'?'üìà':p.trend==='down'?'üìâ':'‚û°Ô∏è'"></td>
              <td class="text-right text-gray-400" x-text="p.tons"></td>
              <td class="text-right font-medium" x-text="(p.co2*p.tons).toFixed(0)+' t'"></td>
            </tr>
          </template>
        </tbody>
      </table>
    </div>
    <div class="mt-4 pt-3 border-t border-white/10 flex justify-between items-center">
      <div class="text-xs text-gray-500">Total portfolio: <span class="text-white font-medium" x-text="portfolio.reduce((s,p)=>s+p.co2*p.tons,0).toFixed(0)+' tons CO‚ÇÇe/year'"></span></div>
      <button @click="$dispatch('show-toast','Portfolio report exported (demo)')" class="text-xs bg-teal/20 text-teal px-3 py-1 rounded-lg hover:bg-teal/30 transition">üìä Export Report</button>
    </div>
  </div>
</div>

<!-- How It Works -->
<div x-show="gTab==='how'" x-cloak class="fade-in space-y-4">

  <!-- Why Only Scimplify -->
  <div class="glass rounded-xl p-5">
    <h3 class="font-semibold text-sm mb-3 text-indigo">Why Only Scimplify Can Do This</h3>
    <p class="text-xs text-gray-400 mb-3">Most factories can't calculate product-level carbon footprints ‚Äî they lack energy meters on individual reactors, don't track raw material origins, and have no sustainability teams. Scimplify already has all the inputs as <span class="text-white font-medium">byproducts of their core business</span>:</p>
    <div class="grid md:grid-cols-2 gap-3">
      <div class="glass rounded-lg p-3 border-l-2 border-indigo">
        <div class="text-xs font-medium text-indigo mb-1">üß™ Synthesis Routes</div>
        <div class="text-[11px] text-gray-400">R&D team designs every route ‚Äî they know reactions, reagents, solvents, temperatures, pressures, steps, and byproducts. This gives the <span class="text-white">energy profile per step</span>.</div>
      </div>
      <div class="glass rounded-lg p-3 border-l-2 border-teal">
        <div class="text-xs font-medium text-teal mb-1">üè≠ Factory Audits</div>
        <div class="text-[11px] text-gray-400">465+ factories audited ‚Äî location (grid emission factor), energy sources (solar vs coal vs diesel), reactor types, waste treatment. <span class="text-white">Tamil Nadu on 60% renewables ‚â† Jharkhand on coal.</span></div>
      </div>
      <div class="glass rounded-lg p-3 border-l-2 border-amber">
        <div class="text-xs font-medium text-amber mb-1">üì¶ Raw Material Chain</div>
        <div class="text-[11px] text-gray-400">Scimplify sources inputs ‚Äî they know origin. China-sourced starting material has different embedded carbon than domestic. <span class="text-white">Standard databases (ecoinvent, GaBi) fill gaps.</span></div>
      </div>
      <div class="glass rounded-lg p-3 border-l-2 border-purple-400">
        <div class="text-xs font-medium text-purple-400 mb-1">üö¢ Logistics</div>
        <div class="text-[11px] text-gray-400">They handle shipping ‚Äî sea from Chennai to Rotterdam vs air from Mumbai to Tokyo. <span class="text-white">Sea: 0.01 kg CO‚ÇÇ/ton-km. Air: 0.5 kg CO‚ÇÇ/ton-km ‚Äî 50x difference.</span></div>
      </div>
    </div>
  </div>

  <!-- Four Calculation Blocks -->
  <div class="glass rounded-xl p-5">
    <h3 class="font-semibold text-sm mb-3 text-indigo">The Four-Block Calculation</h3>
    <div class="space-y-3">
      <div class="flex gap-3 items-start">
        <div class="w-8 h-8 shrink-0 rounded-lg bg-indigo/20 flex items-center justify-center text-xs font-bold text-indigo">1</div>
        <div>
          <div class="text-xs font-medium">Reaction Emissions</div>
          <div class="text-[11px] text-gray-400">Energy input per synthesis step (kWh of heating, cooling, stirring, distillation) √ó factory's grid emission factor (kg CO‚ÇÇ/kWh). Plus direct process emissions (e.g., decarboxylation releasing CO‚ÇÇ).</div>
        </div>
      </div>
      <div class="flex gap-3 items-start">
        <div class="w-8 h-8 shrink-0 rounded-lg bg-teal/20 flex items-center justify-center text-xs font-bold text-teal">2</div>
        <div>
          <div class="text-xs font-medium">Raw Material Embedded Carbon</div>
          <div class="text-[11px] text-gray-400">Each starting material carries upstream carbon. Sulfuric acid: ~0.1-0.2 kg CO‚ÇÇ/kg. Specialty intermediates: 5-10 kg CO‚ÇÇ/kg. Sourced from standard LCA databases, refined with actual supplier data over time.</div>
        </div>
      </div>
      <div class="flex gap-3 items-start">
        <div class="w-8 h-8 shrink-0 rounded-lg bg-amber/20 flex items-center justify-center text-xs font-bold text-amber">3</div>
        <div>
          <div class="text-xs font-medium">Factory Overhead</div>
          <div class="text-[11px] text-gray-400">Lighting, HVAC, water treatment, waste treatment ‚Äî allocated proportionally from factory-level energy bills across production volume.</div>
        </div>
      </div>
      <div class="flex gap-3 items-start">
        <div class="w-8 h-8 shrink-0 rounded-lg bg-purple-500/20 flex items-center justify-center text-xs font-bold text-purple-400">4</div>
        <div>
          <div class="text-xs font-medium">Logistics</div>
          <div class="text-[11px] text-gray-400">Weight √ó distance √ó mode emission factor. Standard calculation, Scimplify knows the exact shipping route for every order.</div>
        </div>
      </div>
    </div>
    <div class="mt-4 pt-3 border-t border-white/10 text-center">
      <div class="text-[11px] text-gray-500">Block 1 + Block 2 + Block 3 + Block 4 =</div>
      <div class="text-sm font-bold text-teal mt-1">Product Carbon Footprint (kg CO‚ÇÇe / kg)</div>
    </div>
  </div>

  <!-- The CBAM Savings Example -->
  <div class="glass rounded-xl p-5">
    <h3 class="font-semibold text-sm mb-3 text-indigo">üí∞ Why Buyers Care: The ‚Ç¨27K Example</h3>
    <div class="text-xs text-gray-400 mb-3">At ‚Ç¨75/ton CO‚ÇÇ under CBAM, carbon footprint directly hits the buyer's cost:</div>
    <div class="grid md:grid-cols-3 gap-4 text-center">
      <div class="glass rounded-lg p-3">
        <div class="text-xs text-gray-500 mb-1">Supplier A</div>
        <div class="text-lg font-bold text-amber">5.8 kg CO‚ÇÇ/kg</div>
        <div class="text-xs text-gray-500 mt-1">CBAM cost on 100 tons:</div>
        <div class="font-semibold text-amber">‚Ç¨42,340</div>
      </div>
      <div class="glass rounded-lg p-3">
        <div class="text-xs text-gray-500 mb-1">Supplier B (Scimplify)</div>
        <div class="text-lg font-bold text-teal">2.1 kg CO‚ÇÇ/kg</div>
        <div class="text-xs text-gray-500 mt-1">CBAM cost on 100 tons:</div>
        <div class="font-semibold text-teal">‚Ç¨15,330</div>
      </div>
      <div class="glass rounded-lg p-3 border border-teal/30">
        <div class="text-xs text-gray-500 mb-1">Buyer Saves</div>
        <div class="text-2xl font-bold text-teal">‚Ç¨27,010</div>
        <div class="text-xs text-gray-500 mt-1">per 100-ton order</div>
        <div class="text-[10px] text-teal">Just by choosing lower-carbon supplier</div>
      </div>
    </div>
  </div>

  <!-- Verification & Moat -->
  <div class="grid md:grid-cols-2 gap-4">
    <div class="glass rounded-xl p-5">
      <h3 class="font-semibold text-sm mb-2">üõ°Ô∏è Verification Path</h3>
      <div class="space-y-2 text-[11px] text-gray-400">
        <div class="flex gap-2"><span class="text-teal">Phase 1:</span> Self-declared, ISO 14067 methodology. Top 50 products. Directionally useful.</div>
        <div class="flex gap-2"><span class="text-amber">Phase 2:</span> Energy monitoring at active factories. Real data replaces estimates.</div>
        <div class="flex gap-2"><span class="text-indigo">Phase 3:</span> Third-party certification (T√úV/SGS/Bureau Veritas). Methodology audited.</div>
        <div class="flex gap-2"><span class="text-teal">Phase 4:</span> "Carbon optimization as a service" ‚Äî premium upsell.</div>
      </div>
    </div>
    <div class="glass rounded-xl p-5">
      <h3 class="font-semibold text-sm mb-2">üè∞ The Data Moat</h3>
      <div class="text-[11px] text-gray-400 space-y-2">
        <p>Anyone can multiply emission factors. Nobody else has the <span class="text-white font-medium">accumulation</span> of actual factory + route + logistics data across hundreds of products and facilities.</p>
        <p>Every calculation makes the next one more accurate. After 500 products ‚Üí <span class="text-teal font-medium">proprietary emission database for Indian specialty chemicals</span> that doesn't exist anywhere else.</p>
        <p class="text-white font-medium">Virtuous cycle: better route ‚Üí lower carbon ‚Üí more EU orders ‚Üí more revenue ‚Üí fund more R&D ‚Üí even better routes.</p>
      </div>
    </div>
  </div>

  <!-- Product Listing Preview -->
  <div class="glass rounded-xl p-5">
    <h3 class="font-semibold text-sm mb-3 text-indigo">üìã What It Looks Like on ATOMS</h3>
    <div class="glass rounded-lg p-4 max-w-sm mx-auto border border-white/10">
      <div class="font-semibold text-sm mb-2">Pymetrozine</div>
      <div class="space-y-1 text-xs">
        <div class="flex justify-between"><span class="text-gray-400">Purity</span><span>98%</span></div>
        <div class="flex justify-between"><span class="text-gray-400">CAS</span><span>123312-89-0</span></div>
        <div class="flex justify-between"><span class="text-gray-400">Price</span><span>$42/kg</span></div>
        <div class="flex justify-between"><span class="text-gray-400">Lead time</span><span>4 weeks</span></div>
        <div class="flex justify-between border-t border-white/10 pt-1 mt-1">
          <span class="text-gray-400">Carbon footprint</span>
          <span class="text-teal font-semibold">2.1 kg CO‚ÇÇe/kg <span class="text-[9px] text-gray-500">(ISO 14067)</span></span>
        </div>
      </div>
      <div class="mt-2 text-[10px] text-gray-500 italic">No other marketplace shows this today.</div>
    </div>
  </div>

</div>

<!-- CBAM Calculator -->
<div x-show="gTab==='cbam'" x-cloak>
  <div class="glass rounded-xl p-6">
    <h3 class="font-semibold text-sm mb-4">CBAM Impact Calculator</h3>
    <div class="grid md:grid-cols-3 gap-4 mb-4">
      <div><label class="text-xs text-gray-400 block mb-1">Import Volume (tons)</label><input x-model.number="cbamTons" type="number" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo" placeholder="100"></div>
      <div>
        <label class="text-xs text-gray-400 block mb-1">Destination Country</label>
        <div class="flex flex-wrap gap-1.5">
          <template x-for="c in cbamCountries" :key="c.code">
            <button @click="cbamCountry=c.code" :class="cbamCountry===c.code?'bg-indigo/30 border-indigo text-white':'bg-white/5 border-white/10 text-gray-400'" class="border rounded-lg px-2 py-1 text-xs transition flex items-center gap-1">
              <span x-text="c.flag"></span><span x-text="c.name"></span>
            </button>
          </template>
        </div>
      </div>
      <div class="flex items-end">
        <div class="glass rounded-lg p-2 w-full text-center">
          <div class="text-[10px] text-gray-500">Carbon Price</div>
          <div class="text-lg font-bold text-indigo" x-text="'‚Ç¨'+currentCarbonPrice()+'/tCO‚ÇÇ'"></div>
          <div class="text-[10px] text-gray-500">EU ETS rate (all CBAM countries)</div>
        </div>
      </div>
    </div>
    <div x-show="cbamTons>0" class="grid md:grid-cols-2 gap-4">
      <div class="glass rounded-lg p-4 border-l-2 border-amber">
        <div class="text-xs text-gray-400 mb-1">Traditional Route</div>
        <div class="text-xl font-bold text-amber" x-text="'‚Ç¨'+(cbamTons*5.8*currentCarbonPrice()).toLocaleString()"></div>
        <div class="text-xs text-gray-500" x-text="'@ 5.8 tCO‚ÇÇ/ton √ó ‚Ç¨'+currentCarbonPrice()+'/tCO‚ÇÇ'"></div>
      </div>
      <div class="glass rounded-lg p-4 border-l-2 border-teal">
        <div class="text-xs text-gray-400 mb-1">Scimplify Optimized</div>
        <div class="text-xl font-bold text-teal" x-text="'‚Ç¨'+(cbamTons*2.1*currentCarbonPrice()).toLocaleString()"></div>
        <div class="text-xs text-gray-500" x-text="'@ 2.1 tCO‚ÇÇ/ton √ó ‚Ç¨'+currentCarbonPrice()+'/tCO‚ÇÇ'"></div>
      </div>
    </div>
    <div x-show="cbamTons>0" class="mt-4 text-center">
      <div class="text-sm text-gray-400">Potential Savings</div>
      <div class="text-2xl font-bold text-teal" x-text="'‚Ç¨'+(cbamTons*(5.8-2.1)*currentCarbonPrice()).toLocaleString()"></div>
      <div class="text-xs text-gray-500 mt-1" x-text="'Importing to '+cbamCountries.find(c=>c.code===cbamCountry)?.name+' at ‚Ç¨'+currentCarbonPrice()+'/tCO‚ÇÇ'"></div>
    </div>
  </div>
</div>
</div>

</main>
</div><!-- end products mode flex -->

</div><!-- end pt-14 -->

<script>
function app(){return{
  mode:'roadmap',
  activeProduct:2,
  products:[
    {id:2,icon:'üìã',name:'IONS Project Hub',shortName:'IONS Hub',tagline:'End-to-end project tracking for custom chemistry',revenue:'‚Çπ2-5Cr/yr',icp:'R&D teams, project managers',analogy:'Monday.com for chemistry',tier:'Must Build'},
    {id:5,icon:'üõí',name:'ATOMS Commerce',shortName:'ATOMS',tagline:'Self-serve catalog, instant quotes, online ordering',revenue:'‚Çπ5-15Cr/yr',icp:'Lab managers, small buyers',analogy:'Amazon Business for chemicals',tier:'Must Build'},
    {id:3,icon:'üï∏Ô∏è',name:'ChemGraph',shortName:'ChemGraph',tagline:'Network intelligence across manufacturers, products, customers',revenue:'‚Çπ1-3Cr/yr',icp:'Strategy teams, supply chain',analogy:'Palantir for chemicals',tier:'Build Next'},
    {id:4,icon:'üõ°Ô∏è',name:'ComplianceOS',shortName:'ComplianceOS',tagline:'Automated compliance, SDS generation, gap analysis',revenue:'‚Çπ1-2Cr/yr',icp:'Quality & regulatory teams',analogy:'Vanta for chemical compliance',tier:'Build Next'},
    {id:6,icon:'üå±',name:'GreenScore',shortName:'GreenScore',tagline:'Carbon scoring, route comparison, CBAM readiness',revenue:'‚Çπ1-3Cr/yr',icp:'EU buyers, ESG teams',analogy:'EcoVadis for synthesis routes',tier:'Build on Traction'},
    {id:1,icon:'üîç',name:'RFQ Intelligence + China+1',shortName:'RFQ Intel',tagline:'AI-powered manufacturer matching and China+1 switching',revenue:'‚Çπ3-8Cr/yr',icp:'Chemical buyers, procurement heads',analogy:'Alibaba RFQ + AI matching',tier:'Build on Traction'},
  ],
  init(){}
}}

function revenueModel(){return{
  products:[
    {
      id:'ions', icon:'üìã', shortName:'IONS Hub', tier:'Must Build', color:'tier-must',
      enabled:true, startMonth:1, duration:6,
      assumption:15, assumptionMin:5, assumptionMax:40, assumptionStep:1,
      assumptionLabel:'Projects/scientist/yr', assumptionUnit:'',
      investmentL:30, // lakhs
      rev12:0, rev24:0,
      revenueLogic:'Revenue = additional projects enabled √ó avg project value (‚Çπ25L). Scientists handle 3-5x more projects. Not direct SaaS ‚Äî capacity unlock on core business.',
      calcRev(month){
        if(month < this.startMonth+this.duration) return 0;
        const monthsLive = month - (this.startMonth+this.duration);
        const extraProjects = Math.min(this.assumption, 5 + monthsLive*0.5) - 5; // projects above baseline 5
        return Math.max(0, extraProjects * 25 / 12); // ‚Çπ25L per project, monthly
      }
    },
    {
      id:'atoms', icon:'üõí', shortName:'ATOMS Commerce', tier:'Must Build', color:'tier-must',
      enabled:true, startMonth:2, duration:7,
      assumption:80, assumptionMin:20, assumptionMax:300, assumptionStep:10,
      assumptionLabel:'Orders/month', assumptionUnit:'',
      investmentL:50,
      rev12:0, rev24:0,
      revenueLogic:'Revenue = monthly orders √ó avg order value (‚Çπ2L) √ó take-rate (3%). Starts with bulk reorders from existing customers, grows with new buyer acquisition.',
      calcRev(month){
        if(month < this.startMonth+this.duration) return 0;
        const monthsLive = month - (this.startMonth+this.duration);
        const orders = Math.min(this.assumption, 20 + monthsLive*8);
        return orders * 2 * 0.03; // orders √ó ‚Çπ2L AOV √ó 3% take-rate = lakhs/mo
      }
    },
    {
      id:'chemgraph', icon:'üï∏Ô∏è', shortName:'ChemGraph', tier:'Build Next', color:'tier-next',
      enabled:true, startMonth:7, duration:6,
      assumption:5, assumptionMin:0, assumptionMax:20, assumptionStep:1,
      assumptionLabel:'Extra deals/quarter', assumptionUnit:'',
      investmentL:80,
      rev12:0, rev24:0,
      revenueLogic:'Phase 1: Internal BD engine. Revenue = additional deals surfaced via cross-sell, supply risk alerts, China+1 detection √ó avg deal value (‚Çπ30L). Not SaaS ‚Äî core business uplift.',
      calcRev(month){
        if(month < this.startMonth+this.duration) return 0;
        const monthsLive = month - (this.startMonth+this.duration);
        const dealsPerMonth = Math.min(this.assumption, 1 + monthsLive*0.3) / 3;
        return dealsPerMonth * 30; // deals/mo √ó ‚Çπ30L per deal
      }
    },
    {
      id:'compliance', icon:'üõ°Ô∏è', shortName:'ComplianceOS', tier:'Build Next', color:'tier-next',
      enabled:true, startMonth:8, duration:5,
      assumption:50, assumptionMin:10, assumptionMax:150, assumptionStep:5,
      assumptionLabel:'Paying facilities', assumptionUnit:'',
      investmentL:60,
      rev12:0, rev24:0,
      revenueLogic:'Revenue = paying facilities √ó avg ‚Çπ6K/mo (cert tracking + SDS). Free gap analysis onboards supply ‚Üí paid tier upsell. Clearest external SaaS revenue.',
      calcRev(month){
        if(month < this.startMonth+this.duration) return 0;
        const monthsLive = month - (this.startMonth+this.duration);
        const facilities = Math.min(this.assumption, 5 + monthsLive*3);
        return facilities * 0.06; // facilities √ó ‚Çπ6K/mo = lakhs/mo
      }
    },
    {
      id:'green', icon:'üå±', shortName:'GreenScore', tier:'Build on Traction', color:'tier-traction',
      enabled:true, startMonth:10, duration:6,
      assumption:30, assumptionMin:5, assumptionMax:100, assumptionStep:5,
      assumptionLabel:'Carbon reports/yr', assumptionUnit:'',
      investmentL:40,
      rev12:0, rev24:0,
      revenueLogic:'Revenue = bundled free with China+1 projects (drives deal value) + standalone carbon reports post-CBAM (‚Çπ1.5L each). Regulatory tailwind from 2027.',
      calcRev(month){
        if(month < this.startMonth+this.duration) return 0;
        const monthsLive = month - (this.startMonth+this.duration);
        const reportsPerMonth = Math.min(this.assumption, 2 + monthsLive*1.5) / 12;
        return reportsPerMonth * 1.5; // reports/mo √ó ‚Çπ1.5L each
      }
    },
    {
      id:'rfq', icon:'üîç', shortName:'RFQ Intel', tier:'Build on Traction', color:'tier-traction',
      enabled:false, startMonth:12, duration:6,
      assumption:10, assumptionMin:2, assumptionMax:30, assumptionStep:1,
      assumptionLabel:'China+1 reports/yr', assumptionUnit:'',
      investmentL:35,
      rev12:0, rev24:0,
      revenueLogic:'Revenue = China+1 assessment reports √ó ‚Çπ3L each (productized consulting). Internal ops acceleration is bonus but not monetized. Subscription model only at 2000+ manufacturers.',
      calcRev(month){
        if(month < this.startMonth+this.duration) return 0;
        const monthsLive = month - (this.startMonth+this.duration);
        const reportsPerMonth = Math.min(this.assumption, 1 + monthsLive*0.5) / 12;
        return reportsPerMonth * 3; // reports/mo √ó ‚Çπ3L each
      }
    },
  ],
  totalRev6:0, totalRev12:0, totalRev24:0, totalInvestment:0, enabledCount:0, maxRev24:0,
  recalc(){
    this.totalRev6=0; this.totalRev12=0; this.totalRev24=0; this.totalInvestment=0; this.enabledCount=0; this.maxRev24=0;
    this.products.forEach(p=>{
      if(p.enabled){
        p.rev12 = p.calcRev(12);
        p.rev24 = p.calcRev(24);
        const rev6 = p.calcRev(6);
        this.totalRev6 += rev6;
        this.totalRev12 += p.rev12;
        this.totalRev24 += p.rev24;
        this.totalInvestment += p.investmentL;
        this.enabledCount++;
        if(p.rev24 > this.maxRev24) this.maxRev24 = p.rev24;
      } else {
        p.rev12=0; p.rev24=0;
      }
    });
  },
  formatLakhs(v){
    if(v>=100) return (v/100).toFixed(1)+'Cr';
    if(v>=1) return v.toFixed(1)+'L';
    if(v>0) return (v*100).toFixed(0)+'K';
    return '0';
  }
}}

function rfqApp(){return{
  form:{compound:'',cas:'',qty:'',purity:'',certs:[],timeline:'3',china1:false,chinaSupplier:'',chinaPrice:'',chinaLead:''},
  matching:false,matchingStep:'',showResults:false,showReport:false,matchResults:[],
  costRange:[38,52],cbamTons:100,cbamPrice:75,reportId:Math.floor(Math.random()*9000+1000),
  timelineSteps:[],
  toggleCert(c){let i=this.form.certs.indexOf(c);i>-1?this.form.certs.splice(i,1):this.form.certs.push(c)},
  fillDemo(){
    this.form={compound:'Pymetrozine',cas:'123312-89-0',qty:500,purity:98,certs:['FDA','REACH'],timeline:'3',china1:true,chinaSupplier:'Zhejiang Heben Pesticide',chinaPrice:45,chinaLead:8};
  },
  buildTimeline(){
    const base=new Date();const tl=parseInt(this.form.timeline)||3;
    const add=(w)=>{const d=new Date(base);d.setDate(d.getDate()+w*7);return d.toLocaleDateString('en-US',{month:'short',year:'2-digit'})};
    this.timelineSteps=[
      {icon:'üìç',name:'Current',duration:'Now',date:add(0)},
      {icon:'üî¨',name:'Qualification',duration:'2-4 weeks',date:add(3)},
      {icon:'‚öóÔ∏è',name:'Pilot Batch',duration:'4-6 weeks',date:add(3+5)},
      {icon:'üè≠',name:'Scale-Up',duration:'6-8 weeks',date:add(3+5+7)},
      {icon:'‚úÖ',name:'Production',duration:'Ongoing',date:add(3+5+7+Math.max(0,(tl*4)-15))},
    ];
  },
  submitRFQ(){
    this.matching=true;this.showResults=false;this.showReport=false;
    this.reportId=Math.floor(Math.random()*9000+1000);
    const steps=['Scanning 465 manufacturer profiles...','Evaluating chemistry capabilities...','Checking compliance certifications...','Scoring capacity match...','Generating feasibility report...'];
    let si=0;this.matchingStep=steps[0];
    const iv=setInterval(()=>{si++;if(si<steps.length)this.matchingStep=steps[si];else clearInterval(iv)},400);

    const mfrs=[
      {name:"Gujarat Fluorochemicals",location:"Ahmedabad, Gujarat",certs:["FDA","ISO 9001","ISO 14001","REACH","CGMP"],baseCap:95,baseChem:92,baseComp:90,detail:{reactors:"Glass-lined, SS316",capacityMT:250,capabilities:"Hydrogenation, Fluorination",priceKg:38,trackRecord:"Completed 18 projects in Agrochemicals, avg 98.4% purity. On-time delivery 94%."}},
      {name:"Anand Chemtex",location:"Vadodara, Gujarat",certs:["FDA","GMP","ISO 9001","REACH"],baseCap:88,baseChem:87,baseComp:82,detail:{reactors:"Glass-lined, Hastelloy",capacityMT:200,capabilities:"Grignard, Hydrogenation",priceKg:42,trackRecord:"Completed 12 projects in Agrochemicals & Pharma, avg 98.1% purity. On-time delivery 91%."}},
      {name:"Navi Organics",location:"Hyderabad, Telangana",certs:["FDA","GMP","CGMP","ISO 9001","REACH"],baseCap:81,baseChem:82,baseComp:78,detail:{reactors:"SS316, Glass-lined",capacityMT:175,capabilities:"Catalytic hydrogenation, Condensation",priceKg:44,trackRecord:"Completed 9 projects in Pharma intermediates, avg 97.8% purity. On-time delivery 88%."}},
      {name:"Deccan Fine Chemicals",location:"Pune, Maharashtra",certs:["GMP","CGMP","ISO 9001","ISO 14001"],baseCap:74,baseChem:77,baseComp:70,detail:{reactors:"Glass-lined",capacityMT:120,capabilities:"Oxidation, Esterification",priceKg:48,trackRecord:"Completed 7 projects in Fine Chemicals, avg 97.2% purity. On-time delivery 85%."}},
      {name:"Sree Krishna Pharma",location:"Hyderabad, Telangana",certs:["ISO 9001","ISO 14001","ISO 45001"],baseCap:67,baseChem:72,baseComp:62,detail:{reactors:"SS316",capacityMT:80,capabilities:"Amination, Chlorination",priceKg:51,trackRecord:"Completed 5 projects in Specialty Chemicals, avg 96.5% purity. On-time delivery 82%."}},
    ];

    setTimeout(()=>{
      const qty=parseFloat(this.form.qty)||100;
      const reqCerts=this.form.certs;
      this.matchResults=mfrs.map((m)=>{
        let cap=m.baseCap, chem=m.baseChem, comp=m.baseComp;
        // Capacity: penalize small factories for large qty
        if(qty>500 && m.detail.capacityMT<150) cap=Math.max(40,cap-20);
        else if(qty>1000 && m.detail.capacityMT<250) cap=Math.max(35,cap-25);
        if(qty<=100 && m.detail.capacityMT>200) cap=Math.min(99,cap+5);
        // Compliance: penalize missing required certs
        if(reqCerts.length>0){
          const matched=reqCerts.filter(c=>m.certs.some(mc=>mc.toUpperCase().includes(c.toUpperCase()))).length;
          const ratio=matched/reqCerts.length;
          comp=Math.round(comp*ratio*0.6 + comp*0.4); // 60% weight on cert match
          if(ratio<0.5) comp=Math.max(30,comp-15);
        }
        // Small random variation
        cap=Math.min(99,cap+Math.floor(Math.random()*5-2));
        chem=Math.min(99,chem+Math.floor(Math.random()*5-2));
        comp=Math.min(99,comp+Math.floor(Math.random()*5-2));
        const overall=Math.min(99,Math.round((cap+chem+comp)/3));
        return{...m,capacity:cap,chemistry:chem,compliance:comp,overall,expanded:false};
      });
      // Sort by overall descending
      this.matchResults.sort((a,b)=>b.overall-a.overall);
      // Compute cost range from top results
      const prices=this.matchResults.slice(0,3).map(m=>m.detail.priceKg);
      this.costRange=[Math.min(...prices),Math.max(...prices)];
      this.buildTimeline();
      this.matching=false;this.showResults=true;
    },2200);
  }
}}

function ionsApp(){
  const milestones=['Discovery','Feasibility','Lab Scale','Pilot','Tech Transfer','Qualification','Production'];
  function makeMilestones(activeIdx){return milestones.map((m,i)=>({name:m,status:i<activeIdx?'done':i===activeIdx?'active':'pending',date:i<activeIdx?'2025-'+(i+7).toString().padStart(2,'0'):'‚Äî'}))}
  function makeDocs(type){
    const base=[{icon:'üìÑ',name:'Project Brief.pdf',size:'245 KB',date:'Sep 5, 2025',type:'Brief'},{icon:'üß™',name:'Synthesis Route.pdf',size:'1.2 MB',date:'Sep 12, 2025',type:'SOP'}];
    if(type>1) base.push({icon:'üìä',name:'Analytical Report.xlsx',size:'890 KB',date:'Oct 8, 2025',type:'Report'});
    if(type>2) base.push({icon:'üìã',name:'Recipe v3.pdf',size:'430 KB',date:'Nov 1, 2025',type:'Recipe'},{icon:'‚úÖ',name:'Customer Specs.pdf',size:'310 KB',date:'Sep 2, 2025',type:'Specs'});
    return base;
  }
  return{
    selectedProject:null,showNewProject:false,showCreateForm:false,detailTab:'milestones',
    newProject:{template:'',templateIcon:'',templateDesc:'',molecule:'',purity:'',volume:'',timeline:''},
    templates:[
      {name:'Route Optimization',icon:'üß™',desc:'Optimize synthesis route for cost & yield'},
      {name:'Custom Molecule',icon:'üî¨',desc:'Build a new molecule to customer specs'},
      {name:'China+1 Switch',icon:'üîÑ',desc:'Replace China-sourced intermediate'}
    ],
    scientists:[{name:'Dr. Ravi',count:8},{name:'Dr. Prem',count:6},{name:'Dr. Kumar',count:4}],
    ionsProjects:[
      {id:1,name:'Pymetrozine Route Optimization',stage:'Tech Transfer',complete:70,scientist:'Dr. Ravi',milestones:makeMilestones(4),samples:[{id:'S-001',sent:'Sep 15',status:'Approved',flash:''},{id:'S-002',sent:'Oct 20',status:'Approved',flash:''},{id:'S-003',sent:'Nov 10',status:'Pending',flash:''}],iterations:['V1: Purity 95% ‚Äî rejected by client','V2: Modified catalyst, temp 180¬∞C ‚Äî 97.5%','V3: Optimized temp to 165¬∞C ‚Äî 98.2% ‚úì Approved'],activity:[{date:'Sep 10',text:'Project created from Route Optimization template',type:'info'},{date:'Sep 15',text:'Sample S-001 shipped to customer',type:'shipped'},{date:'Sep 28',text:'Sample S-001 received by customer',type:'received'},{date:'Oct 5',text:'S-001 approved ‚Äî purity 98.2%',type:'approved'},{date:'Oct 20',text:'Sample S-002 shipped',type:'shipped'},{date:'Nov 1',text:'S-002 approved',type:'approved'},{date:'Nov 10',text:'Sample S-003 shipped ‚Äî awaiting feedback',type:'shipped'}],documents:makeDocs(3)},
      {id:2,name:'Custom Musk ‚Äî Sciolide Variant',stage:'Sample Testing',complete:45,scientist:'Dr. Prem',milestones:makeMilestones(2),samples:[{id:'S-010',sent:'Dec 1',status:'Pending',flash:''},{id:'S-011',sent:'Jan 5',status:'Rejected',flash:''}],iterations:['V1: Initial synthesis ‚Äî odor profile mismatch','V2: Adjusted side chain ‚Äî 85% match, iterating'],activity:[{date:'Nov 5',text:'Project created from Custom Molecule template',type:'info'},{date:'Dec 1',text:'Sample S-010 shipped',type:'shipped'},{date:'Dec 15',text:'S-010 pending customer review',type:'info'},{date:'Jan 5',text:'Sample S-011 shipped',type:'shipped'},{date:'Jan 18',text:'S-011 rejected ‚Äî odor profile 85%, need >95%',type:'rejected'}],documents:makeDocs(2)},
      {id:3,name:'Fexo Chloro Alternative Route',stage:'Lab Validation',complete:30,scientist:'Dr. Kumar',milestones:makeMilestones(2),samples:[{id:'S-020',sent:'Jan 15',status:'Pending',flash:''}],iterations:['V1: Chlorination route A ‚Äî yield 62%, needs improvement'],activity:[{date:'Dec 10',text:'Project created from Route Optimization template',type:'info'},{date:'Jan 2',text:'Feasibility study complete',type:'approved'},{date:'Jan 15',text:'Sample S-020 shipped for testing',type:'shipped'}],documents:makeDocs(1)},
      {id:4,name:'CBAM Compliance ‚Äî EU Buyer',stage:'Complete ‚úì',complete:100,scientist:'Dr. Ravi',milestones:makeMilestones(7),samples:[{id:'S-030',sent:'Aug 1',status:'Approved',flash:''},{id:'S-031',sent:'Sep 10',status:'Approved',flash:''}],iterations:['V1: Full LCA completed','V2: Documentation reviewed ‚Äî approved by EU buyer ‚úì'],activity:[{date:'Jul 1',text:'Project created from China+1 Switch template',type:'info'},{date:'Jul 20',text:'LCA assessment completed',type:'approved'},{date:'Aug 1',text:'Sample S-030 shipped',type:'shipped'},{date:'Aug 15',text:'S-030 approved by EU buyer',type:'approved'},{date:'Sep 10',text:'Final sample S-031 shipped',type:'shipped'},{date:'Sep 25',text:'S-031 approved ‚Äî project complete ‚úì',type:'approved'}],documents:makeDocs(3)},
    ],
    get avgCompletion(){return Math.round(this.ionsProjects.reduce((s,p)=>s+p.complete,0)/this.ionsProjects.length)},
    get pendingSamples(){return this.ionsProjects.reduce((s,p)=>s+p.samples.filter(x=>x.status==='Pending').length,0)},
    get onTrack(){return this.ionsProjects.filter(p=>p.complete>=40||p.complete===100).length},
    get delayed(){return this.ionsProjects.filter(p=>p.complete<40&&p.complete!==100).length},
    selectTemplate(t){this.showNewProject=false;this.showCreateForm=true;this.newProject={template:t.name,templateIcon:t.icon,templateDesc:t.desc,molecule:'',purity:'',volume:'',timeline:''}},
    createProject(){
      const p={
        id:Date.now(),name:this.newProject.molecule+' ‚Äî '+this.newProject.template,
        stage:'Discovery',complete:5,scientist:this.scientists.reduce((a,b)=>a.count<=b.count?a:b).name,
        milestones:makeMilestones(0),
        samples:[],
        iterations:['Project created ‚Äî '+this.newProject.template+' template'],
        activity:[{date:'Today',text:'Project created: '+this.newProject.molecule+' ('+this.newProject.template+')',type:'info'},{date:'Today',text:'Target purity: '+this.newProject.purity+'% | Volume: '+this.newProject.volume+' MT | Timeline: '+this.newProject.timeline+' months',type:'info'}],
        documents:[{icon:'üìÑ',name:'Project Brief.pdf',size:'120 KB',date:'Today',type:'Brief'}]
      };
      this.ionsProjects.unshift(p);this.showCreateForm=false;this.selectedProject=p;this.detailTab='milestones';
    },
    sampleAction(s,status){
      s.status=status;s.flash='bg-white/10';
      const label=status==='Approved'?'approved':status==='Rejected'?'rejected':'revision requested';
      this.selectedProject.activity.push({date:'Now',text:s.id+' '+label+' by customer',type:status==='Approved'?'approved':status==='Rejected'?'rejected':'info'});
      setTimeout(()=>{s.flash=''},600);
    }
  }
}

function chemGraphApp(){
  const nodes=[
    {id:'m1',label:'Anand Chemtex',x:8,y:20,color:'#6366f1',type:'mfr',detail:{location:'Vadodara, Gujarat',certs:['FDA','ISO 9001','REACH'],capacity:'200 MT/yr',reactions:['Hydrogenation','Grignard','Friedel-Crafts']}},
    {id:'m2',label:'Navi Organics',x:6,y:45,color:'#6366f1',type:'mfr',detail:{location:'Hyderabad, Telangana',certs:['GMP','REACH'],capacity:'175 MT/yr',reactions:['Hydrogenation','Grignard']}},
    {id:'m3',label:'Gujarat Fluoro',x:12,y:70,color:'#6366f1',type:'mfr',detail:{location:'Ahmedabad, Gujarat',certs:['ISO 14001','ISO 9001'],capacity:'250 MT/yr',reactions:['Fluorination','Hydrogenation']}},
    {id:'m4',label:'Deccan Fine',x:22,y:10,color:'#6366f1',type:'mfr',detail:{location:'Pune, Maharashtra',certs:['CGMP','ISO 9001'],capacity:'150 MT/yr',reactions:['Oxidation','Esterification']}},
    {id:'m5',label:'Sree Krishna',x:4,y:85,color:'#6366f1',type:'mfr',detail:{location:'Vizag, Andhra Pradesh',certs:['ISO 9001'],capacity:'121 MT/yr',reactions:['Hydrogenation','Condensation']}},
    {id:'m6',label:'Surya Life Sci',x:18,y:42,color:'#6366f1',type:'mfr',detail:{location:'Mumbai, Maharashtra',certs:['FDA','HALAL','GMP'],capacity:'300 MT/yr',reactions:['Amidation','Hydrogenation','Suzuki coupling']}},
    {id:'m7',label:'Kaivin Chem',x:14,y:55,color:'#6366f1',type:'mfr',detail:{location:'Ankleshwar, Gujarat',certs:['ISO 9001'],capacity:'90 MT/yr',reactions:['Chlorination','Nitration']}},
    {id:'m8',label:'Raj Pharma',x:24,y:88,color:'#6366f1',type:'mfr',detail:{location:'Jaipur, Rajasthan',certs:['GMP','WHO-GMP'],capacity:'110 MT/yr',reactions:['Reduction','Acetylation']}},
    {id:'p1',label:'Pymetrozine',x:38,y:30,color:'#f97316',type:'prod',detail:{cas:'123312-89-0',price:'$42‚Äì51/kg',suppliers:['Anand Chemtex','Navi Organics','Gujarat Fluoro','Sree Krishna']}},
    {id:'p2',label:'Fexofenadine',x:42,y:15,color:'#f97316',type:'prod',detail:{cas:'153439-40-8',price:'$4,200‚Äì4,800/kg',suppliers:['Anand Chemtex','Deccan Fine','Surya Life Sci']}},
    {id:'p3',label:'TiO‚ÇÇ',x:32,y:55,color:'#f97316',type:'prod',detail:{cas:'13463-67-7',price:'$480‚Äì520/kg',suppliers:['Gujarat Fluoro','Kaivin Chem']}},
    {id:'p4',label:'Salicylic Acid',x:44,y:65,color:'#f97316',type:'prod',detail:{cas:'69-72-7',price:'$600‚Äì700/kg',suppliers:['Navi Organics','Deccan Fine','Raj Pharma']}},
    {id:'p5',label:'Citric Acid',x:36,y:82,color:'#f97316',type:'prod',detail:{cas:'77-92-9',price:'$150‚Äì200/kg',suppliers:['Sree Krishna','Raj Pharma','Surya Life Sci']}},
    {id:'p6',label:'Zinc Stearate',x:48,y:48,color:'#f97316',type:'prod',detail:{cas:'557-05-1',price:'$300‚Äì380/kg',suppliers:['Kaivin Chem','Gujarat Fluoro']}},
    {id:'c1',label:'EU Pharma Co',x:68,y:12,color:'#22c55e',type:'cust',detail:{region:'Frankfurt, Germany',volume:'$2.4M/yr',products:['Pymetrozine','Fexofenadine']}},
    {id:'c2',label:'US Agri Corp',x:78,y:35,color:'#22c55e',type:'cust',detail:{region:'Iowa, USA',volume:'$1.8M/yr',products:['Pymetrozine','TiO‚ÇÇ','Citric Acid']}},
    {id:'c3',label:'JP Cosmetics',x:72,y:70,color:'#22c55e',type:'cust',detail:{region:'Osaka, Japan',volume:'$950K/yr',products:['Salicylic Acid','Fexofenadine','Zinc Stearate']}},
    {id:'c4',label:'BR Nutri Ltd',x:82,y:58,color:'#22c55e',type:'cust',detail:{region:'S√£o Paulo, Brazil',volume:'$1.1M/yr',products:['Citric Acid','TiO‚ÇÇ']}},
    {id:'c5',label:'IN Coatings',x:65,y:88,color:'#22c55e',type:'cust',detail:{region:'Chennai, India',volume:'$600K/yr',products:['TiO‚ÇÇ','Zinc Stearate']}},
    {id:'c6',label:'KR BioTech',x:88,y:18,color:'#22c55e',type:'cust',detail:{region:'Seoul, South Korea',volume:'$1.5M/yr',products:['Fexofenadine','Pymetrozine']}},
  ];
  const links=[
    ['m1','p1'],['m1','p2'],['m2','p1'],['m2','p4'],['m3','p3'],['m3','p1'],['m4','p2'],['m4','p4'],['m5','p1'],['m5','p5'],
    ['m6','p2'],['m6','p5'],['m7','p3'],['m7','p6'],['m8','p4'],['m8','p5'],['m3','p6'],
    ['p1','c1'],['p1','c2'],['p1','c6'],['p2','c1'],['p2','c3'],['p2','c6'],['p3','c2'],['p3','c4'],['p3','c5'],
    ['p4','c3'],['p5','c2'],['p5','c4'],['p6','c3'],['p6','c5']
  ];
  const lineData=links.map((l,i)=>{
    const a=nodes.find(n=>n.id===l[0]),b=nodes.find(n=>n.id===l[1]);
    return{id:i,x1:a.x+'%',y1:a.y+'%',x2:b.x+'%',y2:b.y+'%',from:l[0],to:l[1],highlighted:false,dimmed:false,animated:false}
  });
  return{
    graphNodes:nodes.map(n=>({...n,highlighted:false,dimmed:false})),
    graphLines:lineData,activeQuery:'',queryTitle:'',queryResult:'',
    searchTerm:'',selectedNode:'',detailPanel:false,detailTitle:'',detailContent:'',
    tooltipVisible:false,tooltipX:0,tooltipY:0,tooltipContent:'',
    _hoverLock:false,
    get visibleNodeCount(){return this.graphNodes.filter(n=>!n.dimmed).length},
    get visibleLineCount(){return this.graphLines.filter(l=>!l.dimmed).length},
    _resetGraph(){this.graphNodes.forEach(n=>{n.highlighted=false;n.dimmed=false});this.graphLines.forEach(l=>{l.highlighted=false;l.dimmed=false;l.animated=false})},
    _highlightConnected(nid,animate){
      const connected=new Set([nid]);
      const affLines=this.graphLines.filter(l=>l.from===nid||l.to===nid);
      affLines.forEach(l=>{l.highlighted=true;if(animate)l.animated=true;connected.add(l.from);connected.add(l.to)});
      this.graphNodes.forEach(n=>{if(connected.has(n.id))n.highlighted=true;else n.dimmed=true});
      this.graphLines.forEach(l=>{if(!l.highlighted)l.dimmed=true});
    },
    hoverNode(nid){
      if(this._hoverLock)return;
      this._resetGraph();
      this._highlightConnected(nid,false);
      const nd=this.graphNodes.find(n=>n.id===nid);
      this.tooltipX=nd.x;this.tooltipY=nd.y;this.tooltipVisible=true;
      const t=nd.type==='mfr'?'Manufacturer':nd.type==='prod'?'Product':'Customer';
      const conns=this.graphLines.filter(l=>l.from===nid||l.to===nid).length;
      this.tooltipContent='<span style="color:'+nd.color+'">'+t+'</span> ¬∑ '+conns+' connections';
    },
    unhoverNode(){
      if(this._hoverLock)return;
      this.tooltipVisible=false;
      if(!this.activeQuery&&!this.searchTerm)this._resetGraph();
      else if(this.searchTerm)this.applySearch();
    },
    clickNode(nid){
      this.selectedNode=nid;this._hoverLock=true;this.tooltipVisible=false;
      this._resetGraph();this._highlightConnected(nid,false);
      const nd=this.graphNodes.find(n=>n.id===nid);
      this.detailTitle=(nd.type==='mfr'?'üîµ ':nd.type==='prod'?'üü† ':'üü¢ ')+nd.label;
      const d=nd.detail;
      if(nd.type==='mfr')this.detailContent='<div><span class="text-gray-400">Location:</span> '+d.location+'</div><div><span class="text-gray-400">Certs:</span> '+d.certs.join(', ')+'</div><div><span class="text-gray-400">Capacity:</span> '+d.capacity+'</div><div><span class="text-gray-400">Reactions:</span> '+d.reactions.join(', ')+'</div>';
      else if(nd.type==='prod')this.detailContent='<div><span class="text-gray-400">CAS:</span> '+d.cas+'</div><div><span class="text-gray-400">Price Range:</span> '+d.price+'</div><div><span class="text-gray-400">Suppliers:</span> '+d.suppliers.join(', ')+'</div>';
      else this.detailContent='<div><span class="text-gray-400">Region:</span> '+d.region+'</div><div><span class="text-gray-400">Order Volume:</span> '+d.volume+'</div><div><span class="text-gray-400">Products:</span> '+d.products.join(', ')+'</div>';
      this.detailPanel=true;
    },
    closeDetail(){this.detailPanel=false;this.selectedNode='';this._hoverLock=false;this._resetGraph();if(this.searchTerm)this.applySearch()},
    applySearch(){
      this._resetGraph();this.activeQuery='';this.queryResult='';this.closeDetail();this._hoverLock=false;
      const s=this.searchTerm.toLowerCase().trim();
      if(!s)return;
      const match=this.graphNodes.find(n=>n.label.toLowerCase().includes(s));
      if(match)this._highlightConnected(match.id,false);
      else this.graphNodes.forEach(n=>n.dimmed=true);
    },
    runQuery(q){
      this.activeQuery=q;this.searchTerm='';this.closeDetail();this._hoverLock=false;
      this._resetGraph();
      const anim=true;
      if(q==='risk'){
        this.queryTitle='‚ö†Ô∏è Supply Risk: Anand Chemtex Offline';
        this._highlightConnected('m1',anim);
        this.queryResult='<div class="text-xs space-y-2"><div class="text-red-400 font-medium">2 products directly affected: Pymetrozine, Fexofenadine</div><div class="text-gray-400">Alternative manufacturers:</div><div>‚Ä¢ Navi Organics (Hyderabad) ‚Äî Hydrogenation, Grignard capable</div><div>‚Ä¢ Gujarat Fluorochemicals ‚Äî Hydrogenation capable, 250 MT capacity</div><div>‚Ä¢ Surya Life Sci (Mumbai) ‚Äî Fexofenadine via Suzuki coupling</div><div class="text-amber mt-2">‚ö†Ô∏è 4 customer orders at risk if not rerouted within 2 weeks</div></div>';
      } else if(q==='cost'){
        this.queryTitle='üí∞ Cost Benchmark: Pymetrozine';
        this._highlightConnected('p1',anim);
        this.queryResult='<table class="w-full text-xs"><thead><tr class="text-gray-500"><th class="text-left pb-1">Manufacturer</th><th class="text-right pb-1">Price/kg</th><th class="text-right pb-1">Capacity</th></tr></thead><tbody><tr class="border-t border-white/5"><td class="py-1">Anand Chemtex</td><td class="text-right text-teal">$42</td><td class="text-right">200 MT</td></tr><tr class="border-t border-white/5"><td class="py-1">Navi Organics</td><td class="text-right">$45</td><td class="text-right">175 MT</td></tr><tr class="border-t border-white/5"><td class="py-1">Gujarat Fluoro</td><td class="text-right">$48</td><td class="text-right">250 MT</td></tr><tr class="border-t border-white/5"><td class="py-1">Sree Krishna</td><td class="text-right text-red-400">$51</td><td class="text-right">121 MT</td></tr></tbody></table>';
      } else if(q==='capacity'){
        this.queryTitle='üè≠ Idle Hydrogenation Capacity';
        ['m1','m2','m3','m5','m6'].forEach(id=>{this.graphNodes.find(n=>n.id===id).highlighted=true});
        this.graphNodes.forEach(n=>{if(!n.highlighted)n.dimmed=true});
        this.queryResult='<div class="text-xs space-y-2"><div class="flex justify-between py-1 border-b border-white/5"><span>Surya Life Sci</span><span class="text-teal">80 MT idle</span></div><div class="flex justify-between py-1 border-b border-white/5"><span>Anand Chemtex</span><span class="text-teal">60 MT idle</span></div><div class="flex justify-between py-1 border-b border-white/5"><span>Navi Organics</span><span class="text-teal">40 MT idle</span></div><div class="flex justify-between py-1 border-b border-white/5"><span>Gujarat Fluoro</span><span class="text-amber">15 MT idle</span></div><div class="flex justify-between py-1 border-b border-white/5"><span>Sree Krishna</span><span class="text-amber">10 MT idle</span></div><div class="mt-2 text-gray-400">5 pending orders could utilize this capacity (est. ‚Çπ3.2Cr revenue)</div></div>';
      } else if(q==='china'){
        this.queryTitle='üîÑ China+1 Opportunities (>70% China Dependency)';
        ['p1','p2','p6'].forEach(id=>{const n=this.graphNodes.find(x=>x.id===id);n.highlighted=true});
        this.graphNodes.forEach(n=>{if(!n.highlighted)n.dimmed=true});
        this.queryResult='<div class="text-xs space-y-2"><div class="flex justify-between py-1 border-b border-white/5"><span>Pymetrozine</span><span class="text-red-400">82% China</span><span class="text-teal">4 Indian alternatives</span></div><div class="flex justify-between py-1 border-b border-white/5"><span>Fexofenadine Intermediate</span><span class="text-red-400">76% China</span><span class="text-teal">3 Indian alternatives</span></div><div class="flex justify-between py-1 border-b border-white/5"><span>Zinc Stearate</span><span class="text-amber">71% China</span><span class="text-teal">2 Indian alternatives</span></div><div class="mt-2 text-gray-400">Estimated switching revenue opportunity: $3.1M over 18 months</div></div>';
      } else if(q==='crosssell'){
        this.queryTitle='üîÑ Cross-Sell: EU Pharma Co also needs...';
        this._highlightConnected('c1',anim);
        this.queryResult='<div class="text-xs space-y-2"><div class="text-gray-400">EU Pharma Co currently buys: Pymetrozine, Fexofenadine</div><div class="font-medium text-teal mt-1">Recommended cross-sell opportunities:</div><div class="flex justify-between py-1 border-b border-white/5"><span>Salicylic Acid</span><span class="text-gray-400">via Deccan Fine</span><span class="text-teal">$180K potential</span></div><div class="flex justify-between py-1 border-b border-white/5"><span>Citric Acid</span><span class="text-gray-400">via Surya Life Sci</span><span class="text-teal">$95K potential</span></div><div class="flex justify-between py-1 border-b border-white/5"><span>TiO‚ÇÇ</span><span class="text-gray-400">via Gujarat Fluoro</span><span class="text-teal">$120K potential</span></div><div class="mt-2 text-gray-400">Based on similar customer purchase patterns (87% confidence)</div></div>';
      } else if(q==='anomaly'){
        this.queryTitle='üìä Price Anomaly: Above-Market Pricing Detected';
        ['m5','m7','m8'].forEach(id=>{const n=this.graphNodes.find(x=>x.id===id);n.highlighted=true});
        this.graphNodes.forEach(n=>{if(!n.highlighted)n.dimmed=true});
        this.queryResult='<div class="text-xs space-y-2"><div class="text-red-400 font-medium">3 pricing anomalies detected in last 30 days</div><table class="w-full mt-1"><thead><tr class="text-gray-500"><th class="text-left pb-1">Product</th><th class="text-left pb-1">Supplier</th><th class="text-right pb-1">Quoted</th><th class="text-right pb-1">Market Avg</th><th class="text-right pb-1">Œî</th></tr></thead><tbody><tr class="border-t border-white/5"><td class="py-1">Pymetrozine</td><td>Sree Krishna</td><td class="text-right">$51</td><td class="text-right text-gray-400">$45</td><td class="text-right text-red-400">+13%</td></tr><tr class="border-t border-white/5"><td class="py-1">TiO‚ÇÇ</td><td>Kaivin Chem</td><td class="text-right">$580</td><td class="text-right text-gray-400">$500</td><td class="text-right text-red-400">+16%</td></tr><tr class="border-t border-white/5"><td class="py-1">Salicylic Acid</td><td>Raj Pharma</td><td class="text-right">$740</td><td class="text-right text-gray-400">$650</td><td class="text-right text-red-400">+14%</td></tr></tbody></table><div class="mt-2 text-gray-400">üí° Negotiate or switch to alternative suppliers to save ~$85K/yr</div></div>';
      }
    }
  }
}

function complianceApp(){return{
  cTab:'certs',sdsPreview:false,sdsDownloaded:null,gapFacility:'anand',
  sdsForm:{name:'',cas:'',comp:'',hazard:'Irritant'},
  renewCert:null,renewStep:1,renewDate:'2025-06-15',
  alertImpact:null,
  remediationStarted:false,remediationPlan:[],
  onboardStep:1,onboardForm:{name:'',location:'',certs:[],segments:[]},onboardGaps:[],
  allCertTypes:['FDA','ISO 9001','ISO 14001','REACH','CGMP','GMP','HALAL','KOSHER'],
  buyerSegments:[
    {name:'US Pharma',required:['FDA','CGMP','ISO 9001']},
    {name:'EU Chemicals',required:['REACH','ISO 14001','ISO 9001']},
    {name:'Japan Pharma',required:['GMP','ISO 9001','ISO 14001']},
    {name:'Middle East Food',required:['HALAL','ISO 9001','GMP']},
    {name:'India Domestic',required:['ISO 9001','GMP']},
    {name:'US Agrochem',required:['FDA','ISO 14001','REACH']},
  ],
  alerts:[
    {text:'REACH Annex XIV updated ‚Äî 3 products affected. Review required by March 2025.',color:'border-amber',dismissed:false,assigned:false,impacts:['Pymetrozine ‚Äî EU registration affected','Sodium Fluoride ‚Äî requires updated dossier','Titanium Dioxide ‚Äî restricted use classification pending']},
    {text:'FDA registration renewal due in 45 days for Anand Chemtex facility.',color:'border-red-400',dismissed:false,assigned:false,impacts:['Anand Chemtex ‚Äî Vadodara facility','5 active product registrations at risk','Fexofenadine HCl export to US blocked if expired']},
    {text:'New GMP guidelines published ‚Äî voluntary compliance window: 6 months.',color:'border-indigo',dismissed:false,assigned:false,impacts:['All GMP-certified facilities need gap review','Navi Organics ‚Äî minor documentation update','Sree Krishna ‚Äî process validation update recommended']},
  ],
  certData:[
    {id:1,facility:'Anand Chemtex',type:'FDA',issued:'2023-06-15',expires:'2026-06-15',status:'Valid'},
    {id:2,facility:'Anand Chemtex',type:'ISO 9001',issued:'2022-01-10',expires:'2025-01-10',status:'Expired'},
    {id:3,facility:'Navi Organics',type:'GMP',issued:'2024-03-01',expires:'2027-03-01',status:'Valid'},
    {id:4,facility:'Navi Organics',type:'REACH',issued:'2023-09-20',expires:'2025-04-20',status:'Expiring'},
    {id:5,facility:'Deccan Fine',type:'CGMP',issued:'2024-01-15',expires:'2027-01-15',status:'Valid'},
    {id:6,facility:'Gujarat Fluoro',type:'ISO 14001',issued:'2023-11-01',expires:'2025-05-01',status:'Expiring'},
    {id:7,facility:'Sree Krishna',type:'ISO 9001',issued:'2024-06-01',expires:'2027-06-01',status:'Valid'},
    {id:8,facility:'Surya Life Sci',type:'HALAL',issued:'2024-02-10',expires:'2026-02-10',status:'Valid'},
  ],
  gapData:{
    anand:[{cert:'FDA',has:true},{cert:'ISO 9001',has:true},{cert:'ISO 14001',has:false,fix:'~3 months, audit required'},{cert:'REACH',has:true},{cert:'CGMP',has:false,fix:'~6 months, process upgrade needed'},{cert:'HALAL',has:false,fix:'~2 months, certification body visit'}],
    deccan:[{cert:'FDA',has:false,fix:'~6 months, facility upgrade needed'},{cert:'ISO 9001',has:true},{cert:'ISO 14001',has:true},{cert:'REACH',has:false,fix:'~4 months, registration pending'},{cert:'CGMP',has:true},{cert:'HALAL',has:false,fix:'~2 months'}],
    kaivin:[{cert:'FDA',has:false,fix:'~8 months, major upgrade'},{cert:'ISO 9001',has:true},{cert:'ISO 14001',has:false,fix:'~4 months'},{cert:'REACH',has:false,fix:'~5 months'},{cert:'CGMP',has:false,fix:'~6 months'},{cert:'HALAL',has:false,fix:'~2 months'}],
  },
  startRenewal(c){this.renewCert=c;this.renewStep=1;this.renewDate='2025-06-15'},
  completeRenewal(){
    let c=this.certData.find(x=>x.id===this.renewCert.id);
    if(c){c.status='Valid';c._renewed=true;c.issued=new Date().toISOString().split('T')[0];c.expires=new Date(Date.now()+3*365*86400000).toISOString().split('T')[0]}
    this.renewCert=null;this.renewStep=1;
  },
  showAlertImpact(alert){this.alertImpact={title:alert.text,impacts:alert.impacts}},
  startRemediation(){
    this.remediationStarted=true;
    this.remediationPlan=(this.gapData[this.gapFacility]||[]).filter(g=>!g.has).map(g=>({cert:g.cert,timeline:g.fix,stage:0}));
  },
  advanceRemediation(i){if(this.remediationPlan[i].stage<3)this.remediationPlan[i].stage++},
  generateOnboardGap(){
    let needed=new Set();
    this.buyerSegments.filter(s=>this.onboardForm.segments.includes(s.name)).forEach(s=>s.required.forEach(c=>needed.add(c)));
    let timings={FDA:'~6 months',ISO9001:'~3 months','ISO 9001':'~3 months','ISO 14001':'~4 months',REACH:'~5 months',CGMP:'~6 months',GMP:'~3 months',HALAL:'~2 months',KOSHER:'~2 months'};
    this.onboardGaps=[...needed].map(c=>({cert:c,has:this.onboardForm.certs.includes(c),est:timings[c]||'~3 months'}));
  },
  sdsSections(){
    let n=this.sdsForm.name||'[Product Name]',cas=this.sdsForm.cas||'[CAS Number]',h=this.sdsForm.hazard,comp=this.sdsForm.comp||'Active ingredient';
    const hd={
      Toxic:{signal:'Danger',hstat:'H300 ‚Äî Fatal if swallowed\nH310 ‚Äî Fatal in contact with skin\nH330 ‚Äî Fatal if inhaled',prec:'P260, P264, P284, P301+P310, P302+P350',fa:'Inhalation: Remove to fresh air IMMEDIATELY. Call poison center. Give artificial respiration if not breathing.\nSkin: Remove contaminated clothing. Rinse skin with water for 20+ min. Call poison center.\nEye: Rinse cautiously with water for 20 min. Remove contact lenses. Get emergency medical help.\nIngestion: Rinse mouth. Do NOT induce vomiting. Call poison center IMMEDIATELY.',ld50:'Acute Toxicity (Oral LD50): 50‚Äì200 mg/kg (rat) ‚Äî Category 3\nSkin Irritation: Category 1 ‚Äî Causes severe skin burns\nEye: Category 1 ‚Äî Causes serious eye damage\nCarcinogenicity: Under review (IARC Group 2B)',flash:'>200¬∞C',transport:'UN Number: UN 2811\nProper Shipping Name: Toxic solid, organic, n.o.s.\nClass: 6.1, Packing Group II\nADR/IMDG: Regulated ‚Äî requires hazard labels'},
      Flammable:{signal:'Danger',hstat:'H225 ‚Äî Highly flammable liquid and vapour\nH319 ‚Äî Causes serious eye irritation',prec:'P210, P233, P240, P241, P242, P280',fa:'Inhalation: Move to fresh air. If breathing is difficult, give oxygen.\nSkin: Wash with soap and water. Remove contaminated clothing.\nEye: Rinse with water for 15 min.\nIngestion: Rinse mouth. Do NOT induce vomiting if liquid ‚Äî aspiration hazard.',ld50:'Acute Toxicity (Oral LD50): >2000 mg/kg (rat)\nSkin Irritation: Category 2\nEye Irritation: Category 2A\nCarcinogenicity: Not classified (IARC, NTP)',flash:'23‚Äì60¬∞C (varies by formulation)',transport:'UN Number: UN 1993\nProper Shipping Name: Flammable liquid, n.o.s.\nClass: 3, Packing Group II\nADR/IMDG: Regulated ‚Äî flammable labels required'},
      Corrosive:{signal:'Danger',hstat:'H314 ‚Äî Causes severe skin burns and eye damage\nH290 ‚Äî May be corrosive to metals',prec:'P260, P264, P280, P301+P330+P331, P303+P361+P353, P305+P351+P338',fa:'Inhalation: Move to fresh air. If breathing is difficult, give oxygen. Seek medical attention.\nSkin: IMMEDIATELY flush with water for 20+ min. Remove contaminated clothing. Seek medical attention.\nEye: Rinse cautiously with water for 30 min. Remove contact lenses. Get emergency medical help.\nIngestion: Rinse mouth. Do NOT induce vomiting. Drink water. Seek IMMEDIATE medical help.',ld50:'Acute Toxicity (Oral LD50): 200‚Äì500 mg/kg (rat) ‚Äî Category 4\nSkin Corrosion: Category 1A ‚Äî Causes severe burns in ‚â§3 min\nEye: Category 1 ‚Äî Irreversible eye damage\nCarcinogenicity: Not classified',flash:'>200¬∞C (non-flammable)',transport:'UN Number: UN 3260\nProper Shipping Name: Corrosive solid, acidic, organic, n.o.s.\nClass: 8, Packing Group II\nADR/IMDG: Regulated ‚Äî corrosive labels required'},
      'Environmental Hazard':{signal:'Warning',hstat:'H400 ‚Äî Very toxic to aquatic life\nH410 ‚Äî Very toxic to aquatic life with long lasting effects',prec:'P273, P391, P501',fa:'Inhalation: Move to fresh air. Seek medical attention if symptoms persist.\nSkin: Wash with soap and water for 15 min.\nEye: Rinse with water for 15 min.\nIngestion: Rinse mouth. Seek medical advice.',ld50:'Acute Toxicity (Oral LD50): >2000 mg/kg (rat)\nSkin Irritation: Category 3 ‚Äî Mild\nEye Irritation: Category 2B\nCarcinogenicity: Not classified\nAquatic toxicity is the primary concern.',flash:'>200¬∞C',transport:'UN Number: UN 3077\nProper Shipping Name: Environmentally hazardous substance, solid, n.o.s.\nClass: 9, Packing Group III\nIMDG: Marine pollutant marking required'},
      Irritant:{signal:'Warning',hstat:'H302 ‚Äî Harmful if swallowed\nH315 ‚Äî Causes skin irritation\nH319 ‚Äî Causes serious eye irritation',prec:'P264, P270, P280, P301+P312, P302+P352',fa:'Inhalation: Move to fresh air. Seek medical attention if symptoms persist.\nSkin: Wash with soap and water for 15 min.\nEye: Rinse with water for 15 min. Consult ophthalmologist if irritation persists.\nIngestion: Rinse mouth. Do NOT induce vomiting. Seek medical help.',ld50:'Acute Toxicity (Oral LD50): >2000 mg/kg (rat)\nSkin Irritation: Category 2\nEye Irritation: Category 2A\nCarcinogenicity: Not classified (IARC, NTP)',flash:'>200¬∞C',transport:'UN Number: Not regulated for transport\nADR/RID: Not classified as dangerous goods\nIMDG/IATA: Not restricted'}
    };
    const d=hd[h]||hd.Irritant;
    return[
      {title:'Identification',content:'Product: '+n+'\nCAS: '+cas+'\nRecommended Use: Industrial chemical manufacturing\nSupplier: Scimplify Platform\nEmergency: +91-XXX-XXXX (24h)'},
      {title:'Hazard Identification',content:'Classification (GHS): '+h+'\nSignal Word: '+d.signal+'\nHazard Statements: '+d.hstat+'\nPrecautionary: '+d.prec},
      {title:'Composition / Information on Ingredients',content:comp+'\nCAS Number: '+cas+'\nMolecular Formula: See technical specifications\nImpurities: ‚â§0.5% (conforms to pharmacopeial standards)'},
      {title:'First-Aid Measures',content:d.fa},
      {title:'Fire-Fighting Measures',content:'Suitable Extinguishing Media: '+(h==='Flammable'?'Foam, dry chemical, CO‚ÇÇ. Do NOT use water jet.':'Water spray, foam, dry chemical, CO‚ÇÇ')+'\nSpecific Hazards: '+(h==='Toxic'?'Toxic fumes may form under fire. Use SCBA.':h==='Flammable'?'Highly flammable. Vapours may form explosive mixture with air. Flashback possible.':'May emit toxic fumes under fire conditions')+'\nProtective Equipment: Self-contained breathing apparatus (SCBA)'},
      {title:'Accidental Release Measures',content:'Personal Precautions: '+(h==='Toxic'?'Evacuate area. Wear full protective suit + SCBA. Avoid all contact.':h==='Corrosive'?'Wear acid-resistant PPE. Neutralize with soda ash before cleanup.':'Wear PPE. Avoid dust generation.')+'\nEnvironmental: Prevent entry into drains/waterways.'+(h==='Environmental Hazard'?' CRITICAL ‚Äî toxic to aquatic life. Contain spill immediately.':'')+'\nCleanup: '+(h==='Flammable'?'Eliminate ignition sources. Absorb with inert material. Place in sealed container.':'Sweep up, place in suitable container for disposal.')},
      {title:'Handling and Storage',content:'Handling: '+(h==='Toxic'?'Handle under fume hood. Avoid all skin/eye contact. Wash thoroughly after handling.':h==='Flammable'?'Keep away from heat, sparks, open flames. Ground/bond container. Use explosion-proof equipment.':h==='Corrosive'?'Avoid contact with skin/eyes. Use in well-ventilated area. Do not breathe vapours.':'Avoid contact with skin/eyes. Use in well-ventilated area.')+'\nStorage: '+(h==='Flammable'?'Store in cool, well-ventilated place away from ignition sources. Keep container tightly closed.':h==='Corrosive'?'Store in corrosion-resistant container. Separate from metals and bases.':'Store in cool, dry place. Keep container tightly closed.')+'\nTemperature: '+(h==='Flammable'?'Below 30¬∞C, away from heat sources':'15‚Äì25¬∞C recommended')},
      {title:'Exposure Controls / PPE',content:'OEL (TWA): '+(h==='Toxic'?'0.1 mg/m¬≥ (highly toxic ‚Äî minimize exposure)':'5 mg/m¬≥')+'\nEngineering Controls: '+(h==='Toxic'||h==='Corrosive'?'Enclosed system with local exhaust ventilation':'Local exhaust ventilation')+'\nPPE ‚Äî Eyes: '+(h==='Corrosive'?'Face shield + chemical splash goggles':'Safety goggles')+'\nPPE ‚Äî Skin: '+(h==='Toxic'?'Chemical-resistant suit + double gloves':h==='Corrosive'?'Acid-resistant gloves + apron':'Chemical-resistant gloves')+'\nPPE ‚Äî Respiratory: '+(h==='Toxic'?'Full-face respirator with organic vapor cartridge (OV/P100)':'Dust mask (P2 filter)')},
      {title:'Physical & Chemical Properties',content:'Appearance: '+(h==='Flammable'?'Clear to pale yellow liquid':'White to off-white powder')+'\npH: '+(h==='Corrosive'?'<2 (strongly acidic)':'6.5‚Äì7.5 (1% solution)')+'\nMelting Point: See CoA\nSolubility (Water): '+(h==='Flammable'?'Immiscible':'Slightly soluble')+'\nFlash Point: '+d.flash},
      {title:'Stability and Reactivity',content:'Stability: '+(h==='Flammable'?'Stable but highly flammable. Keep from heat/sparks.':'Stable under recommended storage conditions')+'\nIncompatible Materials: '+(h==='Corrosive'?'Metals, bases, water (exothermic reaction)':h==='Flammable'?'Oxidizers, open flames, sparks':'Strong oxidizers, strong acids')+'\nHazardous Decomposition: '+(h==='Toxic'?'HCN, CO, CO‚ÇÇ, NOx ‚Äî HIGHLY TOXIC fumes':'CO, CO‚ÇÇ, NOx under thermal decomposition')},
      {title:'Toxicological Information',content:d.ld50},
      {title:'Ecological Information',content:'Aquatic Toxicity (LC50 Fish): '+(h==='Environmental Hazard'?'0.1‚Äì1.0 mg/L (96h) ‚Äî VERY TOXIC':'>100 mg/L (96h)')+'\nBiodegradability: '+(h==='Environmental Hazard'?'Not readily biodegradable ‚Äî persistent in environment':'Readily biodegradable')+'\nBioaccumulation: '+(h==='Environmental Hazard'?'High potential (log Kow >3) ‚Äî may accumulate in food chain':'Low potential (log Kow <1)')},
      {title:'Disposal Considerations',content:'Dispose in accordance with local/national regulations.\nWaste Code: '+(h==='Toxic'?'Hazardous waste ‚Äî requires licensed hazardous waste facility':h==='Environmental Hazard'?'Hazardous waste ‚Äî do NOT release to environment under any circumstances':'Refer to local authority for classification.')+'\nDo not discharge into drains or environment.'},
      {title:'Transport Information',content:d.transport},
      {title:'Regulatory Information',content:'REACH Status: '+(h==='Environmental Hazard'?'Pre-registered ‚Äî SVHC candidate under review':'Registered')+'\nTSCA (US): Listed\nDSL (Canada): Listed\nREACH SVHC: '+(h==='Toxic'?'Under evaluation ‚Äî potential Annex XIV inclusion':'Not currently listed')},
      {title:'Other Information',content:'Revision Date: '+new Date().toLocaleDateString()+'\nVersion: 1.0\nPrepared by: ComplianceOS ‚Äî Scimplify\nDisclaimers: Data based on current knowledge. User must evaluate suitability.'},
    ];
  },
}}

function atomsApp(){
  const prods=[
    {id:1,name:'Magnesium Hydroxide',cas:'1309-42-8',purity:99,price:420,minOrder:25,certs:['ISO 9001','GMP'],mw:'58.32',stock:'In Stock',deliveryEst:'Ships in 3-5 days',deliverySpeed:'express',greenScore:'A+',industry:['Pharma','Cosmetics']},
    {id:2,name:'Pymetrozine',cas:'123312-89-0',purity:98,price:3200,minOrder:5,certs:['FDA','GMP','REACH'],mw:'217.23',stock:'In Stock',deliveryEst:'Ships in 5-7 days',deliverySpeed:'standard',greenScore:'B',industry:['Agro']},
    {id:3,name:'Fexofenadine HCl',cas:'153439-40-8',purity:99.5,price:4800,minOrder:1,certs:['FDA','CGMP','ISO 9001'],mw:'538.12',stock:'Limited',deliveryEst:'Ships in 5-7 days',deliverySpeed:'standard',greenScore:'A',industry:['Pharma']},
    {id:4,name:'Sodium Fluoride',cas:'7681-49-4',purity:99,price:280,minOrder:50,certs:['ISO 9001'],mw:'41.99',stock:'In Stock',deliveryEst:'Ships in 3-5 days',deliverySpeed:'express',greenScore:null,industry:['Pharma','Cosmetics']},
    {id:5,name:'Zinc Stearate',cas:'557-05-1',purity:98,price:350,minOrder:25,certs:['ISO 9001','GMP'],mw:'632.33',stock:'In Stock',deliveryEst:'Ships in 5-7 days',deliverySpeed:'standard',greenScore:'A',industry:['Cosmetics','F&F']},
    {id:6,name:'Titanium Dioxide',cas:'13463-67-7',purity:99,price:520,minOrder:50,certs:['ISO 9001','ISO 14001','REACH'],mw:'79.87',stock:'Made to Order',deliveryEst:'Ships in 10-14 days',deliverySpeed:'standard',greenScore:'A+',industry:['Cosmetics','Pharma']},
    {id:7,name:'Citric Acid Anhydrous',cas:'77-92-9',purity:99.5,price:180,minOrder:100,certs:['FDA','GMP','HALAL'],mw:'192.12',stock:'In Stock',deliveryEst:'Ships in 2-3 days',deliverySpeed:'express',greenScore:'A+',industry:['Pharma','F&F','Cosmetics']},
    {id:8,name:'Salicylic Acid',cas:'69-72-7',purity:99,price:650,minOrder:10,certs:['FDA','GMP','ISO 9001'],mw:'138.12',stock:'Limited',deliveryEst:'Ships in 5-7 days',deliverySpeed:'standard',greenScore:'A',industry:['Pharma','Cosmetics']},
  ];
  const greenRank={'A+':3,'A':2,'B':1};
  return{
    products:prods,search:'',filterPurity:'',filterIndustry:'',filterDelivery:'',filterGreen:'',
    view:'catalog',showDetail:null,cart:[],quoteId:'',detailQty:25,
    compareList:[],
    trackingOrder:null,
    trackingSteps:[
      {label:'Order Placed',date:'Day 1'},{label:'Payment Confirmed',date:'Day 1'},
      {label:'Manufacturing',date:'Day 2-3'},{label:'Quality Check',date:'Day 4'},
      {label:'Dispatched',date:'Day 5'},{label:'Delivered',date:'Day 7'}
    ],
    orderHistory:[
      {id:'SCM-4821',date:'18 Feb 2026',status:'Delivered',trackStep:5,total:142000,items:[{name:'Citric Acid Anhydrous',qty:500,price:180,minOrder:100},{name:'Magnesium Hydroxide',qty:100,price:420,minOrder:25}]},
      {id:'SCM-4956',date:'22 Feb 2026',status:'In Transit',trackStep:4,total:48000,items:[{name:'Fexofenadine HCl',qty:10,price:4800,minOrder:1}]},
      {id:'SCM-5012',date:'25 Feb 2026',status:'Processing',trackStep:2,total:32000,items:[{name:'Pymetrozine',qty:10,price:3200,minOrder:5}]},
    ],
    get filteredProducts(){return this.products.filter(p=>{
      if(this.search&&!p.name.toLowerCase().includes(this.search.toLowerCase()))return false;
      if(this.filterPurity&&p.purity<parseFloat(this.filterPurity))return false;
      if(this.filterIndustry&&!p.industry.includes(this.filterIndustry))return false;
      if(this.filterDelivery&&p.deliverySpeed!==this.filterDelivery)return false;
      if(this.filterGreen){const min=greenRank[this.filterGreen]||0;if(!p.greenScore||(greenRank[p.greenScore]||0)<min)return false;}
      return true;
    })},
    getVolPrice(p,qty){if(qty>=1000)return Math.round(p.price*0.85);if(qty>=500)return Math.round(p.price*0.92);if(qty>=100)return p.price;return Math.round(p.price*1.1)},
    addToCart(p){if(!this.cart.find(c=>c.name===p.name))this.cart.push({name:p.name,price:p.price,qty:p.minOrder,minOrder:p.minOrder})},
    addToCartQty(p,qty){const existing=this.cart.find(c=>c.name===p.name);if(existing){existing.qty=qty;existing.price=this.getVolPrice(p,qty)}else{this.cart.push({name:p.name,price:this.getVolPrice(p,qty),qty:qty,minOrder:p.minOrder})}},
    cartTotal(){return this.cart.reduce((s,c)=>s+c.price*c.qty,0)},
    toggleCompare(p){const idx=this.compareList.findIndex(c=>c.id===p.id);if(idx>=0)this.compareList.splice(idx,1);else if(this.compareList.length<3)this.compareList.push(p);else window.dispatchEvent(new CustomEvent('show-toast',{detail:'Compare limited to 3 products'}))},
    reorder(order){order.items.forEach(item=>{if(!this.cart.find(c=>c.name===item.name))this.cart.push({...item})});this.view='cart'},
    placeOrder(){const order={id:this.quoteId,date:new Date().toLocaleDateString('en-GB',{day:'numeric',month:'short',year:'numeric'}),status:'Processing',trackStep:1,total:this.cartTotal(),items:this.cart.map(c=>({...c}))};this.orderHistory.unshift(order);this.trackingOrder=order;this.cart=[];this.view='tracking'}
  }
}

function greenApp(){return{
  gTab:'compare',cbamTons:100,cbamCountry:'DE',
  selectedProduct:'Pymetrozine',
  certCAS:{'Pymetrozine':'CAS 123312-89-0 ¬∑ MW 217.23 g/mol','Fexofenadine':'CAS 153439-40-8 ¬∑ MW 538.12 g/mol','Salicylic Acid':'CAS 69-72-7 ¬∑ MW 138.12 g/mol','TiO‚ÇÇ':'CAS 13463-67-7 ¬∑ MW 79.87 g/mol'},
  productData:{
    'Pymetrozine':{trad:{grade:'B',steps:8,energy:45,water:120,waste:3.2,co2:5.8},opt:{grade:'A+',steps:5,energy:22,water:45,waste:0.8,co2:2.1},iters:[{label:'V1 (Baseline)',co2:5.8},{label:'V2 (Catalyst)',co2:4.2},{label:'V3 (Solvent)',co2:3.1},{label:'V4 (Optimized)',co2:2.1}]},
    'Fexofenadine':{trad:{grade:'C+',steps:11,energy:62,water:180,waste:4.5,co2:7.2},opt:{grade:'A',steps:7,energy:30,water:65,waste:1.2,co2:3.0},iters:[{label:'V1 (Baseline)',co2:7.2},{label:'V2 (Route)',co2:5.4},{label:'V3 (Optimized)',co2:3.0}]},
    'Salicylic Acid':{trad:{grade:'B+',steps:4,energy:28,water:80,waste:2.1,co2:3.8},opt:{grade:'A+',steps:3,energy:15,water:30,waste:0.5,co2:1.4},iters:[{label:'V1 (Baseline)',co2:3.8},{label:'V2 (Energy)',co2:2.6},{label:'V3 (Optimized)',co2:1.4}]},
    'TiO‚ÇÇ':{trad:{grade:'C',steps:6,energy:85,water:200,waste:5.8,co2:9.1},opt:{grade:'B+',steps:5,energy:52,water:110,waste:2.4,co2:4.8},iters:[{label:'V1 (Baseline)',co2:9.1},{label:'V2 (Process)',co2:7.0},{label:'V3 (Energy)',co2:5.6},{label:'V4 (Optimized)',co2:4.8}]},
  },
  routes:[
    {name:'Traditional Route',grade:'B',steps:8,energy:45,water:120,waste:3.2,co2:5.8},
    {name:'Scimplify Optimized',grade:'A+',steps:5,energy:22,water:45,waste:0.8,co2:2.1},
  ],
  currentIterations:[{label:'V1 (Baseline)',co2:5.8},{label:'V2 (Catalyst)',co2:4.2},{label:'V3 (Solvent)',co2:3.1},{label:'V4 (Optimized)',co2:2.1}],
  builder:{steps:5,energy:'mixed',location:'tamilnadu'},
  cbamCountries:[
    {code:'DE',name:'Germany',flag:'üá©üá™',price:73},
    {code:'FR',name:'France',flag:'üá´üá∑',price:73},
    {code:'NL',name:'Netherlands',flag:'üá≥üá±',price:73},
    {code:'IT',name:'Italy',flag:'üáÆüáπ',price:73},
    {code:'BE',name:'Belgium',flag:'üáßüá™',price:73},
  ],
  portfolio:[
    {name:'Pymetrozine',grade:'A+',co2:2.1,trend:'down',tons:120},
    {name:'Fexofenadine',grade:'A',co2:3.0,trend:'down',tons:85},
    {name:'Salicylic Acid',grade:'A+',co2:1.4,trend:'down',tons:200},
    {name:'TiO‚ÇÇ',grade:'B+',co2:4.8,trend:'up',tons:300},
    {name:'Citric Acid',grade:'A',co2:2.6,trend:'stable',tons:450},
    {name:'Magnesium Hydroxide',grade:'A',co2:2.2,trend:'down',tons:180},
    {name:'Zinc Stearate',grade:'B+',co2:4.1,trend:'stable',tons:90},
    {name:'Sodium Fluoride',grade:'A+',co2:1.8,trend:'down',tons:150},
  ],
  metricLabels:{steps:'Steps',energy:'Energy',water:'Water',waste:'Waste',co2:'CO‚ÇÇ'},
  metricUnits:{steps:'steps',energy:'kWh/kg',water:'L/kg',waste:'kg/kg',co2:'kg CO‚ÇÇe/kg'},
  maxMetric(m){return Math.max(...this.routes.map(r=>r[m]))},
  updateRoutes(){
    const d=this.productData[this.selectedProduct];
    this.routes=[
      {name:'Traditional Route',...d.trad},
      {name:'Scimplify Optimized',...d.opt},
    ];
    this.currentIterations=d.iters;
  },
  builderScore(){
    const base=1.2;
    const stepsCost=(this.builder.steps-3)*0.4;
    const energyCost=this.builder.energy==='grid'?1.8:this.builder.energy==='mixed'?0.9:0.2;
    const locCost=this.builder.location==='gujarat'?0.6:this.builder.location==='tamilnadu'?0.3:0.5;
    return base+stepsCost+energyCost+locCost;
  },
  currentCarbonPrice(){
    const c=this.cbamCountries.find(c=>c.code===this.cbamCountry);
    return c?c.price:75;
  }
}}
</script>
</body>
</html>
